(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Wa(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var rd={exports:{}},$s={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var id,Ap;function Gd(){if(Ap)return id;Ap=1;var i=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function r(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}function o(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var c={},h=0;h<10;h++)c["_"+String.fromCharCode(h)]=h;var g=Object.getOwnPropertyNames(c).map(function(C){return c[C]});if(g.join("")!=="0123456789")return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(C){v[C]=C}),Object.keys(Object.assign({},v)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return id=o()?Object.assign:function(l,c){for(var h,g=r(l),v,C=1;C<arguments.length;C++){h=Object(arguments[C]);for(var D in h)e.call(h,D)&&(g[D]=h[D]);if(i){v=i(h);for(var b=0;b<v.length;b++)t.call(h,v[b])&&(g[v[b]]=h[v[b]])}}return g},id}var sd={exports:{}},Be={};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function xy(){if(bp)return Be;bp=1;var i=Gd(),e=60103,t=60106;Be.Fragment=60107,Be.StrictMode=60108,Be.Profiler=60114;var r=60109,o=60110,l=60112;Be.Suspense=60113;var c=60115,h=60116;if(typeof Symbol=="function"&&Symbol.for){var g=Symbol.for;e=g("react.element"),t=g("react.portal"),Be.Fragment=g("react.fragment"),Be.StrictMode=g("react.strict_mode"),Be.Profiler=g("react.profiler"),r=g("react.provider"),o=g("react.context"),l=g("react.forward_ref"),Be.Suspense=g("react.suspense"),c=g("react.memo"),h=g("react.lazy")}var v=typeof Symbol=="function"&&Symbol.iterator;function C(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}function D(O){for(var W="https://reactjs.org/docs/error-decoder.html?invariant="+O,te=1;te<arguments.length;te++)W+="&args[]="+encodeURIComponent(arguments[te]);return"Minified React error #"+O+"; visit "+W+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L={};function j(O,W,te){this.props=O,this.context=W,this.refs=L,this.updater=te||b}j.prototype.isReactComponent={},j.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error(D(85));this.updater.enqueueSetState(this,O,W,"setState")},j.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function x(){}x.prototype=j.prototype;function $(O,W,te){this.props=O,this.context=W,this.refs=L,this.updater=te||b}var Q=$.prototype=new x;Q.constructor=$,i(Q,j.prototype),Q.isPureReactComponent=!0;var U={current:null},Y=Object.prototype.hasOwnProperty,f={key:!0,ref:!0,__self:!0,__source:!0};function y(O,W,te){var he,H={},ae=null,ne=null;if(W!=null)for(he in W.ref!==void 0&&(ne=W.ref),W.key!==void 0&&(ae=""+W.key),W)Y.call(W,he)&&!f.hasOwnProperty(he)&&(H[he]=W[he]);var _e=arguments.length-2;if(_e===1)H.children=te;else if(1<_e){for(var pe=Array(_e),Me=0;Me<_e;Me++)pe[Me]=arguments[Me+2];H.children=pe}if(O&&O.defaultProps)for(he in _e=O.defaultProps,_e)H[he]===void 0&&(H[he]=_e[he]);return{$$typeof:e,type:O,key:ae,ref:ne,props:H,_owner:U.current}}function _(O,W){return{$$typeof:e,type:O.type,key:W,ref:O.ref,props:O.props,_owner:O._owner}}function E(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function T(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(te){return W[te]})}var k=/\/+/g;function I(O,W){return typeof O=="object"&&O!==null&&O.key!=null?T(""+O.key):W.toString(36)}function R(O,W,te,he,H){var ae=typeof O;(ae==="undefined"||ae==="boolean")&&(O=null);var ne=!1;if(O===null)ne=!0;else switch(ae){case"string":case"number":ne=!0;break;case"object":switch(O.$$typeof){case e:case t:ne=!0}}if(ne)return ne=O,H=H(ne),O=he===""?"."+I(ne,0):he,Array.isArray(H)?(te="",O!=null&&(te=O.replace(k,"$&/")+"/"),R(H,W,te,"",function(Me){return Me})):H!=null&&(E(H)&&(H=_(H,te+(!H.key||ne&&ne.key===H.key?"":(""+H.key).replace(k,"$&/")+"/")+O)),W.push(H)),1;if(ne=0,he=he===""?".":he+":",Array.isArray(O))for(var _e=0;_e<O.length;_e++){ae=O[_e];var pe=he+I(ae,_e);ne+=R(ae,W,te,pe,H)}else if(pe=C(O),typeof pe=="function")for(O=pe.call(O),_e=0;!(ae=O.next()).done;)ae=ae.value,pe=he+I(ae,_e++),ne+=R(ae,W,te,pe,H);else if(ae==="object")throw W=""+O,Error(D(31,W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W));return ne}function V(O,W,te){if(O==null)return O;var he=[],H=0;return R(O,he,"","",function(ae){return W.call(te,ae,H++)}),he}function A(O){if(O._status===-1){var W=O._result;W=W(),O._status=0,O._result=W,W.then(function(te){O._status===0&&(te=te.default,O._status=1,O._result=te)},function(te){O._status===0&&(O._status=2,O._result=te)})}if(O._status===1)return O._result;throw O._result}var X={current:null};function ee(){var O=X.current;if(O===null)throw Error(D(321));return O}var F={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:U,IsSomeRendererActing:{current:!1},assign:i};return Be.Children={map:V,forEach:function(O,W,te){V(O,function(){W.apply(this,arguments)},te)},count:function(O){var W=0;return V(O,function(){W++}),W},toArray:function(O){return V(O,function(W){return W})||[]},only:function(O){if(!E(O))throw Error(D(143));return O}},Be.Component=j,Be.PureComponent=$,Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,Be.cloneElement=function(O,W,te){if(O==null)throw Error(D(267,O));var he=i({},O.props),H=O.key,ae=O.ref,ne=O._owner;if(W!=null){if(W.ref!==void 0&&(ae=W.ref,ne=U.current),W.key!==void 0&&(H=""+W.key),O.type&&O.type.defaultProps)var _e=O.type.defaultProps;for(pe in W)Y.call(W,pe)&&!f.hasOwnProperty(pe)&&(he[pe]=W[pe]===void 0&&_e!==void 0?_e[pe]:W[pe])}var pe=arguments.length-2;if(pe===1)he.children=te;else if(1<pe){_e=Array(pe);for(var Me=0;Me<pe;Me++)_e[Me]=arguments[Me+2];he.children=_e}return{$$typeof:e,type:O.type,key:H,ref:ae,props:he,_owner:ne}},Be.createContext=function(O,W){return W===void 0&&(W=null),O={$$typeof:o,_calculateChangedBits:W,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider={$$typeof:r,_context:O},O.Consumer=O},Be.createElement=y,Be.createFactory=function(O){var W=y.bind(null,O);return W.type=O,W},Be.createRef=function(){return{current:null}},Be.forwardRef=function(O){return{$$typeof:l,render:O}},Be.isValidElement=E,Be.lazy=function(O){return{$$typeof:h,_payload:{_status:-1,_result:O},_init:A}},Be.memo=function(O,W){return{$$typeof:c,type:O,compare:W===void 0?null:W}},Be.useCallback=function(O,W){return ee().useCallback(O,W)},Be.useContext=function(O,W){return ee().useContext(O,W)},Be.useDebugValue=function(){},Be.useEffect=function(O,W){return ee().useEffect(O,W)},Be.useImperativeHandle=function(O,W,te){return ee().useImperativeHandle(O,W,te)},Be.useLayoutEffect=function(O,W){return ee().useLayoutEffect(O,W)},Be.useMemo=function(O,W){return ee().useMemo(O,W)},Be.useReducer=function(O,W,te){return ee().useReducer(O,W,te)},Be.useRef=function(O){return ee().useRef(O)},Be.useState=function(O){return ee().useState(O)},Be.version="17.0.2",Be}var Pp;function dn(){return Pp||(Pp=1,sd.exports=xy()),sd.exports}/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function Fy(){if(Rp)return $s;Rp=1,Gd();var i=dn(),e=60103;if($s.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var t=Symbol.for;e=t("react.element"),$s.Fragment=t("react.fragment")}var r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,g,v){var C,D={},b=null,L=null;v!==void 0&&(b=""+v),g.key!==void 0&&(b=""+g.key),g.ref!==void 0&&(L=g.ref);for(C in g)o.call(g,C)&&!l.hasOwnProperty(C)&&(D[C]=g[C]);if(h&&h.defaultProps)for(C in g=h.defaultProps,g)D[C]===void 0&&(D[C]=g[C]);return{$$typeof:e,type:h,key:b,ref:L,props:D,_owner:r.current}}return $s.jsx=c,$s.jsxs=c,$s}var Dp;function jy(){return Dp||(Dp=1,rd.exports=Fy()),rd.exports}var dt=jy(),zy=dn();const $i=Wa(zy);var od={exports:{}},Xt={},ad={exports:{}},ud={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function By(){return Np||(Np=1,function(i){var e,t,r,o;if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();i.unstable_now=function(){return c.now()-h}}if(typeof window>"u"||typeof MessageChannel!="function"){var g=null,v=null,C=function(){if(g!==null)try{var H=i.unstable_now();g(!0,H),g=null}catch(ae){throw setTimeout(C,0),ae}};e=function(H){g!==null?setTimeout(e,0,H):(g=H,setTimeout(C,0))},t=function(H,ae){v=setTimeout(H,ae)},r=function(){clearTimeout(v)},i.unstable_shouldYield=function(){return!1},o=i.unstable_forceFrameRate=function(){}}else{var D=window.setTimeout,b=window.clearTimeout;if(typeof console<"u"){var L=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof L!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var j=!1,x=null,$=-1,Q=5,U=0;i.unstable_shouldYield=function(){return i.unstable_now()>=U},o=function(){},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<H?Math.floor(1e3/H):5};var Y=new MessageChannel,f=Y.port2;Y.port1.onmessage=function(){if(x!==null){var H=i.unstable_now();U=H+Q;try{x(!0,H)?f.postMessage(null):(j=!1,x=null)}catch(ae){throw f.postMessage(null),ae}}else j=!1},e=function(H){x=H,j||(j=!0,f.postMessage(null))},t=function(H,ae){$=D(function(){H(i.unstable_now())},ae)},r=function(){b($),$=-1}}function y(H,ae){var ne=H.length;H.push(ae);e:for(;;){var _e=ne-1>>>1,pe=H[_e];if(pe!==void 0&&0<T(pe,ae))H[_e]=ae,H[ne]=pe,ne=_e;else break e}}function _(H){return H=H[0],H===void 0?null:H}function E(H){var ae=H[0];if(ae!==void 0){var ne=H.pop();if(ne!==ae){H[0]=ne;e:for(var _e=0,pe=H.length;_e<pe;){var Me=2*(_e+1)-1,Fe=H[Me],ce=Me+1,se=H[ce];if(Fe!==void 0&&0>T(Fe,ne))se!==void 0&&0>T(se,Fe)?(H[_e]=se,H[ce]=ne,_e=ce):(H[_e]=Fe,H[Me]=ne,_e=Me);else if(se!==void 0&&0>T(se,ne))H[_e]=se,H[ce]=ne,_e=ce;else break e}}return ae}return null}function T(H,ae){var ne=H.sortIndex-ae.sortIndex;return ne!==0?ne:H.id-ae.id}var k=[],I=[],R=1,V=null,A=3,X=!1,ee=!1,F=!1;function O(H){for(var ae=_(I);ae!==null;){if(ae.callback===null)E(I);else if(ae.startTime<=H)E(I),ae.sortIndex=ae.expirationTime,y(k,ae);else break;ae=_(I)}}function W(H){if(F=!1,O(H),!ee)if(_(k)!==null)ee=!0,e(te);else{var ae=_(I);ae!==null&&t(W,ae.startTime-H)}}function te(H,ae){ee=!1,F&&(F=!1,r()),X=!0;var ne=A;try{for(O(ae),V=_(k);V!==null&&(!(V.expirationTime>ae)||H&&!i.unstable_shouldYield());){var _e=V.callback;if(typeof _e=="function"){V.callback=null,A=V.priorityLevel;var pe=_e(V.expirationTime<=ae);ae=i.unstable_now(),typeof pe=="function"?V.callback=pe:V===_(k)&&E(k),O(ae)}else E(k);V=_(k)}if(V!==null)var Me=!0;else{var Fe=_(I);Fe!==null&&t(W,Fe.startTime-ae),Me=!1}return Me}finally{V=null,A=ne,X=!1}}var he=o;i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){ee||X||(ee=!0,e(te))},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_getFirstCallbackNode=function(){return _(k)},i.unstable_next=function(H){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var ne=A;A=ae;try{return H()}finally{A=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=he,i.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=A;A=H;try{return ae()}finally{A=ne}},i.unstable_scheduleCallback=function(H,ae,ne){var _e=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?_e+ne:_e):ne=_e,H){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ne+pe,H={id:R++,callback:ae,priorityLevel:H,startTime:ne,expirationTime:pe,sortIndex:-1},ne>_e?(H.sortIndex=ne,y(I,H),_(k)===null&&H===_(I)&&(F?r():F=!0,t(W,ne-_e))):(H.sortIndex=pe,y(k,H),ee||X||(ee=!0,e(te))),H},i.unstable_wrapCallback=function(H){var ae=A;return function(){var ne=A;A=ae;try{return H.apply(this,arguments)}finally{A=ne}}}}(ud)),ud}var Mp;function Uy(){return Mp||(Mp=1,ad.exports=By()),ad.exports}/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function $y(){if(Vp)return Xt;Vp=1;var i=dn(),e=Gd(),t=Uy();function r(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(r(227));var o=new Set,l={};function c(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(l[n]=s,n=0;n<s.length;n++)o.add(s[n])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C=Object.prototype.hasOwnProperty,D={},b={};function L(n){return C.call(b,n)?!0:C.call(D,n)?!1:v.test(n)?b[n]=!0:(D[n]=!0,!1)}function j(n,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function x(n,s,a,d){if(s===null||typeof s>"u"||j(n,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function $(n,s,a,d,p,S,P){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=S,this.removeEmptyString=P}var Q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Q[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];Q[s]=new $(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){Q[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Q[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Q[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){Q[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){Q[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){Q[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){Q[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function Y(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(U,Y);Q[s]=new $(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(U,Y);Q[s]=new $(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(U,Y);Q[s]=new $(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){Q[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),Q.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){Q[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function f(n,s,a,d){var p=Q.hasOwnProperty(s)?Q[s]:null,S=p!==null?p.type===0:d?!1:!(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N");S||(x(s,a,p,d)&&(a=null),d||p===null?L(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):p.mustUseProperty?n[p.propertyName]=a===null?p.type===3?!1:"":a:(s=p.attributeName,d=p.attributeNamespace,a===null?n.removeAttribute(s):(p=p.type,a=p===3||p===4&&a===!0?"":""+a,d?n.setAttributeNS(d,s,a):n.setAttribute(s,a))))}var y=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,E=60106,T=60107,k=60108,I=60114,R=60109,V=60110,A=60112,X=60113,ee=60120,F=60115,O=60116,W=60121,te=60128,he=60129,H=60130,ae=60131;if(typeof Symbol=="function"&&Symbol.for){var ne=Symbol.for;_=ne("react.element"),E=ne("react.portal"),T=ne("react.fragment"),k=ne("react.strict_mode"),I=ne("react.profiler"),R=ne("react.provider"),V=ne("react.context"),A=ne("react.forward_ref"),X=ne("react.suspense"),ee=ne("react.suspense_list"),F=ne("react.memo"),O=ne("react.lazy"),W=ne("react.block"),ne("react.scope"),te=ne("react.opaque.id"),he=ne("react.debug_trace_mode"),H=ne("react.offscreen"),ae=ne("react.legacy_hidden")}var _e=typeof Symbol=="function"&&Symbol.iterator;function pe(n){return n===null||typeof n!="object"?null:(n=_e&&n[_e]||n["@@iterator"],typeof n=="function"?n:null)}var Me;function Fe(n){if(Me===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Me=s&&s[1]||""}return`
`+Me+n}var ce=!1;function se(n,s){if(!n||ce)return"";ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var d=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){d=z}n.call(s.prototype)}else{try{throw Error()}catch(z){d=z}n()}}catch(z){if(z&&d&&typeof z.stack=="string"){for(var p=z.stack.split(`
`),S=d.stack.split(`
`),P=p.length-1,M=S.length-1;1<=P&&0<=M&&p[P]!==S[M];)M--;for(;1<=P&&0<=M;P--,M--)if(p[P]!==S[M]){if(P!==1||M!==1)do if(P--,M--,0>M||p[P]!==S[M])return`
`+p[P].replace(" at new "," at ");while(1<=P&&0<=M);break}}}finally{ce=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Fe(n):""}function de(n){switch(n.tag){case 5:return Fe(n.type);case 16:return Fe("Lazy");case 13:return Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 2:case 15:return n=se(n.type,!1),n;case 11:return n=se(n.type.render,!1),n;case 22:return n=se(n.type._render,!1),n;case 1:return n=se(n.type,!0),n;default:return""}}function ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case T:return"Fragment";case E:return"Portal";case I:return"Profiler";case k:return"StrictMode";case X:return"Suspense";case ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Consumer";case R:return(n._context.displayName||"Context")+".Provider";case A:var s=n.render;return s=s.displayName||s.name||"",n.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case F:return ve(n.type);case W:return ve(n._render);case O:s=n._payload,n=n._init;try{return ve(n(s))}catch{}}return null}function je(n){switch(typeof n){case"boolean":case"number":case"object":case"string":case"undefined":return n;default:return""}}function qe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function at(n){var s=qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),d=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var p=a.get,S=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return p.call(this)},set:function(P){d=""+P,S.call(this,P)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(P){d=""+P},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function It(n){n._valueTracker||(n._valueTracker=at(n))}function bn(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return n&&(d=qe(n)?n.checked?"true":"false":n.value),n=d,n!==a?(s.setValue(n),!0):!1}function fn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function uo(n,s){var a=s.checked;return e({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function lo(n,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=je(s.value!=null?s.value:a),n._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ts(n,s){s=s.checked,s!=null&&f(n,"checked",s,!1)}function ns(n,s){ts(n,s);var a=je(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?ii(n,s.type,a):s.hasOwnProperty("defaultValue")&&ii(n,s.type,je(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Ja(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ii(n,s,a){(s!=="number"||fn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}function co(n){var s="";return i.Children.forEach(n,function(a){a!=null&&(s+=a)}),s}function rs(n,s){return n=e({children:void 0},s),(s=co(s.children))&&(n.children=s),n}function et(n,s,a,d){if(n=n.options,s){s={};for(var p=0;p<a.length;p++)s["$"+a[p]]=!0;for(a=0;a<n.length;a++)p=s.hasOwnProperty("$"+n[a].value),n[a].selected!==p&&(n[a].selected=p),p&&d&&(n[a].defaultSelected=!0)}else{for(a=""+je(a),s=null,p=0;p<n.length;p++){if(n[p].value===a){n[p].selected=!0,d&&(n[p].defaultSelected=!0);return}s!==null||n[p].disabled||(s=n[p])}s!==null&&(s.selected=!0)}}function ut(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(r(91));return e({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function si(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(r(92));if(Array.isArray(a)){if(!(1>=a.length))throw Error(r(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:je(a)}}function fo(n,s){var a=je(s.value),d=je(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),d!=null&&(n.defaultValue=""+d)}function ho(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}var po={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function wr(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function is(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?wr(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var oi,ss=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,p){MSApp.execUnsafeLocalFunction(function(){return n(s,a,d,p)})}:n}(function(n,s){if(n.namespaceURI!==po.svg||"innerHTML"in n)n.innerHTML=s;else{for(oi=oi||document.createElement("div"),oi.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=oi.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function ai(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var ui={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mo=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(n){mo.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),ui[s]=ui[n]})});function go(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ui.hasOwnProperty(n)&&ui[n]?(""+s).trim():s+"px"}function _o(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,p=go(a,s[a],d);a==="float"&&(a="cssFloat"),d?n.setProperty(a,p):n[a]=p}}var li=e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ci(n,s){if(s){if(li[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(r(60));if(!(typeof s.dangerouslySetInnerHTML=="object"&&"__html"in s.dangerouslySetInnerHTML))throw Error(r(61))}if(s.style!=null&&typeof s.style!="object")throw Error(r(62))}}function di(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function hn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var os=null,pn=null,Wn=null;function Er(n){if(n=Bo(n)){if(typeof os!="function")throw Error(r(280));var s=n.stateNode;s&&(s=vu(s),os(n.stateNode,n.type,s))}}function vo(n){pn?Wn?Wn.push(n):Wn=[n]:pn=n}function mt(){if(pn){var n=pn,s=Wn;if(Wn=pn=null,Er(n),s)for(n=0;n<s.length;n++)Er(s[n])}}function as(n,s){return n(s)}function Tr(n,s,a,d,p){return n(s,a,d,p)}function Gn(){}var Za=as,Kn=!1,Pn=!1;function yo(){(pn!==null||Wn!==null)&&(Gn(),mt())}function $l(n,s,a){if(Pn)return n(s,a);Pn=!0;try{return Za(n,s,a)}finally{Pn=!1,yo()}}function Rn(n,s){var a=n.stateNode;if(a===null)return null;var d=vu(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var us=!1;if(g)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){us=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{us=!1}function ls(n,s,a,d,p,S,P,M,z){var J=Array.prototype.slice.call(arguments,3);try{s.apply(a,J)}catch(me){this.onError(me)}}var jt=!1,fi=null,hi=!1,pi=null,wo={onError:function(n){jt=!0,fi=n}};function eu(n,s,a,d,p,S,P,M,z){jt=!1,fi=null,ls.apply(wo,arguments)}function tu(n,s,a,d,p,S,P,M,z){if(eu.apply(this,arguments),jt){if(jt){var J=fi;jt=!1,fi=null}else throw Error(r(198));hi||(hi=!0,pi=J)}}function Xn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&1026&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function mi(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Eo(n){if(Xn(n)!==n)throw Error(r(188))}function To(n){var s=n.alternate;if(!s){if(s=Xn(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,d=s;;){var p=a.return;if(p===null)break;var S=p.alternate;if(S===null){if(d=p.return,d!==null){a=d;continue}break}if(p.child===S.child){for(S=p.child;S;){if(S===a)return Eo(p),n;if(S===d)return Eo(p),s;S=S.sibling}throw Error(r(188))}if(a.return!==d.return)a=p,d=S;else{for(var P=!1,M=p.child;M;){if(M===a){P=!0,a=p,d=S;break}if(M===d){P=!0,d=p,a=S;break}M=M.sibling}if(!P){for(M=S.child;M;){if(M===a){P=!0,a=S,d=p;break}if(M===d){P=!0,d=S,a=p;break}M=M.sibling}if(!P)throw Error(r(189))}}if(a.alternate!==d)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function Sr(n){if(n=To(n),!n)return null;for(var s=n;;){if(s.tag===5||s.tag===6)return s;if(s.child)s.child.return=s,s=s.child;else{if(s===n)break;for(;!s.sibling;){if(!s.return||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}}return null}function Dn(n,s){for(var a=n.alternate;s!==null;){if(s===n||s===a)return!0;s=s.return}return!1}var cs,So,Io,ko,ds=!1,zt=[],Zt=null,mn=null,gn=null,gi=new Map,_i=new Map,Ir=[],Co="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ao(n,s,a,d,p){return{blockedOn:n,domEventName:s,eventSystemFlags:a|16,nativeEvent:p,targetContainers:[d]}}function Nn(n,s){switch(n){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":mn=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":gi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_i.delete(s.pointerId)}}function Mt(n,s,a,d,p,S){return n===null||n.nativeEvent!==S?(n=Ao(s,a,d,p,S),s!==null&&(s=Bo(s),s!==null&&So(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),n)}function fs(n,s,a,d,p){switch(s){case"focusin":return Zt=Mt(Zt,n,s,a,d,p),!0;case"dragenter":return mn=Mt(mn,n,s,a,d,p),!0;case"mouseover":return gn=Mt(gn,n,s,a,d,p),!0;case"pointerover":var S=p.pointerId;return gi.set(S,Mt(gi.get(S)||null,n,s,a,d,p)),!0;case"gotpointercapture":return S=p.pointerId,_i.set(S,Mt(_i.get(S)||null,n,s,a,d,p)),!0}return!1}function hs(n){var s=Pi(n.target);if(s!==null){var a=Xn(s);if(a!==null){if(s=a.tag,s===13){if(s=mi(a),s!==null){n.blockedOn=s,ko(n.lanePriority,function(){t.unstable_runWithPriority(n.priority,function(){Io(a)})});return}}else if(s===3&&a.stateNode.hydrate){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vi(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=ys(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a!==null)return s=Bo(a),s!==null&&So(s),n.blockedOn=a,!1;s.shift()}return!0}function Ge(n,s,a){vi(n)&&a.delete(s)}function ps(){for(ds=!1;0<zt.length;){var n=zt[0];if(n.blockedOn!==null){n=Bo(n.blockedOn),n!==null&&cs(n);break}for(var s=n.targetContainers;0<s.length;){var a=ys(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a!==null){n.blockedOn=a;break}s.shift()}n.blockedOn===null&&zt.shift()}Zt!==null&&vi(Zt)&&(Zt=null),mn!==null&&vi(mn)&&(mn=null),gn!==null&&vi(gn)&&(gn=null),gi.forEach(Ge),_i.forEach(Ge)}function _n(n,s){n.blockedOn===s&&(n.blockedOn=null,ds||(ds=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ps)))}function kr(n){function s(p){return _n(p,n)}if(0<zt.length){_n(zt[0],n);for(var a=1;a<zt.length;a++){var d=zt[a];d.blockedOn===n&&(d.blockedOn=null)}}for(Zt!==null&&_n(Zt,n),mn!==null&&_n(mn,n),gn!==null&&_n(gn,n),gi.forEach(s),_i.forEach(s),a=0;a<Ir.length;a++)d=Ir[a],d.blockedOn===n&&(d.blockedOn=null);for(;0<Ir.length&&(a=Ir[0],a.blockedOn===null);)hs(a),a.blockedOn===null&&Ir.shift()}function ms(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Yn={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionend:ms("Transition","TransitionEnd")},bo={},nu={};g&&(nu=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function gs(n){if(bo[n])return bo[n];if(!Yn[n])return n;var s=Yn[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in nu)return bo[n]=s[a];return n}var ru=gs("animationend"),Cr=gs("animationiteration"),vn=gs("animationstart"),Po=gs("transitionend"),Ro=new Map,_s=new Map,Ar=["abort","abort",ru,"animationEnd",Cr,"animationIteration",vn,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Po,"transitionEnd","waiting","waiting"];function Do(n,s){for(var a=0;a<n.length;a+=2){var d=n[a],p=n[a+1];p="on"+(p[0].toUpperCase()+p.slice(1)),_s.set(d,s),Ro.set(d,p),c(p,[d])}}var ql=t.unstable_now;ql();var Ke=8;function Vt(n){if(1&n)return Ke=15,1;if(2&n)return Ke=14,2;if(4&n)return Ke=13,4;var s=24&n;return s!==0?(Ke=12,s):n&32?(Ke=11,32):(s=192&n,s!==0?(Ke=10,s):n&256?(Ke=9,256):(s=3584&n,s!==0?(Ke=8,s):n&4096?(Ke=7,4096):(s=4186112&n,s!==0?(Ke=6,s):(s=62914560&n,s!==0?(Ke=5,s):n&67108864?(Ke=4,67108864):n&134217728?(Ke=3,134217728):(s=805306368&n,s!==0?(Ke=2,s):1073741824&n?(Ke=1,1073741824):(Ke=8,n))))))}function Hl(n){switch(n){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Wl(n){switch(n){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(r(358,n))}}function Mn(n,s){var a=n.pendingLanes;if(a===0)return Ke=0;var d=0,p=0,S=n.expiredLanes,P=n.suspendedLanes,M=n.pingedLanes;if(S!==0)d=S,p=Ke=15;else if(S=a&134217727,S!==0){var z=S&~P;z!==0?(d=Vt(z),p=Ke):(M&=S,M!==0&&(d=Vt(M),p=Ke))}else S=a&~P,S!==0?(d=Vt(S),p=Ke):M!==0&&(d=Vt(M),p=Ke);if(d===0)return 0;if(d=31-tn(d),d=a&((0>d?0:1<<d)<<1)-1,s!==0&&s!==d&&!(s&P)){if(Vt(s),p<=Ke)return s;Ke=p}if(s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=d;0<s;)a=31-tn(s),p=1<<a,d|=n[a],s&=~p;return d}function yi(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function wi(n,s){switch(n){case 15:return 1;case 14:return 2;case 12:return n=en(24&~s),n===0?wi(10,s):n;case 10:return n=en(192&~s),n===0?wi(8,s):n;case 8:return n=en(3584&~s),n===0&&(n=en(4186112&~s),n===0&&(n=512)),n;case 2:return s=en(805306368&~s),s===0&&(s=268435456),s}throw Error(r(358,n))}function en(n){return n&-n}function Jn(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Ei(n,s,a){n.pendingLanes|=s;var d=s-1;n.suspendedLanes&=d,n.pingedLanes&=d,n=n.eventTimes,s=31-tn(s),n[s]=a}var tn=Math.clz32?Math.clz32:Kl,Je=Math.log,Gl=Math.LN2;function Kl(n){return n===0?32:31-(Je(n)/Gl|0)|0}var iu=t.unstable_UserBlockingPriority,su=t.unstable_runWithPriority,Ti=!0;function vs(n,s,a,d){Kn||Gn();var p=Gt,S=Kn;Kn=!0;try{Tr(p,n,s,a,d)}finally{(Kn=S)||yo()}}function ou(n,s,a,d){su(iu,Gt.bind(null,n,s,a,d))}function Gt(n,s,a,d){if(Ti){var p;if((p=(s&4)===0)&&0<zt.length&&-1<Co.indexOf(n))n=Ao(null,n,s,a,d),zt.push(n);else{var S=ys(n,s,a,d);if(S===null)p&&Nn(n,d);else{if(p){if(-1<Co.indexOf(n)){n=Ao(S,n,s,a,d),zt.push(n);return}if(fs(S,n,s,a,d))return;Nn(n,d)}nh(n,s,d,null,a)}}}}function ys(n,s,a,d){var p=hn(d);if(p=Pi(p),p!==null){var S=Xn(p);if(S===null)p=null;else{var P=S.tag;if(P===13){if(p=mi(S),p!==null)return p;p=null}else if(P===3){if(S.stateNode.hydrate)return S.tag===3?S.stateNode.containerInfo:null;p=null}else S!==p&&(p=null)}}return nh(n,s,d,p,a),null}var Vn=null,Zn=null,Si=null;function ws(){if(Si)return Si;var n,s=Zn,a=s.length,d,p="value"in Vn?Vn.value:Vn.textContent,S=p.length;for(n=0;n<a&&s[n]===p[n];n++);var P=a-n;for(d=1;d<=P&&s[a-d]===p[S-d];d++);return Si=p.slice(n,1<d?1-d:void 0)}function er(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ii(){return!0}function ki(){return!1}function Ot(n){function s(a,d,p,S,P){this._reactName=a,this._targetInst=p,this.type=d,this.nativeEvent=S,this.target=P,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(a=n[M],this[M]=a?a(S):S[M]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ii:ki,this.isPropagationStopped=ki,this}return e(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),s}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nr=Ot(tr),br=e({},tr,{view:0,detail:0}),au=Ot(br),Ci,Ai,Pr,rr=e({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Pr&&(Pr&&n.type==="mousemove"?(Ci=n.screenX-Pr.screenX,Ai=n.screenY-Pr.screenY):Ai=Ci=0,Pr=n),Ci)},movementY:function(n){return"movementY"in n?n.movementY:Ai}}),No=Ot(rr),uu=e({},rr,{dataTransfer:0}),ir=Ot(uu),lu=e({},br,{relatedTarget:0}),Es=Ot(lu),cu=e({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),du=Ot(cu),Ts=e({},tr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Lt=Ot(Ts),fu=e({},tr,{data:0}),Mo=Ot(fu),Rr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=m[n])?!!s[n]:!1}function N(){return w}var G=e({},br,{key:function(n){if(n.key){var s=Rr[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=er(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?u[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N,charCode:function(n){return n.type==="keypress"?er(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?er(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Z=Ot(G),fe=e({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),He=Ot(fe),lt=e({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N}),ze=Ot(lt),gt=e({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),_t=Ot(gt),Dr=e({},rr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Kt=Ot(Dr),Ss=[9,13,27,32],bi=g&&"CompositionEvent"in window,Vo=null;g&&"documentMode"in document&&(Vo=document.documentMode);var jv=g&&"TextEvent"in window&&!Vo,Mf=g&&(!bi||Vo&&8<Vo&&11>=Vo),Vf=" ",Of=!1;function Lf(n,s){switch(n){case"keyup":return Ss.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Is=!1;function zv(n,s){switch(n){case"compositionend":return xf(s);case"keypress":return s.which!==32?null:(Of=!0,Vf);case"textInput":return n=s.data,n===Vf&&Of?null:n;default:return null}}function Bv(n,s){if(Is)return n==="compositionend"||!bi&&Lf(n,s)?(n=ws(),Si=Zn=Vn=null,Is=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Mf&&s.locale!=="ko"?null:s.data;default:return null}}var Uv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ff(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Uv[n.type]:s==="textarea"}function jf(n,s,a,d){vo(d),s=pu(s,"onChange"),0<s.length&&(a=new nr("onChange","change",null,a,d),n.push({event:a,listeners:s}))}var Oo=null,Lo=null;function $v(n){Yf(n,0)}function hu(n){var s=Ps(n);if(bn(s))return n}function qv(n,s){if(n==="change")return s}var zf=!1;if(g){var Ql;if(g){var Xl="oninput"in document;if(!Xl){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),Xl=typeof Bf.oninput=="function"}Ql=Xl}else Ql=!1;zf=Ql&&(!document.documentMode||9<document.documentMode)}function Uf(){Oo&&(Oo.detachEvent("onpropertychange",$f),Lo=Oo=null)}function $f(n){if(n.propertyName==="value"&&hu(Lo)){var s=[];if(jf(s,Lo,n,hn(n)),n=$v,Kn)n(s);else{Kn=!0;try{as(n,s)}finally{Kn=!1,yo()}}}}function Hv(n,s,a){n==="focusin"?(Uf(),Oo=s,Lo=a,Oo.attachEvent("onpropertychange",$f)):n==="focusout"&&Uf()}function Wv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hu(Lo)}function Gv(n,s){if(n==="click")return hu(s)}function Kv(n,s){if(n==="input"||n==="change")return hu(s)}function Qv(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var nn=typeof Object.is=="function"?Object.is:Qv,Xv=Object.prototype.hasOwnProperty;function xo(n,s){if(nn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++)if(!Xv.call(s,a[d])||!nn(n[a[d]],s[a[d]]))return!1;return!0}function qf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hf(n,s){var a=qf(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=s&&d>=s)return{node:a,offset:s-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=qf(a)}}function Wf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Wf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Gf(){for(var n=window,s=fn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=fn(n.document)}return s}function Yl(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Yv=g&&"documentMode"in document&&11>=document.documentMode,ks=null,Jl=null,Fo=null,Zl=!1;function Kf(n,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Zl||ks==null||ks!==fn(d)||(d=ks,"selectionStart"in d&&Yl(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Fo&&xo(Fo,d)||(Fo=d,d=pu(Jl,"onSelect"),0<d.length&&(s=new nr("onSelect","select",null,s,a),n.push({event:s,listeners:d}),s.target=ks)))}Do("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Do("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Do(Ar,2);for(var Qf="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ec=0;ec<Qf.length;ec++)_s.set(Qf[ec],0);h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jv=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function Xf(n,s,a){var d=n.type||"unknown-event";n.currentTarget=a,tu(d,s,void 0,n),n.currentTarget=null}function Yf(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],p=d.event;d=d.listeners;e:{var S=void 0;if(s)for(var P=d.length-1;0<=P;P--){var M=d[P],z=M.instance,J=M.currentTarget;if(M=M.listener,z!==S&&p.isPropagationStopped())break e;Xf(p,M,J),S=z}else for(P=0;P<d.length;P++){if(M=d[P],z=M.instance,J=M.currentTarget,M=M.listener,z!==S&&p.isPropagationStopped())break e;Xf(p,M,J),S=z}}}if(hi)throw n=pi,hi=!1,pi=null,n}function Xe(n,s){var a=uh(s),d=n+"__bubble";a.has(d)||(th(s,n,2,!1),a.add(d))}var Jf="_reactListening"+Math.random().toString(36).slice(2);function Zf(n){n[Jf]||(n[Jf]=!0,o.forEach(function(s){Jv.has(s)||eh(s,!1,n,null),eh(s,!0,n,null)}))}function eh(n,s,a,d){var p=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,S=a;n==="selectionchange"&&a.nodeType!==9&&(S=a.ownerDocument);var P=uh(S),M=n+"__"+(s?"capture":"bubble");P.has(M)||(s&&(p|=4),th(S,n,p,s),P.add(M))}function th(n,s,a,d){var p=_s.get(s);switch(p===void 0?2:p){case 0:p=vs;break;case 1:p=ou;break;default:p=Gt}a=p.bind(null,s,a,n),p=void 0,!us||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),d?p!==void 0?n.addEventListener(s,a,{capture:!0,passive:p}):n.addEventListener(s,a,!0):p!==void 0?n.addEventListener(s,a,{passive:p}):n.addEventListener(s,a,!1)}function nh(n,s,a,d,p){var S=d;if(!(s&1)&&!(s&2)&&d!==null)e:for(;;){if(d===null)return;var P=d.tag;if(P===3||P===4){var M=d.stateNode.containerInfo;if(M===p||M.nodeType===8&&M.parentNode===p)break;if(P===4)for(P=d.return;P!==null;){var z=P.tag;if((z===3||z===4)&&(z=P.stateNode.containerInfo,z===p||z.nodeType===8&&z.parentNode===p))return;P=P.return}for(;M!==null;){if(P=Pi(M),P===null)return;if(z=P.tag,z===5||z===6){d=S=P;continue e}M=M.parentNode}}d=d.return}$l(function(){var J=S,me=hn(a),be=[];e:{var ue=Ro.get(n);if(ue!==void 0){var Ee=nr,Ae=n;switch(n){case"keypress":if(er(a)===0)break e;case"keydown":case"keyup":Ee=Z;break;case"focusin":Ae="focus",Ee=Es;break;case"focusout":Ae="blur",Ee=Es;break;case"beforeblur":case"afterblur":Ee=Es;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=No;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=ir;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=ze;break;case ru:case Cr:case vn:Ee=du;break;case Po:Ee=_t;break;case"scroll":Ee=au;break;case"wheel":Ee=Kt;break;case"copy":case"cut":case"paste":Ee=Lt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=He}var Ie=(s&4)!==0,K=!Ie&&n==="scroll",B=Ie?ue!==null?ue+"Capture":null:ue;Ie=[];for(var q=J,re;q!==null;){re=q;var oe=re.stateNode;if(re.tag===5&&oe!==null&&(re=oe,B!==null&&(oe=Rn(q,B),oe!=null&&Ie.push(zo(q,oe,re)))),K)break;q=q.return}0<Ie.length&&(ue=new Ee(ue,Ae,null,a,me),be.push({event:ue,listeners:Ie}))}}if(!(s&7)){e:{if(ue=n==="mouseover"||n==="pointerover",Ee=n==="mouseout"||n==="pointerout",ue&&!(s&16)&&(Ae=a.relatedTarget||a.fromElement)&&(Pi(Ae)||Ae[bs]))break e;if((Ee||ue)&&(ue=me.window===me?me:(ue=me.ownerDocument)?ue.defaultView||ue.parentWindow:window,Ee?(Ae=a.relatedTarget||a.toElement,Ee=J,Ae=Ae?Pi(Ae):null,Ae!==null&&(K=Xn(Ae),Ae!==K||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Ee=null,Ae=J),Ee!==Ae)){if(Ie=No,oe="onMouseLeave",B="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(Ie=He,oe="onPointerLeave",B="onPointerEnter",q="pointer"),K=Ee==null?ue:Ps(Ee),re=Ae==null?ue:Ps(Ae),ue=new Ie(oe,q+"leave",Ee,a,me),ue.target=K,ue.relatedTarget=re,oe=null,Pi(me)===J&&(Ie=new Ie(B,q+"enter",Ae,a,me),Ie.target=re,Ie.relatedTarget=K,oe=Ie),K=oe,Ee&&Ae)t:{for(Ie=Ee,B=Ae,q=0,re=Ie;re;re=Cs(re))q++;for(re=0,oe=B;oe;oe=Cs(oe))re++;for(;0<q-re;)Ie=Cs(Ie),q--;for(;0<re-q;)B=Cs(B),re--;for(;q--;){if(Ie===B||B!==null&&Ie===B.alternate)break t;Ie=Cs(Ie),B=Cs(B)}Ie=null}else Ie=null;Ee!==null&&rh(be,ue,Ee,Ie,!1),Ae!==null&&K!==null&&rh(be,K,Ae,Ie,!0)}}e:{if(ue=J?Ps(J):window,Ee=ue.nodeName&&ue.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&ue.type==="file")var Re=qv;else if(Ff(ue))if(zf)Re=Kv;else{Re=Wv;var we=Hv}else(Ee=ue.nodeName)&&Ee.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(Re=Gv);if(Re&&(Re=Re(n,J))){jf(be,Re,a,me);break e}we&&we(n,ue,J),n==="focusout"&&(we=ue._wrapperState)&&we.controlled&&ue.type==="number"&&ii(ue,"number",ue.value)}switch(we=J?Ps(J):window,n){case"focusin":(Ff(we)||we.contentEditable==="true")&&(ks=we,Jl=J,Fo=null);break;case"focusout":Fo=Jl=ks=null;break;case"mousedown":Zl=!0;break;case"contextmenu":case"mouseup":case"dragend":Zl=!1,Kf(be,a,me);break;case"selectionchange":if(Yv)break;case"keydown":case"keyup":Kf(be,a,me)}var De;if(bi)e:{switch(n){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Is?Lf(n,a)&&(Oe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Oe="onCompositionStart");Oe&&(Mf&&a.locale!=="ko"&&(Is||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Is&&(De=ws()):(Vn=me,Zn="value"in Vn?Vn.value:Vn.textContent,Is=!0)),we=pu(J,Oe),0<we.length&&(Oe=new Mo(Oe,n,null,a,me),be.push({event:Oe,listeners:we}),De?Oe.data=De:(De=xf(a),De!==null&&(Oe.data=De)))),(De=jv?zv(n,a):Bv(n,a))&&(J=pu(J,"onBeforeInput"),0<J.length&&(me=new Mo("onBeforeInput","beforeinput",null,a,me),be.push({event:me,listeners:J}),me.data=De))}Yf(be,s)})}function zo(n,s,a){return{instance:n,listener:s,currentTarget:a}}function pu(n,s){for(var a=s+"Capture",d=[];n!==null;){var p=n,S=p.stateNode;p.tag===5&&S!==null&&(p=S,S=Rn(n,a),S!=null&&d.unshift(zo(n,S,p)),S=Rn(n,s),S!=null&&d.push(zo(n,S,p))),n=n.return}return d}function Cs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function rh(n,s,a,d,p){for(var S=s._reactName,P=[];a!==null&&a!==d;){var M=a,z=M.alternate,J=M.stateNode;if(z!==null&&z===d)break;M.tag===5&&J!==null&&(M=J,p?(z=Rn(a,S),z!=null&&P.unshift(zo(a,z,M))):p||(z=Rn(a,S),z!=null&&P.push(zo(a,z,M)))),a=a.return}P.length!==0&&n.push({event:s,listeners:P})}function mu(){}var tc=null,nc=null;function ih(n,s){switch(n){case"button":case"input":case"select":case"textarea":return!!s.autoFocus}return!1}function rc(n,s){return n==="textarea"||n==="option"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var sh=typeof setTimeout=="function"?setTimeout:void 0,Zv=typeof clearTimeout=="function"?clearTimeout:void 0;function ic(n){n.nodeType===1?n.textContent="":n.nodeType===9&&(n=n.body,n!=null&&(n.textContent=""))}function As(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break}return n}function oh(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var sc=0;function ey(n){return{$$typeof:te,toString:n,valueOf:n}}var gu=Math.random().toString(36).slice(2),Nr="__reactFiber$"+gu,_u="__reactProps$"+gu,bs="__reactContainer$"+gu,ah="__reactEvents$"+gu;function Pi(n){var s=n[Nr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[bs]||a[Nr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=oh(n);n!==null;){if(a=n[Nr])return a;n=oh(n)}return s}n=a,a=n.parentNode}return null}function Bo(n){return n=n[Nr]||n[bs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ps(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function vu(n){return n[_u]||null}function uh(n){var s=n[ah];return s===void 0&&(s=n[ah]=new Set),s}var oc=[],Rs=-1;function Mr(n){return{current:n}}function Ye(n){0>Rs||(n.current=oc[Rs],oc[Rs]=null,Rs--)}function nt(n,s){Rs++,oc[Rs]=n.current,n.current=s}var Vr={},kt=Mr(Vr),Bt=Mr(!1),Ri=Vr;function Ds(n,s){var a=n.type.contextTypes;if(!a)return Vr;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var p={},S;for(S in a)p[S]=s[S];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=p),p}function Ut(n){return n=n.childContextTypes,n!=null}function yu(){Ye(Bt),Ye(kt)}function lh(n,s,a){if(kt.current!==Vr)throw Error(r(168));nt(kt,s),nt(Bt,a)}function ch(n,s,a){var d=n.stateNode;if(n=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var p in d)if(!(p in n))throw Error(r(108,ve(s)||"Unknown",p));return e({},a,d)}function wu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Vr,Ri=kt.current,nt(kt,n),nt(Bt,Bt.current),!0}function dh(n,s,a){var d=n.stateNode;if(!d)throw Error(r(169));a?(n=ch(n,s,Ri),d.__reactInternalMemoizedMergedChildContext=n,Ye(Bt),Ye(kt),nt(kt,n)):Ye(Bt),nt(Bt,a)}var ac=null,Di=null,ty=t.unstable_runWithPriority,uc=t.unstable_scheduleCallback,lc=t.unstable_cancelCallback,ny=t.unstable_shouldYield,fh=t.unstable_requestPaint,cc=t.unstable_now,ry=t.unstable_getCurrentPriorityLevel,Eu=t.unstable_ImmediatePriority,hh=t.unstable_UserBlockingPriority,ph=t.unstable_NormalPriority,mh=t.unstable_LowPriority,gh=t.unstable_IdlePriority,dc={},iy=fh!==void 0?fh:function(){},sr=null,Tu=null,fc=!1,_h=cc(),Ct=1e4>_h?cc:function(){return cc()-_h};function Ns(){switch(ry()){case Eu:return 99;case hh:return 98;case ph:return 97;case mh:return 96;case gh:return 95;default:throw Error(r(332))}}function vh(n){switch(n){case 99:return Eu;case 98:return hh;case 97:return ph;case 96:return mh;case 95:return gh;default:throw Error(r(332))}}function Ni(n,s){return n=vh(n),ty(n,s)}function Uo(n,s,a){return n=vh(n),uc(n,s,a)}function On(){if(Tu!==null){var n=Tu;Tu=null,lc(n)}yh()}function yh(){if(!fc&&sr!==null){fc=!0;var n=0;try{var s=sr;Ni(99,function(){for(;n<s.length;n++){var a=s[n];do a=a(!0);while(a!==null)}}),sr=null}catch(a){throw sr!==null&&(sr=sr.slice(n+1)),uc(Eu,On),a}finally{fc=!1}}}var sy=y.ReactCurrentBatchConfig;function yn(n,s){if(n&&n.defaultProps){s=e({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}var Su=Mr(null),Iu=null,Ms=null,ku=null;function hc(){ku=Ms=Iu=null}function pc(n){var s=Su.current;Ye(Su),n.type._context._currentValue=s}function wh(n,s){for(;n!==null;){var a=n.alternate;if((n.childLanes&s)===s){if(a===null||(a.childLanes&s)===s)break;a.childLanes|=s}else n.childLanes|=s,a!==null&&(a.childLanes|=s);n=n.return}}function Vs(n,s){Iu=n,ku=Ms=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(wn=!0),n.firstContext=null)}function rn(n,s){if(ku!==n&&s!==!1&&s!==0)if((typeof s!="number"||s===1073741823)&&(ku=n,s=1073741823),s={context:n,observedBits:s,next:null},Ms===null){if(Iu===null)throw Error(r(308));Ms=s,Iu.dependencies={lanes:0,firstContext:s,responders:null}}else Ms=Ms.next=s;return n._currentValue}var Or=!1;function mc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Eh(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Lr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function xr(n,s){if(n=n.updateQueue,n!==null){n=n.shared;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}}function Th(n,s){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var p=null,S=null;if(a=a.firstBaseUpdate,a!==null){do{var P={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};S===null?p=S=P:S=S.next=P,a=a.next}while(a!==null);S===null?p=S=s:S=S.next=s}else p=S=s;a={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:S,shared:d.shared,effects:d.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function $o(n,s,a,d){var p=n.updateQueue;Or=!1;var S=p.firstBaseUpdate,P=p.lastBaseUpdate,M=p.shared.pending;if(M!==null){p.shared.pending=null;var z=M,J=z.next;z.next=null,P===null?S=J:P.next=J,P=z;var me=n.alternate;if(me!==null){me=me.updateQueue;var be=me.lastBaseUpdate;be!==P&&(be===null?me.firstBaseUpdate=J:be.next=J,me.lastBaseUpdate=z)}}if(S!==null){be=p.baseState,P=0,me=J=z=null;do{M=S.lane;var ue=S.eventTime;if((d&M)===M){me!==null&&(me=me.next={eventTime:ue,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var Ee=n,Ae=S;switch(M=s,ue=a,Ae.tag){case 1:if(Ee=Ae.payload,typeof Ee=="function"){be=Ee.call(ue,be,M);break e}be=Ee;break e;case 3:Ee.flags=Ee.flags&-4097|64;case 0:if(Ee=Ae.payload,M=typeof Ee=="function"?Ee.call(ue,be,M):Ee,M==null)break e;be=e({},be,M);break e;case 2:Or=!0}}S.callback!==null&&(n.flags|=32,M=p.effects,M===null?p.effects=[S]:M.push(S))}else ue={eventTime:ue,lane:M,tag:S.tag,payload:S.payload,callback:S.callback,next:null},me===null?(J=me=ue,z=be):me=me.next=ue,P|=M;if(S=S.next,S===null){if(M=p.shared.pending,M===null)break;S=M.next,M.next=null,p.lastBaseUpdate=M,p.shared.pending=null}}while(!0);me===null&&(z=be),p.baseState=z,p.firstBaseUpdate=J,p.lastBaseUpdate=me,ta|=P,n.lanes=P,n.memoizedState=be}}function Sh(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var d=n[s],p=d.callback;if(p!==null){if(d.callback=null,d=a,typeof p!="function")throw Error(r(191,p));p.call(d)}}}var Ih=new i.Component().refs;function Cu(n,s,a,d){s=n.memoizedState,a=a(d,s),a=a==null?s:e({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Au={isMounted:function(n){return(n=n._reactInternals)?Xn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var d=Qt(),p=zr(n),S=Lr(d,p);S.payload=s,a!=null&&(S.callback=a),xr(n,S),Br(n,p,d)},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var d=Qt(),p=zr(n),S=Lr(d,p);S.tag=1,S.payload=s,a!=null&&(S.callback=a),xr(n,S),Br(n,p,d)},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Qt(),d=zr(n),p=Lr(a,d);p.tag=2,s!=null&&(p.callback=s),xr(n,p),Br(n,d,a)}};function kh(n,s,a,d,p,S,P){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,S,P):s.prototype&&s.prototype.isPureReactComponent?!xo(a,d)||!xo(p,S):!0}function Ch(n,s,a){var d=!1,p=Vr,S=s.contextType;return typeof S=="object"&&S!==null?S=rn(S):(p=Ut(s)?Ri:kt.current,d=s.contextTypes,S=(d=d!=null)?Ds(n,p):Vr),s=new s(a,S),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Au,n.stateNode=s,s._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=S),s}function Ah(n,s,a,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==n&&Au.enqueueReplaceState(s,s.state,null)}function gc(n,s,a,d){var p=n.stateNode;p.props=a,p.state=n.memoizedState,p.refs=Ih,mc(n);var S=s.contextType;typeof S=="object"&&S!==null?p.context=rn(S):(S=Ut(s)?Ri:kt.current,p.context=Ds(n,S)),$o(n,a,p,d),p.state=n.memoizedState,S=s.getDerivedStateFromProps,typeof S=="function"&&(Cu(n,s,S,a),p.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&Au.enqueueReplaceState(p,p.state,null),$o(n,a,p,d),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4)}var bu=Array.isArray;function qo(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var d=a.stateNode}if(!d)throw Error(r(147,n));var p=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(S){var P=d.refs;P===Ih&&(P=d.refs={}),S===null?delete P[p]:P[p]=S},s._stringRef=p,s)}if(typeof n!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,n))}return n}function Pu(n,s){if(n.type!=="textarea")throw Error(r(31,Object.prototype.toString.call(s)==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":s))}function bh(n){function s(K,B){if(n){var q=K.lastEffect;q!==null?(q.nextEffect=B,K.lastEffect=B):K.firstEffect=K.lastEffect=B,B.nextEffect=null,B.flags=8}}function a(K,B){if(!n)return null;for(;B!==null;)s(K,B),B=B.sibling;return null}function d(K,B){for(K=new Map;B!==null;)B.key!==null?K.set(B.key,B):K.set(B.index,B),B=B.sibling;return K}function p(K,B){return K=qr(K,B),K.index=0,K.sibling=null,K}function S(K,B,q){return K.index=q,n?(q=K.alternate,q!==null?(q=q.index,q<B?(K.flags=2,B):q):(K.flags=2,B)):B}function P(K){return n&&K.alternate===null&&(K.flags=2),K}function M(K,B,q,re){return B===null||B.tag!==6?(B=Jc(q,K.mode,re),B.return=K,B):(B=p(B,q),B.return=K,B)}function z(K,B,q,re){return B!==null&&B.elementType===q.type?(re=p(B,q.props),re.ref=qo(K,B,q),re.return=K,re):(re=Gu(q.type,q.key,q.props,null,K.mode,re),re.ref=qo(K,B,q),re.return=K,re)}function J(K,B,q,re){return B===null||B.tag!==4||B.stateNode.containerInfo!==q.containerInfo||B.stateNode.implementation!==q.implementation?(B=Zc(q,K.mode,re),B.return=K,B):(B=p(B,q.children||[]),B.return=K,B)}function me(K,B,q,re,oe){return B===null||B.tag!==7?(B=Us(q,K.mode,re,oe),B.return=K,B):(B=p(B,q),B.return=K,B)}function be(K,B,q){if(typeof B=="string"||typeof B=="number")return B=Jc(""+B,K.mode,q),B.return=K,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case _:return q=Gu(B.type,B.key,B.props,null,K.mode,q),q.ref=qo(K,null,B),q.return=K,q;case E:return B=Zc(B,K.mode,q),B.return=K,B}if(bu(B)||pe(B))return B=Us(B,K.mode,q,null),B.return=K,B;Pu(K,B)}return null}function ue(K,B,q,re){var oe=B!==null?B.key:null;if(typeof q=="string"||typeof q=="number")return oe!==null?null:M(K,B,""+q,re);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case _:return q.key===oe?q.type===T?me(K,B,q.props.children,re,oe):z(K,B,q,re):null;case E:return q.key===oe?J(K,B,q,re):null}if(bu(q)||pe(q))return oe!==null?null:me(K,B,q,re,null);Pu(K,q)}return null}function Ee(K,B,q,re,oe){if(typeof re=="string"||typeof re=="number")return K=K.get(q)||null,M(B,K,""+re,oe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case _:return K=K.get(re.key===null?q:re.key)||null,re.type===T?me(B,K,re.props.children,oe,re.key):z(B,K,re,oe);case E:return K=K.get(re.key===null?q:re.key)||null,J(B,K,re,oe)}if(bu(re)||pe(re))return K=K.get(q)||null,me(B,K,re,oe,null);Pu(B,re)}return null}function Ae(K,B,q,re){for(var oe=null,Re=null,we=B,De=B=0,Oe=null;we!==null&&De<q.length;De++){we.index>De?(Oe=we,we=null):Oe=we.sibling;var Ve=ue(K,we,q[De],re);if(Ve===null){we===null&&(we=Oe);break}n&&we&&Ve.alternate===null&&s(K,we),B=S(Ve,B,De),Re===null?oe=Ve:Re.sibling=Ve,Re=Ve,we=Oe}if(De===q.length)return a(K,we),oe;if(we===null){for(;De<q.length;De++)we=be(K,q[De],re),we!==null&&(B=S(we,B,De),Re===null?oe=we:Re.sibling=we,Re=we);return oe}for(we=d(K,we);De<q.length;De++)Oe=Ee(we,K,De,q[De],re),Oe!==null&&(n&&Oe.alternate!==null&&we.delete(Oe.key===null?De:Oe.key),B=S(Oe,B,De),Re===null?oe=Oe:Re.sibling=Oe,Re=Oe);return n&&we.forEach(function(Hr){return s(K,Hr)}),oe}function Ie(K,B,q,re){var oe=pe(q);if(typeof oe!="function")throw Error(r(150));if(q=oe.call(q),q==null)throw Error(r(151));for(var Re=oe=null,we=B,De=B=0,Oe=null,Ve=q.next();we!==null&&!Ve.done;De++,Ve=q.next()){we.index>De?(Oe=we,we=null):Oe=we.sibling;var Hr=ue(K,we,Ve.value,re);if(Hr===null){we===null&&(we=Oe);break}n&&we&&Hr.alternate===null&&s(K,we),B=S(Hr,B,De),Re===null?oe=Hr:Re.sibling=Hr,Re=Hr,we=Oe}if(Ve.done)return a(K,we),oe;if(we===null){for(;!Ve.done;De++,Ve=q.next())Ve=be(K,Ve.value,re),Ve!==null&&(B=S(Ve,B,De),Re===null?oe=Ve:Re.sibling=Ve,Re=Ve);return oe}for(we=d(K,we);!Ve.done;De++,Ve=q.next())Ve=Ee(we,K,De,Ve.value,re),Ve!==null&&(n&&Ve.alternate!==null&&we.delete(Ve.key===null?De:Ve.key),B=S(Ve,B,De),Re===null?oe=Ve:Re.sibling=Ve,Re=Ve);return n&&we.forEach(function(Ly){return s(K,Ly)}),oe}return function(K,B,q,re){var oe=typeof q=="object"&&q!==null&&q.type===T&&q.key===null;oe&&(q=q.props.children);var Re=typeof q=="object"&&q!==null;if(Re)switch(q.$$typeof){case _:e:{for(Re=q.key,oe=B;oe!==null;){if(oe.key===Re){switch(oe.tag){case 7:if(q.type===T){a(K,oe.sibling),B=p(oe,q.props.children),B.return=K,K=B;break e}break;default:if(oe.elementType===q.type){a(K,oe.sibling),B=p(oe,q.props),B.ref=qo(K,oe,q),B.return=K,K=B;break e}}a(K,oe);break}else s(K,oe);oe=oe.sibling}q.type===T?(B=Us(q.props.children,K.mode,re,q.key),B.return=K,K=B):(re=Gu(q.type,q.key,q.props,null,K.mode,re),re.ref=qo(K,B,q),re.return=K,K=re)}return P(K);case E:e:{for(oe=q.key;B!==null;){if(B.key===oe)if(B.tag===4&&B.stateNode.containerInfo===q.containerInfo&&B.stateNode.implementation===q.implementation){a(K,B.sibling),B=p(B,q.children||[]),B.return=K,K=B;break e}else{a(K,B);break}else s(K,B);B=B.sibling}B=Zc(q,K.mode,re),B.return=K,K=B}return P(K)}if(typeof q=="string"||typeof q=="number")return q=""+q,B!==null&&B.tag===6?(a(K,B.sibling),B=p(B,q),B.return=K,K=B):(a(K,B),B=Jc(q,K.mode,re),B.return=K,K=B),P(K);if(bu(q))return Ae(K,B,q,re);if(pe(q))return Ie(K,B,q,re);if(Re&&Pu(K,q),typeof q>"u"&&!oe)switch(K.tag){case 1:case 22:case 0:case 11:case 15:throw Error(r(152,ve(K.type)||"Component"))}return a(K,B)}}var Ru=bh(!0),Ph=bh(!1),Ho={},Ln=Mr(Ho),Wo=Mr(Ho),Go=Mr(Ho);function Mi(n){if(n===Ho)throw Error(r(174));return n}function _c(n,s){switch(nt(Go,s),nt(Wo,n),nt(Ln,Ho),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:is(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=is(s,n)}Ye(Ln),nt(Ln,s)}function Os(){Ye(Ln),Ye(Wo),Ye(Go)}function Rh(n){Mi(Go.current);var s=Mi(Ln.current),a=is(s,n.type);s!==a&&(nt(Wo,n),nt(Ln,a))}function vc(n){Wo.current===n&&(Ye(Ln),Ye(Wo))}var rt=Mr(0);function Du(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&64)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var or=null,Fr=null,xn=!1;function Dh(n,s){var a=an(5,null,null,0);a.elementType="DELETED",a.type="DELETED",a.stateNode=s,a.return=n,a.flags=8,n.lastEffect!==null?(n.lastEffect.nextEffect=a,n.lastEffect=a):n.firstEffect=n.lastEffect=a}function Nh(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,!0):!1;case 13:return!1;default:return!1}}function yc(n){if(xn){var s=Fr;if(s){var a=s;if(!Nh(n,s)){if(s=As(a.nextSibling),!s||!Nh(n,s)){n.flags=n.flags&-1025|2,xn=!1,or=n;return}Dh(or,a)}or=n,Fr=As(s.firstChild)}else n.flags=n.flags&-1025|2,xn=!1,or=n}}function Mh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;or=n}function Nu(n){if(n!==or)return!1;if(!xn)return Mh(n),xn=!0,!1;var s=n.type;if(n.tag!==5||s!=="head"&&s!=="body"&&!rc(s,n.memoizedProps))for(s=Fr;s;)Dh(n,s),s=As(s.nextSibling);if(Mh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Fr=As(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Fr=null}}else Fr=or?As(n.stateNode.nextSibling):null;return!0}function wc(){Fr=or=null,xn=!1}var Ls=[];function Ec(){for(var n=0;n<Ls.length;n++)Ls[n]._workInProgressVersionPrimary=null;Ls.length=0}var Ko=y.ReactCurrentDispatcher,sn=y.ReactCurrentBatchConfig,Qo=0,it=null,At=null,yt=null,Mu=!1,Xo=!1;function $t(){throw Error(r(321))}function Tc(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!nn(n[a],s[a]))return!1;return!0}function Sc(n,s,a,d,p,S){if(Qo=S,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ko.current=n===null||n.memoizedState===null?ay:uy,n=a(d,p),Xo){S=0;do{if(Xo=!1,!(25>S))throw Error(r(301));S+=1,yt=At=null,s.updateQueue=null,Ko.current=ly,n=a(d,p)}while(Xo)}if(Ko.current=xu,s=At!==null&&At.next!==null,Qo=0,yt=At=it=null,Mu=!1,s)throw Error(r(300));return n}function Vi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?it.memoizedState=yt=n:yt=yt.next=n,yt}function Oi(){if(At===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var s=yt===null?it.memoizedState:yt.next;if(s!==null)yt=s,At=n;else{if(n===null)throw Error(r(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},yt===null?it.memoizedState=yt=n:yt=yt.next=n}return yt}function Fn(n,s){return typeof s=="function"?s(n):s}function Yo(n){var s=Oi(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var d=At,p=d.baseQueue,S=a.pending;if(S!==null){if(p!==null){var P=p.next;p.next=S.next,S.next=P}d.baseQueue=p=S,a.pending=null}if(p!==null){p=p.next,d=d.baseState;var M=P=S=null,z=p;do{var J=z.lane;if((Qo&J)===J)M!==null&&(M=M.next={lane:0,action:z.action,eagerReducer:z.eagerReducer,eagerState:z.eagerState,next:null}),d=z.eagerReducer===n?z.eagerState:n(d,z.action);else{var me={lane:J,action:z.action,eagerReducer:z.eagerReducer,eagerState:z.eagerState,next:null};M===null?(P=M=me,S=d):M=M.next=me,it.lanes|=J,ta|=J}z=z.next}while(z!==null&&z!==p);M===null?S=d:M.next=P,nn(d,s.memoizedState)||(wn=!0),s.memoizedState=d,s.baseState=S,s.baseQueue=M,a.lastRenderedState=d}return[s.memoizedState,a.dispatch]}function Jo(n){var s=Oi(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var d=a.dispatch,p=a.pending,S=s.memoizedState;if(p!==null){a.pending=null;var P=p=p.next;do S=n(S,P.action),P=P.next;while(P!==p);nn(S,s.memoizedState)||(wn=!0),s.memoizedState=S,s.baseQueue===null&&(s.baseState=S),a.lastRenderedState=S}return[S,d]}function Vh(n,s,a){var d=s._getVersion;d=d(s._source);var p=s._workInProgressVersionPrimary;if(p!==null?n=p===d:(n=n.mutableReadLanes,(n=(Qo&n)===n)&&(s._workInProgressVersionPrimary=d,Ls.push(s))),n)return a(s._source);throw Ls.push(s),Error(r(350))}function Oh(n,s,a,d){var p=xt;if(p===null)throw Error(r(349));var S=s._getVersion,P=S(s._source),M=Ko.current,z=M.useState(function(){return Vh(p,s,a)}),J=z[1],me=z[0];z=yt;var be=n.memoizedState,ue=be.refs,Ee=ue.getSnapshot,Ae=be.source;be=be.subscribe;var Ie=it;return n.memoizedState={refs:ue,source:s,subscribe:d},M.useEffect(function(){ue.getSnapshot=a,ue.setSnapshot=J;var K=S(s._source);if(!nn(P,K)){K=a(s._source),nn(me,K)||(J(K),K=zr(Ie),p.mutableReadLanes|=K&p.pendingLanes),K=p.mutableReadLanes,p.entangledLanes|=K;for(var B=p.entanglements,q=K;0<q;){var re=31-tn(q),oe=1<<re;B[re]|=K,q&=~oe}}},[a,s,d]),M.useEffect(function(){return d(s._source,function(){var K=ue.getSnapshot,B=ue.setSnapshot;try{B(K(s._source));var q=zr(Ie);p.mutableReadLanes|=q&p.pendingLanes}catch(re){B(function(){throw re})}})},[s,d]),nn(Ee,a)&&nn(Ae,s)&&nn(be,d)||(n={pending:null,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:me},n.dispatch=J=Ac.bind(null,it,n),z.queue=n,z.baseQueue=null,me=Vh(p,s,a),z.memoizedState=z.baseState=me),me}function Lh(n,s,a){var d=Oi();return Oh(d,n,s,a)}function Zo(n){var s=Vi();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n=s.queue={pending:null,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:n},n=n.dispatch=Ac.bind(null,it,n),[s.memoizedState,n]}function Vu(n,s,a,d){return n={tag:n,create:s,destroy:a,deps:d,next:null},s=it.updateQueue,s===null?(s={lastEffect:null},it.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,s.lastEffect=n)),n}function xh(n){var s=Vi();return n={current:n},s.memoizedState=n}function Ou(){return Oi().memoizedState}function Ic(n,s,a,d){var p=Vi();it.flags|=n,p.memoizedState=Vu(1|s,a,void 0,d===void 0?null:d)}function kc(n,s,a,d){var p=Oi();d=d===void 0?null:d;var S=void 0;if(At!==null){var P=At.memoizedState;if(S=P.destroy,d!==null&&Tc(d,P.deps)){Vu(s,a,S,d);return}}it.flags|=n,p.memoizedState=Vu(1|s,a,S,d)}function Fh(n,s){return Ic(516,4,n,s)}function Lu(n,s){return kc(516,4,n,s)}function jh(n,s){return kc(4,2,n,s)}function zh(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Bh(n,s,a){return a=a!=null?a.concat([n]):null,kc(4,2,zh.bind(null,s,n),a)}function Cc(){}function Uh(n,s){var a=Oi();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Tc(s,d[1])?d[0]:(a.memoizedState=[n,s],n)}function $h(n,s){var a=Oi();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Tc(s,d[1])?d[0]:(n=n(),a.memoizedState=[n,s],n)}function oy(n,s){var a=Ns();Ni(98>a?98:a,function(){n(!0)}),Ni(97<a?97:a,function(){var d=sn.transition;sn.transition=1;try{n(!1),s()}finally{sn.transition=d}})}function Ac(n,s,a){var d=Qt(),p=zr(n),S={lane:p,action:a,eagerReducer:null,eagerState:null,next:null},P=s.pending;if(P===null?S.next=S:(S.next=P.next,P.next=S),s.pending=S,P=n.alternate,n===it||P!==null&&P===it)Xo=Mu=!0;else{if(n.lanes===0&&(P===null||P.lanes===0)&&(P=s.lastRenderedReducer,P!==null))try{var M=s.lastRenderedState,z=P(M,a);if(S.eagerReducer=P,S.eagerState=z,nn(z,M))return}catch{}finally{}Br(n,p,d)}}var xu={readContext:rn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useOpaqueIdentifier:$t,unstable_isNewReconciler:!1},ay={readContext:rn,useCallback:function(n,s){return Vi().memoizedState=[n,s===void 0?null:s],n},useContext:rn,useEffect:Fh,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Ic(4,2,zh.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Ic(4,2,n,s)},useMemo:function(n,s){var a=Vi();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var d=Vi();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,n=d.queue={pending:null,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},n=n.dispatch=Ac.bind(null,it,n),[d.memoizedState,n]},useRef:xh,useState:Zo,useDebugValue:Cc,useDeferredValue:function(n){var s=Zo(n),a=s[0],d=s[1];return Fh(function(){var p=sn.transition;sn.transition=1;try{d(n)}finally{sn.transition=p}},[n]),a},useTransition:function(){var n=Zo(!1),s=n[0];return n=oy.bind(null,n[1]),xh(n),[n,s]},useMutableSource:function(n,s,a){var d=Vi();return d.memoizedState={refs:{getSnapshot:s,setSnapshot:null},source:n,subscribe:a},Oh(d,n,s,a)},useOpaqueIdentifier:function(){if(xn){var n=!1,s=ey(function(){throw n||(n=!0,a("r:"+(sc++).toString(36))),Error(r(355))}),a=Zo(s)[1];return!(it.mode&2)&&(it.flags|=516,Vu(5,function(){a("r:"+(sc++).toString(36))},void 0,null)),s}return s="r:"+(sc++).toString(36),Zo(s),s},unstable_isNewReconciler:!1},uy={readContext:rn,useCallback:Uh,useContext:rn,useEffect:Lu,useImperativeHandle:Bh,useLayoutEffect:jh,useMemo:$h,useReducer:Yo,useRef:Ou,useState:function(){return Yo(Fn)},useDebugValue:Cc,useDeferredValue:function(n){var s=Yo(Fn),a=s[0],d=s[1];return Lu(function(){var p=sn.transition;sn.transition=1;try{d(n)}finally{sn.transition=p}},[n]),a},useTransition:function(){var n=Yo(Fn)[0];return[Ou().current,n]},useMutableSource:Lh,useOpaqueIdentifier:function(){return Yo(Fn)[0]},unstable_isNewReconciler:!1},ly={readContext:rn,useCallback:Uh,useContext:rn,useEffect:Lu,useImperativeHandle:Bh,useLayoutEffect:jh,useMemo:$h,useReducer:Jo,useRef:Ou,useState:function(){return Jo(Fn)},useDebugValue:Cc,useDeferredValue:function(n){var s=Jo(Fn),a=s[0],d=s[1];return Lu(function(){var p=sn.transition;sn.transition=1;try{d(n)}finally{sn.transition=p}},[n]),a},useTransition:function(){var n=Jo(Fn)[0];return[Ou().current,n]},useMutableSource:Lh,useOpaqueIdentifier:function(){return Jo(Fn)[0]},unstable_isNewReconciler:!1},cy=y.ReactCurrentOwner,wn=!1;function qt(n,s,a,d){s.child=n===null?Ph(s,null,a,d):Ru(s,n.child,a,d)}function qh(n,s,a,d,p){a=a.render;var S=s.ref;return Vs(s,p),d=Sc(n,s,a,d,S,p),n!==null&&!wn?(s.updateQueue=n.updateQueue,s.flags&=-517,n.lanes&=~p,ar(n,s,p)):(s.flags|=1,qt(n,s,d,p),s.child)}function Hh(n,s,a,d,p,S){if(n===null){var P=a.type;return typeof P=="function"&&!Xc(P)&&P.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=P,Wh(n,s,P,d,p,S)):(n=Gu(a.type,null,d,s,s.mode,S),n.ref=s.ref,n.return=s,s.child=n)}return P=n.child,!(p&S)&&(p=P.memoizedProps,a=a.compare,a=a!==null?a:xo,a(p,d)&&n.ref===s.ref)?ar(n,s,S):(s.flags|=1,n=qr(P,d),n.ref=s.ref,n.return=s,s.child=n)}function Wh(n,s,a,d,p,S){if(n!==null&&xo(n.memoizedProps,d)&&n.ref===s.ref)if(wn=!1,(S&p)!==0)n.flags&16384&&(wn=!0);else return s.lanes=n.lanes,ar(n,s,S);return Pc(n,s,a,d,S)}function bc(n,s,a){var d=s.pendingProps,p=d.children,S=n!==null?n.memoizedState:null;if(d.mode==="hidden"||d.mode==="unstable-defer-without-hiding")if(!(s.mode&4))s.memoizedState={baseLanes:0},Wu(s,a);else if(a&1073741824)s.memoizedState={baseLanes:0},Wu(s,S!==null?S.baseLanes:a);else return n=S!==null?S.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n},Wu(s,n),null;else S!==null?(d=S.baseLanes|a,s.memoizedState=null):d=a,Wu(s,d);return qt(n,s,p,a),s.child}function Gh(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=128)}function Pc(n,s,a,d,p){var S=Ut(a)?Ri:kt.current;return S=Ds(s,S),Vs(s,p),a=Sc(n,s,a,d,S,p),n!==null&&!wn?(s.updateQueue=n.updateQueue,s.flags&=-517,n.lanes&=~p,ar(n,s,p)):(s.flags|=1,qt(n,s,a,p),s.child)}function Kh(n,s,a,d,p){if(Ut(a)){var S=!0;wu(s)}else S=!1;if(Vs(s,p),s.stateNode===null)n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2),Ch(s,a,d),gc(s,a,d,p),d=!0;else if(n===null){var P=s.stateNode,M=s.memoizedProps;P.props=M;var z=P.context,J=a.contextType;typeof J=="object"&&J!==null?J=rn(J):(J=Ut(a)?Ri:kt.current,J=Ds(s,J));var me=a.getDerivedStateFromProps,be=typeof me=="function"||typeof P.getSnapshotBeforeUpdate=="function";be||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(M!==d||z!==J)&&Ah(s,P,d,J),Or=!1;var ue=s.memoizedState;P.state=ue,$o(s,d,P,p),z=s.memoizedState,M!==d||ue!==z||Bt.current||Or?(typeof me=="function"&&(Cu(s,a,me,d),z=s.memoizedState),(M=Or||kh(s,a,M,d,ue,z,J))?(be||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(s.flags|=4)):(typeof P.componentDidMount=="function"&&(s.flags|=4),s.memoizedProps=d,s.memoizedState=z),P.props=d,P.state=z,P.context=J,d=M):(typeof P.componentDidMount=="function"&&(s.flags|=4),d=!1)}else{P=s.stateNode,Eh(n,s),M=s.memoizedProps,J=s.type===s.elementType?M:yn(s.type,M),P.props=J,be=s.pendingProps,ue=P.context,z=a.contextType,typeof z=="object"&&z!==null?z=rn(z):(z=Ut(a)?Ri:kt.current,z=Ds(s,z));var Ee=a.getDerivedStateFromProps;(me=typeof Ee=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(M!==be||ue!==z)&&Ah(s,P,d,z),Or=!1,ue=s.memoizedState,P.state=ue,$o(s,d,P,p);var Ae=s.memoizedState;M!==be||ue!==Ae||Bt.current||Or?(typeof Ee=="function"&&(Cu(s,a,Ee,d),Ae=s.memoizedState),(J=Or||kh(s,a,J,d,ue,Ae,z))?(me||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(d,Ae,z),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(d,Ae,z)),typeof P.componentDidUpdate=="function"&&(s.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(s.flags|=256)):(typeof P.componentDidUpdate!="function"||M===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&ue===n.memoizedState||(s.flags|=256),s.memoizedProps=d,s.memoizedState=Ae),P.props=d,P.state=Ae,P.context=z,d=J):(typeof P.componentDidUpdate!="function"||M===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&ue===n.memoizedState||(s.flags|=256),d=!1)}return Rc(n,s,a,d,S,p)}function Rc(n,s,a,d,p,S){Gh(n,s);var P=(s.flags&64)!==0;if(!d&&!P)return p&&dh(s,a,!1),ar(n,s,S);d=s.stateNode,cy.current=s;var M=P&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,n!==null&&P?(s.child=Ru(s,n.child,null,S),s.child=Ru(s,null,M,S)):qt(n,s,M,S),s.memoizedState=d.state,p&&dh(s,a,!0),s.child}function Qh(n){var s=n.stateNode;s.pendingContext?lh(n,s.pendingContext,s.pendingContext!==s.context):s.context&&lh(n,s.context,!1),_c(n,s.containerInfo)}var Fu={dehydrated:null,retryLane:0};function Xh(n,s,a){var d=s.pendingProps,p=rt.current,S=!1,P;return(P=(s.flags&64)!==0)||(P=n!==null&&n.memoizedState===null?!1:(p&2)!==0),P?(S=!0,s.flags&=-65):n!==null&&n.memoizedState===null||d.fallback===void 0||d.unstable_avoidThisFallback===!0||(p|=1),nt(rt,p&1),n===null?(d.fallback!==void 0&&yc(s),n=d.children,p=d.fallback,S?(n=Yh(s,n,p,a),s.child.memoizedState={baseLanes:a},s.memoizedState=Fu,n):typeof d.unstable_expectedLoadTime=="number"?(n=Yh(s,n,p,a),s.child.memoizedState={baseLanes:a},s.memoizedState=Fu,s.lanes=33554432,n):(a=Yc({mode:"visible",children:n},s.mode,a,null),a.return=s,s.child=a)):n.memoizedState!==null?S?(d=Zh(n,s,d.children,d.fallback,a),S=s.child,p=n.child.memoizedState,S.memoizedState=p===null?{baseLanes:a}:{baseLanes:p.baseLanes|a},S.childLanes=n.childLanes&~a,s.memoizedState=Fu,d):(a=Jh(n,s,d.children,a),s.memoizedState=null,a):S?(d=Zh(n,s,d.children,d.fallback,a),S=s.child,p=n.child.memoizedState,S.memoizedState=p===null?{baseLanes:a}:{baseLanes:p.baseLanes|a},S.childLanes=n.childLanes&~a,s.memoizedState=Fu,d):(a=Jh(n,s,d.children,a),s.memoizedState=null,a)}function Yh(n,s,a,d){var p=n.mode,S=n.child;return s={mode:"hidden",children:s},!(p&2)&&S!==null?(S.childLanes=0,S.pendingProps=s):S=Yc(s,p,0,null),a=Us(a,p,d,null),S.return=n,a.return=n,S.sibling=a,n.child=S,a}function Jh(n,s,a,d){var p=n.child;return n=p.sibling,a=qr(p,{mode:"visible",children:a}),!(s.mode&2)&&(a.lanes=d),a.return=s,a.sibling=null,n!==null&&(n.nextEffect=null,n.flags=8,s.firstEffect=s.lastEffect=n),s.child=a}function Zh(n,s,a,d,p){var S=s.mode,P=n.child;n=P.sibling;var M={mode:"hidden",children:a};return!(S&2)&&s.child!==P?(a=s.child,a.childLanes=0,a.pendingProps=M,P=a.lastEffect,P!==null?(s.firstEffect=a.firstEffect,s.lastEffect=P,P.nextEffect=null):s.firstEffect=s.lastEffect=null):a=qr(P,M),n!==null?d=qr(n,d):(d=Us(d,S,p,null),d.flags|=2),d.return=s,a.return=s,a.sibling=d,s.child=a,d}function ep(n,s){n.lanes|=s;var a=n.alternate;a!==null&&(a.lanes|=s),wh(n.return,s)}function Dc(n,s,a,d,p,S){var P=n.memoizedState;P===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:p,lastEffect:S}:(P.isBackwards=s,P.rendering=null,P.renderingStartTime=0,P.last=d,P.tail=a,P.tailMode=p,P.lastEffect=S)}function tp(n,s,a){var d=s.pendingProps,p=d.revealOrder,S=d.tail;if(qt(n,s,d.children,a),d=rt.current,d&2)d=d&1|2,s.flags|=64;else{if(n!==null&&n.flags&64)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ep(n,a);else if(n.tag===19)ep(n,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(nt(rt,d),!(s.mode&2))s.memoizedState=null;else switch(p){case"forwards":for(a=s.child,p=null;a!==null;)n=a.alternate,n!==null&&Du(n)===null&&(p=a),a=a.sibling;a=p,a===null?(p=s.child,s.child=null):(p=a.sibling,a.sibling=null),Dc(s,!1,p,a,S,s.lastEffect);break;case"backwards":for(a=null,p=s.child,s.child=null;p!==null;){if(n=p.alternate,n!==null&&Du(n)===null){s.child=p;break}n=p.sibling,p.sibling=a,a=p,p=n}Dc(s,!0,a,null,S,s.lastEffect);break;case"together":Dc(s,!1,null,null,void 0,s.lastEffect);break;default:s.memoizedState=null}return s.child}function ar(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ta|=s.lanes,a&s.childLanes){if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=qr(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=qr(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}return null}var np,Nc,rp,ip;np=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Nc=function(){},rp=function(n,s,a,d){var p=n.memoizedProps;if(p!==d){n=s.stateNode,Mi(Ln.current);var S=null;switch(a){case"input":p=uo(n,p),d=uo(n,d),S=[];break;case"option":p=rs(n,p),d=rs(n,d),S=[];break;case"select":p=e({},p,{value:void 0}),d=e({},d,{value:void 0}),S=[];break;case"textarea":p=ut(n,p),d=ut(n,d),S=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=mu)}ci(a,d);var P;a=null;for(J in p)if(!d.hasOwnProperty(J)&&p.hasOwnProperty(J)&&p[J]!=null)if(J==="style"){var M=p[J];for(P in M)M.hasOwnProperty(P)&&(a||(a={}),a[P]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(l.hasOwnProperty(J)?S||(S=[]):(S=S||[]).push(J,null));for(J in d){var z=d[J];if(M=p!=null?p[J]:void 0,d.hasOwnProperty(J)&&z!==M&&(z!=null||M!=null))if(J==="style")if(M){for(P in M)!M.hasOwnProperty(P)||z&&z.hasOwnProperty(P)||(a||(a={}),a[P]="");for(P in z)z.hasOwnProperty(P)&&M[P]!==z[P]&&(a||(a={}),a[P]=z[P])}else a||(S||(S=[]),S.push(J,a)),a=z;else J==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,M=M?M.__html:void 0,z!=null&&M!==z&&(S=S||[]).push(J,z)):J==="children"?typeof z!="string"&&typeof z!="number"||(S=S||[]).push(J,""+z):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(l.hasOwnProperty(J)?(z!=null&&J==="onScroll"&&Xe("scroll",n),S||M===z||(S=[])):typeof z=="object"&&z!==null&&z.$$typeof===te?z.toString():(S=S||[]).push(J,z))}a&&(S=S||[]).push("style",a);var J=S;(s.updateQueue=J)&&(s.flags|=4)}},ip=function(n,s,a,d){a!==d&&(s.flags|=4)};function ea(n,s){if(!xn)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function dy(n,s,a){var d=s.pendingProps;switch(s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ut(s.type)&&yu(),null;case 3:return Os(),Ye(Bt),Ye(kt),Ec(),d=s.stateNode,d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(Nu(s)?s.flags|=4:d.hydrate||(s.flags|=256)),Nc(s),null;case 5:vc(s);var p=Mi(Go.current);if(a=s.type,n!==null&&s.stateNode!=null)rp(n,s,a,d,p),n.ref!==s.ref&&(s.flags|=128);else{if(!d){if(s.stateNode===null)throw Error(r(166));return null}if(n=Mi(Ln.current),Nu(s)){d=s.stateNode,a=s.type;var S=s.memoizedProps;switch(d[Nr]=s,d[_u]=S,a){case"dialog":Xe("cancel",d),Xe("close",d);break;case"iframe":case"object":case"embed":Xe("load",d);break;case"video":case"audio":for(n=0;n<jo.length;n++)Xe(jo[n],d);break;case"source":Xe("error",d);break;case"img":case"image":case"link":Xe("error",d),Xe("load",d);break;case"details":Xe("toggle",d);break;case"input":lo(d,S),Xe("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!S.multiple},Xe("invalid",d);break;case"textarea":si(d,S),Xe("invalid",d)}ci(a,S),n=null;for(var P in S)S.hasOwnProperty(P)&&(p=S[P],P==="children"?typeof p=="string"?d.textContent!==p&&(n=["children",p]):typeof p=="number"&&d.textContent!==""+p&&(n=["children",""+p]):l.hasOwnProperty(P)&&p!=null&&P==="onScroll"&&Xe("scroll",d));switch(a){case"input":It(d),Ja(d,S,!0);break;case"textarea":It(d),ho(d);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(d.onclick=mu)}d=n,s.updateQueue=d,d!==null&&(s.flags|=4)}else{switch(P=p.nodeType===9?p:p.ownerDocument,n===po.html&&(n=wr(a)),n===po.html?a==="script"?(n=P.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=P.createElement(a,{is:d.is}):(n=P.createElement(a),a==="select"&&(P=n,d.multiple?P.multiple=!0:d.size&&(P.size=d.size))):n=P.createElementNS(n,a),n[Nr]=s,n[_u]=d,np(n,s,!1,!1),s.stateNode=n,P=di(a,d),a){case"dialog":Xe("cancel",n),Xe("close",n),p=d;break;case"iframe":case"object":case"embed":Xe("load",n),p=d;break;case"video":case"audio":for(p=0;p<jo.length;p++)Xe(jo[p],n);p=d;break;case"source":Xe("error",n),p=d;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),p=d;break;case"details":Xe("toggle",n),p=d;break;case"input":lo(n,d),p=uo(n,d),Xe("invalid",n);break;case"option":p=rs(n,d);break;case"select":n._wrapperState={wasMultiple:!!d.multiple},p=e({},d,{value:void 0}),Xe("invalid",n);break;case"textarea":si(n,d),p=ut(n,d),Xe("invalid",n);break;default:p=d}ci(a,p);var M=p;for(S in M)if(M.hasOwnProperty(S)){var z=M[S];S==="style"?_o(n,z):S==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&ss(n,z)):S==="children"?typeof z=="string"?(a!=="textarea"||z!=="")&&ai(n,z):typeof z=="number"&&ai(n,""+z):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(l.hasOwnProperty(S)?z!=null&&S==="onScroll"&&Xe("scroll",n):z!=null&&f(n,S,z,P))}switch(a){case"input":It(n),Ja(n,d,!1);break;case"textarea":It(n),ho(n);break;case"option":d.value!=null&&n.setAttribute("value",""+je(d.value));break;case"select":n.multiple=!!d.multiple,S=d.value,S!=null?et(n,!!d.multiple,S,!1):d.defaultValue!=null&&et(n,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=mu)}ih(a,d)&&(s.flags|=4)}s.ref!==null&&(s.flags|=128)}return null;case 6:if(n&&s.stateNode!=null)ip(n,s,n.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(r(166));a=Mi(Go.current),Mi(Ln.current),Nu(s)?(d=s.stateNode,a=s.memoizedProps,d[Nr]=s,d.nodeValue!==a&&(s.flags|=4)):(d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Nr]=s,s.stateNode=d)}return null;case 13:return Ye(rt),d=s.memoizedState,s.flags&64?(s.lanes=a,s):(d=d!==null,a=!1,n===null?s.memoizedProps.fallback!==void 0&&Nu(s):a=n.memoizedState!==null,d&&!a&&s.mode&2&&(n===null&&s.memoizedProps.unstable_avoidThisFallback!==!0||rt.current&1?wt===0&&(wt=3):((wt===0||wt===3)&&(wt=4),xt===null||!(ta&134217727)&&!(Fs&134217727)||zs(xt,bt))),(d||a)&&(s.flags|=4),null);case 4:return Os(),Nc(s),n===null&&Zf(s.stateNode.containerInfo),null;case 10:return pc(s),null;case 17:return Ut(s.type)&&yu(),null;case 19:if(Ye(rt),d=s.memoizedState,d===null)return null;if(S=(s.flags&64)!==0,P=d.rendering,P===null)if(S)ea(d,!1);else{if(wt!==0||n!==null&&n.flags&64)for(n=s.child;n!==null;){if(P=Du(n),P!==null){for(s.flags|=64,ea(d,!1),S=P.updateQueue,S!==null&&(s.updateQueue=S,s.flags|=4),d.lastEffect===null&&(s.firstEffect=null),s.lastEffect=d.lastEffect,d=a,a=s.child;a!==null;)S=a,n=d,S.flags&=2,S.nextEffect=null,S.firstEffect=null,S.lastEffect=null,P=S.alternate,P===null?(S.childLanes=0,S.lanes=n,S.child=null,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=P.childLanes,S.lanes=P.lanes,S.child=P.child,S.memoizedProps=P.memoizedProps,S.memoizedState=P.memoizedState,S.updateQueue=P.updateQueue,S.type=P.type,n=P.dependencies,S.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return nt(rt,rt.current&1|2),s.child}n=n.sibling}d.tail!==null&&Ct()>$c&&(s.flags|=64,S=!0,ea(d,!1),s.lanes=33554432)}else{if(!S)if(n=Du(P),n!==null){if(s.flags|=64,S=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ea(d,!0),d.tail===null&&d.tailMode==="hidden"&&!P.alternate&&!xn)return s=s.lastEffect=d.lastEffect,s!==null&&(s.nextEffect=null),null}else 2*Ct()-d.renderingStartTime>$c&&a!==1073741824&&(s.flags|=64,S=!0,ea(d,!1),s.lanes=33554432);d.isBackwards?(P.sibling=s.child,s.child=P):(a=d.last,a!==null?a.sibling=P:s.child=P,d.last=P)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.lastEffect=s.lastEffect,d.renderingStartTime=Ct(),a.sibling=null,s=rt.current,nt(rt,S?s&1|2:s&1),a):null;case 23:case 24:return Qc(),n!==null&&n.memoizedState!==null!=(s.memoizedState!==null)&&d.mode!=="unstable-defer-without-hiding"&&(s.flags|=4),null}throw Error(r(156,s.tag))}function fy(n){switch(n.tag){case 1:Ut(n.type)&&yu();var s=n.flags;return s&4096?(n.flags=s&-4097|64,n):null;case 3:if(Os(),Ye(Bt),Ye(kt),Ec(),s=n.flags,s&64)throw Error(r(285));return n.flags=s&-4097|64,n;case 5:return vc(n),null;case 13:return Ye(rt),s=n.flags,s&4096?(n.flags=s&-4097|64,n):null;case 19:return Ye(rt),null;case 4:return Os(),null;case 10:return pc(n),null;case 23:case 24:return Qc(),null;default:return null}}function Mc(n,s){try{var a="",d=s;do a+=de(d),d=d.return;while(d);var p=a}catch(S){p=`
Error generating stack: `+S.message+`
`+S.stack}return{value:n,source:s,stack:p}}function Vc(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var hy=typeof WeakMap=="function"?WeakMap:Map;function sp(n,s,a){a=Lr(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){Bu||(Bu=!0,qc=d),Vc(n,s)},a}function op(n,s,a){a=Lr(-1,a),a.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var p=s.value;a.payload=function(){return Vc(n,s),d(p)}}var S=n.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(a.callback=function(){typeof d!="function"&&(jn===null?jn=new Set([this]):jn.add(this),Vc(n,s));var P=s.stack;this.componentDidCatch(s.value,{componentStack:P!==null?P:""})}),a}var py=typeof WeakSet=="function"?WeakSet:Set;function ap(n){var s=n.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){$r(n,a)}else s.current=null}function my(n,s){switch(s.tag){case 0:case 11:case 15:case 22:return;case 1:if(s.flags&256&&n!==null){var a=n.memoizedProps,d=n.memoizedState;n=s.stateNode,s=n.getSnapshotBeforeUpdate(s.elementType===s.type?a:yn(s.type,a),d),n.__reactInternalSnapshotBeforeUpdate=s}return;case 3:s.flags&256&&ic(s.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(r(163))}function gy(n,s,a){switch(a.tag){case 0:case 11:case 15:case 22:if(s=a.updateQueue,s=s!==null?s.lastEffect:null,s!==null){n=s=s.next;do{if((n.tag&3)===3){var d=n.create;n.destroy=d()}n=n.next}while(n!==s)}if(s=a.updateQueue,s=s!==null?s.lastEffect:null,s!==null){n=s=s.next;do{var p=n;d=p.next,p=p.tag,p&4&&p&1&&(Tp(a,n),Iy(a,n)),n=d}while(n!==s)}return;case 1:n=a.stateNode,a.flags&4&&(s===null?n.componentDidMount():(d=a.elementType===a.type?s.memoizedProps:yn(a.type,s.memoizedProps),n.componentDidUpdate(d,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate))),s=a.updateQueue,s!==null&&Sh(a,s,n);return;case 3:if(s=a.updateQueue,s!==null){if(n=null,a.child!==null)switch(a.child.tag){case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}Sh(a,s,n)}return;case 5:n=a.stateNode,s===null&&a.flags&4&&ih(a.type,a.memoizedProps)&&n.focus();return;case 6:return;case 4:return;case 12:return;case 13:a.memoizedState===null&&(a=a.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&kr(a))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(r(163))}function up(n,s){for(var a=n;;){if(a.tag===5){var d=a.stateNode;if(s)d=d.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{d=a.stateNode;var p=a.memoizedProps.style;p=p!=null&&p.hasOwnProperty("display")?p.display:null,d.style.display=go("display",p)}}else if(a.tag===6)a.stateNode.nodeValue=s?"":a.memoizedProps;else if((a.tag!==23&&a.tag!==24||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}function lp(n,s){if(Di&&typeof Di.onCommitFiberUnmount=="function")try{Di.onCommitFiberUnmount(ac,s)}catch{}switch(s.tag){case 0:case 11:case 14:case 15:case 22:if(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null)){var a=n=n.next;do{var d=a,p=d.destroy;if(d=d.tag,p!==void 0)if(d&4)Tp(s,a);else{d=s;try{p()}catch(S){$r(d,S)}}a=a.next}while(a!==n)}break;case 1:if(ap(s),n=s.stateNode,typeof n.componentWillUnmount=="function")try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(S){$r(s,S)}break;case 5:ap(s);break;case 4:hp(n,s)}}function cp(n){n.alternate=null,n.child=null,n.dependencies=null,n.firstEffect=null,n.lastEffect=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.return=null,n.updateQueue=null}function dp(n){return n.tag===5||n.tag===3||n.tag===4}function fp(n){e:{for(var s=n.return;s!==null;){if(dp(s))break e;s=s.return}throw Error(r(160))}var a=s;switch(s=a.stateNode,a.tag){case 5:var d=!1;break;case 3:s=s.containerInfo,d=!0;break;case 4:s=s.containerInfo,d=!0;break;default:throw Error(r(161))}a.flags&16&&(ai(s,""),a.flags&=-17);e:t:for(a=n;;){for(;a.sibling===null;){if(a.return===null||dp(a.return)){a=null;break e}a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2)){a=a.stateNode;break e}}d?Oc(n,a,s):Lc(n,a,s)}function Oc(n,s,a){var d=n.tag,p=d===5||d===6;if(p)n=p?n.stateNode:n.stateNode.instance,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=mu));else if(d!==4&&(n=n.child,n!==null))for(Oc(n,s,a),n=n.sibling;n!==null;)Oc(n,s,a),n=n.sibling}function Lc(n,s,a){var d=n.tag,p=d===5||d===6;if(p)n=p?n.stateNode:n.stateNode.instance,s?a.insertBefore(n,s):a.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(Lc(n,s,a),n=n.sibling;n!==null;)Lc(n,s,a),n=n.sibling}function hp(n,s){for(var a=s,d=!1,p,S;;){if(!d){d=a.return;e:for(;;){if(d===null)throw Error(r(160));switch(p=d.stateNode,d.tag){case 5:S=!1;break e;case 3:p=p.containerInfo,S=!0;break e;case 4:p=p.containerInfo,S=!0;break e}d=d.return}d=!0}if(a.tag===5||a.tag===6){e:for(var P=n,M=a,z=M;;)if(lp(P,z),z.child!==null&&z.tag!==4)z.child.return=z,z=z.child;else{if(z===M)break e;for(;z.sibling===null;){if(z.return===null||z.return===M)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}S?(P=p,M=a.stateNode,P.nodeType===8?P.parentNode.removeChild(M):P.removeChild(M)):p.removeChild(a.stateNode)}else if(a.tag===4){if(a.child!==null){p=a.stateNode.containerInfo,S=!0,a.child.return=a,a=a.child;continue}}else if(lp(n,a),a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return,a.tag===4&&(d=!1)}a.sibling.return=a.return,a=a.sibling}}function xc(n,s){switch(s.tag){case 0:case 11:case 14:case 15:case 22:var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do(d.tag&3)===3&&(n=d.destroy,d.destroy=void 0,n!==void 0&&n()),d=d.next;while(d!==a)}return;case 1:return;case 5:if(a=s.stateNode,a!=null){d=s.memoizedProps;var p=n!==null?n.memoizedProps:d;n=s.type;var S=s.updateQueue;if(s.updateQueue=null,S!==null){for(a[_u]=d,n==="input"&&d.type==="radio"&&d.name!=null&&ts(a,d),di(n,p),s=di(n,d),p=0;p<S.length;p+=2){var P=S[p],M=S[p+1];P==="style"?_o(a,M):P==="dangerouslySetInnerHTML"?ss(a,M):P==="children"?ai(a,M):f(a,P,M,s)}switch(n){case"input":ns(a,d);break;case"textarea":fo(a,d);break;case"select":n=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!d.multiple,S=d.value,S!=null?et(a,!!d.multiple,S,!1):n!==!!d.multiple&&(d.defaultValue!=null?et(a,!!d.multiple,d.defaultValue,!0):et(a,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(s.stateNode===null)throw Error(r(162));s.stateNode.nodeValue=s.memoizedProps;return;case 3:a=s.stateNode,a.hydrate&&(a.hydrate=!1,kr(a.containerInfo));return;case 12:return;case 13:s.memoizedState!==null&&(Uc=Ct(),up(s.child,!0)),pp(s);return;case 19:pp(s);return;case 17:return;case 23:case 24:up(s,s.memoizedState!==null);return}throw Error(r(163))}function pp(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new py),s.forEach(function(d){var p=Ay.bind(null,n,d);a.has(d)||(a.add(d),d.then(p,p))})}}function _y(n,s){return n!==null&&(n=n.memoizedState,n===null||n.dehydrated!==null)?(s=s.memoizedState,s!==null&&s.dehydrated===null):!1}var vy=Math.ceil,ju=y.ReactCurrentDispatcher,Fc=y.ReactCurrentOwner,Ce=0,xt=null,ct=null,bt=0,Li=0,jc=Mr(0),wt=0,zu=null,xs=0,ta=0,Fs=0,zc=0,Bc=null,Uc=0,$c=1/0;function js(){$c=Ct()+500}var ye=null,Bu=!1,qc=null,jn=null,jr=!1,na=null,ra=90,Hc=[],Wc=[],ur=null,ia=0,Gc=null,Uu=-1,lr=0,$u=0,sa=null,qu=!1;function Qt(){return Ce&48?Ct():Uu!==-1?Uu:Uu=Ct()}function zr(n){if(n=n.mode,!(n&2))return 1;if(!(n&4))return Ns()===99?1:2;if(lr===0&&(lr=xs),sy.transition!==0){$u!==0&&($u=Bc!==null?Bc.pendingLanes:0),n=lr;var s=4186112&~$u;return s&=-s,s===0&&(n=4186112&~n,s=n&-n,s===0&&(s=8192)),s}return n=Ns(),Ce&4&&n===98?n=wi(12,lr):(n=Hl(n),n=wi(n,lr)),n}function Br(n,s,a){if(50<ia)throw ia=0,Gc=null,Error(r(185));if(n=Hu(n,s),n===null)return null;Ei(n,s,a),n===xt&&(Fs|=s,wt===4&&zs(n,bt));var d=Ns();s===1?Ce&8&&!(Ce&48)?Kc(n):(on(n,a),Ce===0&&(js(),On())):(!(Ce&4)||d!==98&&d!==99||(ur===null?ur=new Set([n]):ur.add(n)),on(n,a)),Bc=n}function Hu(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}function on(n,s){for(var a=n.callbackNode,d=n.suspendedLanes,p=n.pingedLanes,S=n.expirationTimes,P=n.pendingLanes;0<P;){var M=31-tn(P),z=1<<M,J=S[M];if(J===-1){if(!(z&d)||z&p){J=s,Vt(z);var me=Ke;S[M]=10<=me?J+250:6<=me?J+5e3:-1}}else J<=s&&(n.expiredLanes|=z);P&=~z}if(d=Mn(n,n===xt?bt:0),s=Ke,d===0)a!==null&&(a!==dc&&lc(a),n.callbackNode=null,n.callbackPriority=0);else{if(a!==null){if(n.callbackPriority===s)return;a!==dc&&lc(a)}s===15?(a=Kc.bind(null,n),sr===null?(sr=[a],Tu=uc(Eu,yh)):sr.push(a),a=dc):s===14?a=Uo(99,Kc.bind(null,n)):(a=Wl(s),a=Uo(a,mp.bind(null,n))),n.callbackPriority=s,n.callbackNode=a}}function mp(n){if(Uu=-1,$u=lr=0,Ce&48)throw Error(r(327));var s=n.callbackNode;if(Ur()&&n.callbackNode!==s)return null;var a=Mn(n,n===xt?bt:0);if(a===0)return null;var d=a,p=Ce;Ce|=16;var S=yp();(xt!==n||bt!==d)&&(js(),Bs(n,d));do try{Ey();break}catch(M){vp(n,M)}while(!0);if(hc(),ju.current=S,Ce=p,ct!==null?d=0:(xt=null,bt=0,d=wt),xs&Fs)Bs(n,0);else if(d!==0){if(d===2&&(Ce|=64,n.hydrate&&(n.hydrate=!1,ic(n.containerInfo)),a=yi(n),a!==0&&(d=oa(n,a))),d===1)throw s=zu,Bs(n,0),zs(n,a),on(n,Ct()),s;switch(n.finishedWork=n.current.alternate,n.finishedLanes=a,d){case 0:case 1:throw Error(r(345));case 2:xi(n);break;case 3:if(zs(n,a),(a&62914560)===a&&(d=Uc+500-Ct(),10<d)){if(Mn(n,0)!==0)break;if(p=n.suspendedLanes,(p&a)!==a){Qt(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=sh(xi.bind(null,n),d);break}xi(n);break;case 4:if(zs(n,a),(a&4186112)===a)break;for(d=n.eventTimes,p=-1;0<a;){var P=31-tn(a);S=1<<P,P=d[P],P>p&&(p=P),a&=~S}if(a=p,a=Ct()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*vy(a/1960))-a,10<a){n.timeoutHandle=sh(xi.bind(null,n),a);break}xi(n);break;case 5:xi(n);break;default:throw Error(r(329))}}return on(n,Ct()),n.callbackNode===s?mp.bind(null,n):null}function zs(n,s){for(s&=~zc,s&=~Fs,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-tn(s),d=1<<a;n[a]=-1,s&=~d}}function Kc(n){if(Ce&48)throw Error(r(327));if(Ur(),n===xt&&n.expiredLanes&bt){var s=bt,a=oa(n,s);xs&Fs&&(s=Mn(n,s),a=oa(n,s))}else s=Mn(n,0),a=oa(n,s);if(n.tag!==0&&a===2&&(Ce|=64,n.hydrate&&(n.hydrate=!1,ic(n.containerInfo)),s=yi(n),s!==0&&(a=oa(n,s))),a===1)throw a=zu,Bs(n,0),zs(n,s),on(n,Ct()),a;return n.finishedWork=n.current.alternate,n.finishedLanes=s,xi(n),on(n,Ct()),null}function yy(){if(ur!==null){var n=ur;ur=null,n.forEach(function(s){s.expiredLanes|=24&s.pendingLanes,on(s,Ct())})}On()}function gp(n,s){var a=Ce;Ce|=1;try{return n(s)}finally{Ce=a,Ce===0&&(js(),On())}}function _p(n,s){var a=Ce;Ce&=-2,Ce|=8;try{return n(s)}finally{Ce=a,Ce===0&&(js(),On())}}function Wu(n,s){nt(jc,Li),Li|=s,xs|=s}function Qc(){Li=jc.current,Ye(jc)}function Bs(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Zv(a)),ct!==null)for(a=ct.return;a!==null;){var d=a;switch(d.tag){case 1:d=d.type.childContextTypes,d!=null&&yu();break;case 3:Os(),Ye(Bt),Ye(kt),Ec();break;case 5:vc(d);break;case 4:Os();break;case 13:Ye(rt);break;case 19:Ye(rt);break;case 10:pc(d);break;case 23:case 24:Qc()}a=a.return}xt=n,ct=qr(n.current,null),bt=Li=xs=s,wt=0,zu=null,zc=Fs=ta=0}function vp(n,s){do{var a=ct;try{if(hc(),Ko.current=xu,Mu){for(var d=it.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Mu=!1}if(Qo=0,yt=At=it=null,Xo=!1,Fc.current=null,a===null||a.return===null){wt=1,zu=s,ct=null;break}e:{var S=n,P=a.return,M=a,z=s;if(s=bt,M.flags|=2048,M.firstEffect=M.lastEffect=null,z!==null&&typeof z=="object"&&typeof z.then=="function"){var J=z;if(!(M.mode&2)){var me=M.alternate;me?(M.updateQueue=me.updateQueue,M.memoizedState=me.memoizedState,M.lanes=me.lanes):(M.updateQueue=null,M.memoizedState=null)}var be=(rt.current&1)!==0,ue=P;do{var Ee;if(Ee=ue.tag===13){var Ae=ue.memoizedState;if(Ae!==null)Ee=Ae.dehydrated!==null;else{var Ie=ue.memoizedProps;Ee=Ie.fallback===void 0?!1:Ie.unstable_avoidThisFallback!==!0?!0:!be}}if(Ee){var K=ue.updateQueue;if(K===null){var B=new Set;B.add(J),ue.updateQueue=B}else K.add(J);if(!(ue.mode&2)){if(ue.flags|=64,M.flags|=16384,M.flags&=-2981,M.tag===1)if(M.alternate===null)M.tag=17;else{var q=Lr(-1,1);q.tag=2,xr(M,q)}M.lanes|=1;break e}z=void 0,M=s;var re=S.pingCache;if(re===null?(re=S.pingCache=new hy,z=new Set,re.set(J,z)):(z=re.get(J),z===void 0&&(z=new Set,re.set(J,z))),!z.has(M)){z.add(M);var oe=Cy.bind(null,S,J,M);J.then(oe,oe)}ue.flags|=4096,ue.lanes=s;break e}ue=ue.return}while(ue!==null);z=Error((ve(M.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}wt!==5&&(wt=2),z=Mc(z,M),ue=P;do{switch(ue.tag){case 3:S=z,ue.flags|=4096,s&=-s,ue.lanes|=s;var Re=sp(ue,S,s);Th(ue,Re);break e;case 1:S=z;var we=ue.type,De=ue.stateNode;if(!(ue.flags&64)&&(typeof we.getDerivedStateFromError=="function"||De!==null&&typeof De.componentDidCatch=="function"&&(jn===null||!jn.has(De)))){ue.flags|=4096,s&=-s,ue.lanes|=s;var Oe=op(ue,S,s);Th(ue,Oe);break e}}ue=ue.return}while(ue!==null)}Ep(a)}catch(Ve){s=Ve,ct===a&&a!==null&&(ct=a=a.return);continue}break}while(!0)}function yp(){var n=ju.current;return ju.current=xu,n===null?xu:n}function oa(n,s){var a=Ce;Ce|=16;var d=yp();xt===n&&bt===s||Bs(n,s);do try{wy();break}catch(p){vp(n,p)}while(!0);if(hc(),Ce=a,ju.current=d,ct!==null)throw Error(r(261));return xt=null,bt=0,wt}function wy(){for(;ct!==null;)wp(ct)}function Ey(){for(;ct!==null&&!ny();)wp(ct)}function wp(n){var s=Ip(n.alternate,n,Li);n.memoizedProps=n.pendingProps,s===null?Ep(n):ct=s,Fc.current=null}function Ep(n){var s=n;do{var a=s.alternate;if(n=s.return,s.flags&2048){if(a=fy(s),a!==null){a.flags&=2047,ct=a;return}n!==null&&(n.firstEffect=n.lastEffect=null,n.flags|=2048)}else{if(a=dy(a,s,Li),a!==null){ct=a;return}if(a=s,a.tag!==24&&a.tag!==23||a.memoizedState===null||Li&1073741824||!(a.mode&4)){for(var d=0,p=a.child;p!==null;)d|=p.lanes|p.childLanes,p=p.sibling;a.childLanes=d}n!==null&&!(n.flags&2048)&&(n.firstEffect===null&&(n.firstEffect=s.firstEffect),s.lastEffect!==null&&(n.lastEffect!==null&&(n.lastEffect.nextEffect=s.firstEffect),n.lastEffect=s.lastEffect),1<s.flags&&(n.lastEffect!==null?n.lastEffect.nextEffect=s:n.firstEffect=s,n.lastEffect=s))}if(s=s.sibling,s!==null){ct=s;return}ct=s=n}while(s!==null);wt===0&&(wt=5)}function xi(n){var s=Ns();return Ni(99,Ty.bind(null,n,s)),null}function Ty(n,s){do Ur();while(na!==null);if(Ce&48)throw Error(r(327));var a=n.finishedWork;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(r(177));n.callbackNode=null;var d=a.lanes|a.childLanes,p=d,S=n.pendingLanes&~p;n.pendingLanes=p,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=p,n.mutableReadLanes&=p,n.entangledLanes&=p,p=n.entanglements;for(var P=n.eventTimes,M=n.expirationTimes;0<S;){var z=31-tn(S),J=1<<z;p[z]=0,P[z]=-1,M[z]=-1,S&=~J}if(ur!==null&&!(d&24)&&ur.has(n)&&ur.delete(n),n===xt&&(ct=xt=null,bt=0),1<a.flags?a.lastEffect!==null?(a.lastEffect.nextEffect=a,d=a.firstEffect):d=a:d=a.firstEffect,d!==null){if(p=Ce,Ce|=32,Fc.current=null,tc=Ti,P=Gf(),Yl(P)){if("selectionStart"in P)M={start:P.selectionStart,end:P.selectionEnd};else e:if(M=(M=P.ownerDocument)&&M.defaultView||window,(J=M.getSelection&&M.getSelection())&&J.rangeCount!==0){M=J.anchorNode,S=J.anchorOffset,z=J.focusNode,J=J.focusOffset;try{M.nodeType,z.nodeType}catch{M=null;break e}var me=0,be=-1,ue=-1,Ee=0,Ae=0,Ie=P,K=null;t:for(;;){for(var B;Ie!==M||S!==0&&Ie.nodeType!==3||(be=me+S),Ie!==z||J!==0&&Ie.nodeType!==3||(ue=me+J),Ie.nodeType===3&&(me+=Ie.nodeValue.length),(B=Ie.firstChild)!==null;)K=Ie,Ie=B;for(;;){if(Ie===P)break t;if(K===M&&++Ee===S&&(be=me),K===z&&++Ae===J&&(ue=me),(B=Ie.nextSibling)!==null)break;Ie=K,K=Ie.parentNode}Ie=B}M=be===-1||ue===-1?null:{start:be,end:ue}}else M=null;M=M||{start:0,end:0}}else M=null;nc={focusedElem:P,selectionRange:M},Ti=!1,sa=null,qu=!1,ye=d;do try{Sy()}catch(Ve){if(ye===null)throw Error(r(330));$r(ye,Ve),ye=ye.nextEffect}while(ye!==null);sa=null,ye=d;do try{for(P=n;ye!==null;){var q=ye.flags;if(q&16&&ai(ye.stateNode,""),q&128){var re=ye.alternate;if(re!==null){var oe=re.ref;oe!==null&&(typeof oe=="function"?oe(null):oe.current=null)}}switch(q&1038){case 2:fp(ye),ye.flags&=-3;break;case 6:fp(ye),ye.flags&=-3,xc(ye.alternate,ye);break;case 1024:ye.flags&=-1025;break;case 1028:ye.flags&=-1025,xc(ye.alternate,ye);break;case 4:xc(ye.alternate,ye);break;case 8:M=ye,hp(P,M);var Re=M.alternate;cp(M),Re!==null&&cp(Re)}ye=ye.nextEffect}}catch(Ve){if(ye===null)throw Error(r(330));$r(ye,Ve),ye=ye.nextEffect}while(ye!==null);if(oe=nc,re=Gf(),q=oe.focusedElem,P=oe.selectionRange,re!==q&&q&&q.ownerDocument&&Wf(q.ownerDocument.documentElement,q)){for(P!==null&&Yl(q)&&(re=P.start,oe=P.end,oe===void 0&&(oe=re),"selectionStart"in q?(q.selectionStart=re,q.selectionEnd=Math.min(oe,q.value.length)):(oe=(re=q.ownerDocument||document)&&re.defaultView||window,oe.getSelection&&(oe=oe.getSelection(),M=q.textContent.length,Re=Math.min(P.start,M),P=P.end===void 0?Re:Math.min(P.end,M),!oe.extend&&Re>P&&(M=P,P=Re,Re=M),M=Hf(q,Re),S=Hf(q,P),M&&S&&(oe.rangeCount!==1||oe.anchorNode!==M.node||oe.anchorOffset!==M.offset||oe.focusNode!==S.node||oe.focusOffset!==S.offset)&&(re=re.createRange(),re.setStart(M.node,M.offset),oe.removeAllRanges(),Re>P?(oe.addRange(re),oe.extend(S.node,S.offset)):(re.setEnd(S.node,S.offset),oe.addRange(re)))))),re=[],oe=q;oe=oe.parentNode;)oe.nodeType===1&&re.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<re.length;q++)oe=re[q],oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}Ti=!!tc,nc=tc=null,n.current=a,ye=d;do try{for(q=n;ye!==null;){var we=ye.flags;if(we&36&&gy(q,ye.alternate,ye),we&128){re=void 0;var De=ye.ref;if(De!==null){var Oe=ye.stateNode;switch(ye.tag){case 5:re=Oe;break;default:re=Oe}typeof De=="function"?De(re):De.current=re}}ye=ye.nextEffect}}catch(Ve){if(ye===null)throw Error(r(330));$r(ye,Ve),ye=ye.nextEffect}while(ye!==null);ye=null,iy(),Ce=p}else n.current=a;if(jr)jr=!1,na=n,ra=s;else for(ye=d;ye!==null;)s=ye.nextEffect,ye.nextEffect=null,ye.flags&8&&(we=ye,we.sibling=null,we.stateNode=null),ye=s;if(d=n.pendingLanes,d===0&&(jn=null),d===1?n===Gc?ia++:(ia=0,Gc=n):ia=0,a=a.stateNode,Di&&typeof Di.onCommitFiberRoot=="function")try{Di.onCommitFiberRoot(ac,a,void 0,(a.current.flags&64)===64)}catch{}if(on(n,Ct()),Bu)throw Bu=!1,n=qc,qc=null,n;return Ce&8||On(),null}function Sy(){for(;ye!==null;){var n=ye.alternate;qu||sa===null||(ye.flags&8?Dn(ye,sa)&&(qu=!0):ye.tag===13&&_y(n,ye)&&Dn(ye,sa)&&(qu=!0));var s=ye.flags;s&256&&my(n,ye),!(s&512)||jr||(jr=!0,Uo(97,function(){return Ur(),null})),ye=ye.nextEffect}}function Ur(){if(ra!==90){var n=97<ra?97:ra;return ra=90,Ni(n,ky)}return!1}function Iy(n,s){Hc.push(s,n),jr||(jr=!0,Uo(97,function(){return Ur(),null}))}function Tp(n,s){Wc.push(s,n),jr||(jr=!0,Uo(97,function(){return Ur(),null}))}function ky(){if(na===null)return!1;var n=na;if(na=null,Ce&48)throw Error(r(331));var s=Ce;Ce|=32;var a=Wc;Wc=[];for(var d=0;d<a.length;d+=2){var p=a[d],S=a[d+1],P=p.destroy;if(p.destroy=void 0,typeof P=="function")try{P()}catch(z){if(S===null)throw Error(r(330));$r(S,z)}}for(a=Hc,Hc=[],d=0;d<a.length;d+=2){p=a[d],S=a[d+1];try{var M=p.create;p.destroy=M()}catch(z){if(S===null)throw Error(r(330));$r(S,z)}}for(M=n.current.firstEffect;M!==null;)n=M.nextEffect,M.nextEffect=null,M.flags&8&&(M.sibling=null,M.stateNode=null),M=n;return Ce=s,On(),!0}function Sp(n,s,a){s=Mc(a,s),s=sp(n,s,1),xr(n,s),s=Qt(),n=Hu(n,1),n!==null&&(Ei(n,1,s),on(n,s))}function $r(n,s){if(n.tag===3)Sp(n,n,s);else for(var a=n.return;a!==null;){if(a.tag===3){Sp(a,n,s);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(jn===null||!jn.has(d))){n=Mc(s,n);var p=op(a,n,1);if(xr(a,p),p=Qt(),a=Hu(a,1),a!==null)Ei(a,1,p),on(a,p);else if(typeof d.componentDidCatch=="function"&&(jn===null||!jn.has(d)))try{d.componentDidCatch(s,n)}catch{}break}}a=a.return}}function Cy(n,s,a){var d=n.pingCache;d!==null&&d.delete(s),s=Qt(),n.pingedLanes|=n.suspendedLanes&a,xt===n&&(bt&a)===a&&(wt===4||wt===3&&(bt&62914560)===bt&&500>Ct()-Uc?Bs(n,0):zc|=a),on(n,s)}function Ay(n,s){var a=n.stateNode;a!==null&&a.delete(s),s=0,s===0&&(s=n.mode,s&2?s&4?(lr===0&&(lr=xs),s=en(62914560&~lr),s===0&&(s=4194304)):s=Ns()===99?1:2:s=1),a=Qt(),n=Hu(n,s),n!==null&&(Ei(n,s,a),on(n,a))}var Ip;Ip=function(n,s,a){var d=s.lanes;if(n!==null)if(n.memoizedProps!==s.pendingProps||Bt.current)wn=!0;else if(a&d)wn=!!(n.flags&16384);else{switch(wn=!1,s.tag){case 3:Qh(s),wc();break;case 5:Rh(s);break;case 1:Ut(s.type)&&wu(s);break;case 4:_c(s,s.stateNode.containerInfo);break;case 10:d=s.memoizedProps.value;var p=s.type._context;nt(Su,p._currentValue),p._currentValue=d;break;case 13:if(s.memoizedState!==null)return a&s.child.childLanes?Xh(n,s,a):(nt(rt,rt.current&1),s=ar(n,s,a),s!==null?s.sibling:null);nt(rt,rt.current&1);break;case 19:if(d=(a&s.childLanes)!==0,n.flags&64){if(d)return tp(n,s,a);s.flags|=64}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),nt(rt,rt.current),d)break;return null;case 23:case 24:return s.lanes=0,bc(n,s,a)}return ar(n,s,a)}else wn=!1;switch(s.lanes=0,s.tag){case 2:if(d=s.type,n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2),n=s.pendingProps,p=Ds(s,kt.current),Vs(s,a),p=Sc(null,s,d,n,p,a),s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0){if(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ut(d)){var S=!0;wu(s)}else S=!1;s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,mc(s);var P=d.getDerivedStateFromProps;typeof P=="function"&&Cu(s,d,P,n),p.updater=Au,s.stateNode=p,p._reactInternals=s,gc(s,d,n,a),s=Rc(null,s,d,!0,S,a)}else s.tag=0,qt(null,s,p,a),s=s.child;return s;case 16:p=s.elementType;e:{switch(n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2),n=s.pendingProps,S=p._init,p=S(p._payload),s.type=p,S=s.tag=Py(p),n=yn(p,n),S){case 0:s=Pc(null,s,p,n,a);break e;case 1:s=Kh(null,s,p,n,a);break e;case 11:s=qh(null,s,p,n,a);break e;case 14:s=Hh(null,s,p,yn(p.type,n),d,a);break e}throw Error(r(306,p,""))}return s;case 0:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:yn(d,p),Pc(n,s,d,p,a);case 1:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:yn(d,p),Kh(n,s,d,p,a);case 3:if(Qh(s),d=s.updateQueue,n===null||d===null)throw Error(r(282));if(d=s.pendingProps,p=s.memoizedState,p=p!==null?p.element:null,Eh(n,s),$o(s,d,null,a),d=s.memoizedState.element,d===p)wc(),s=ar(n,s,a);else{if(p=s.stateNode,(S=p.hydrate)&&(Fr=As(s.stateNode.containerInfo.firstChild),or=s,S=xn=!0),S){if(n=p.mutableSourceEagerHydrationData,n!=null)for(p=0;p<n.length;p+=2)S=n[p],S._workInProgressVersionPrimary=n[p+1],Ls.push(S);for(a=Ph(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|1024,a=a.sibling}else qt(n,s,d,a),wc();s=s.child}return s;case 5:return Rh(s),n===null&&yc(s),d=s.type,p=s.pendingProps,S=n!==null?n.memoizedProps:null,P=p.children,rc(d,p)?P=null:S!==null&&rc(d,S)&&(s.flags|=16),Gh(n,s),qt(n,s,P,a),s.child;case 6:return n===null&&yc(s),null;case 13:return Xh(n,s,a);case 4:return _c(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=Ru(s,null,d,a):qt(n,s,d,a),s.child;case 11:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:yn(d,p),qh(n,s,d,p,a);case 7:return qt(n,s,s.pendingProps,a),s.child;case 8:return qt(n,s,s.pendingProps.children,a),s.child;case 12:return qt(n,s,s.pendingProps.children,a),s.child;case 10:e:{d=s.type._context,p=s.pendingProps,P=s.memoizedProps,S=p.value;var M=s.type._context;if(nt(Su,M._currentValue),M._currentValue=S,P!==null)if(M=P.value,S=nn(M,S)?0:(typeof d._calculateChangedBits=="function"?d._calculateChangedBits(M,S):1073741823)|0,S===0){if(P.children===p.children&&!Bt.current){s=ar(n,s,a);break e}}else for(M=s.child,M!==null&&(M.return=s);M!==null;){var z=M.dependencies;if(z!==null){P=M.child;for(var J=z.firstContext;J!==null;){if(J.context===d&&J.observedBits&S){M.tag===1&&(J=Lr(-1,a&-a),J.tag=2,xr(M,J)),M.lanes|=a,J=M.alternate,J!==null&&(J.lanes|=a),wh(M.return,a),z.lanes|=a;break}J=J.next}}else P=M.tag===10&&M.type===s.type?null:M.child;if(P!==null)P.return=M;else for(P=M;P!==null;){if(P===s){P=null;break}if(M=P.sibling,M!==null){M.return=P.return,P=M;break}P=P.return}M=P}qt(n,s,p.children,a),s=s.child}return s;case 9:return p=s.type,S=s.pendingProps,d=S.children,Vs(s,a),p=rn(p,S.unstable_observedBits),d=d(p),s.flags|=1,qt(n,s,d,a),s.child;case 14:return p=s.type,S=yn(p,s.pendingProps),S=yn(p.type,S),Hh(n,s,p,S,d,a);case 15:return Wh(n,s,s.type,s.pendingProps,d,a);case 17:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:yn(d,p),n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2),s.tag=1,Ut(d)?(n=!0,wu(s)):n=!1,Vs(s,a),Ch(s,d,p),gc(s,d,p,a),Rc(null,s,d,!0,n,a);case 19:return tp(n,s,a);case 23:return bc(n,s,a);case 24:return bc(n,s,a)}throw Error(r(156,s.tag))};function by(n,s,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function an(n,s,a,d){return new by(n,s,a,d)}function Xc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Py(n){if(typeof n=="function")return Xc(n)?1:0;if(n!=null){if(n=n.$$typeof,n===A)return 11;if(n===F)return 14}return 2}function qr(n,s){var a=n.alternate;return a===null?(a=an(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null),a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Gu(n,s,a,d,p,S){var P=2;if(d=n,typeof n=="function")Xc(n)&&(P=1);else if(typeof n=="string")P=5;else e:switch(n){case T:return Us(a.children,p,S,s);case he:P=8,p|=16;break;case k:P=8,p|=1;break;case I:return n=an(12,a,s,p|8),n.elementType=I,n.type=I,n.lanes=S,n;case X:return n=an(13,a,s,p),n.type=X,n.elementType=X,n.lanes=S,n;case ee:return n=an(19,a,s,p),n.elementType=ee,n.lanes=S,n;case H:return Yc(a,p,S,s);case ae:return n=an(24,a,s,p),n.elementType=ae,n.lanes=S,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:P=10;break e;case V:P=9;break e;case A:P=11;break e;case F:P=14;break e;case O:P=16,d=null;break e;case W:P=22;break e}throw Error(r(130,n==null?n:typeof n,""))}return s=an(P,a,s,p),s.elementType=n,s.type=d,s.lanes=S,s}function Us(n,s,a,d){return n=an(7,n,d,s),n.lanes=a,n}function Yc(n,s,a,d){return n=an(23,n,d,s),n.elementType=H,n.lanes=a,n}function Jc(n,s,a){return n=an(6,n,null,s),n.lanes=a,n}function Zc(n,s,a){return s=an(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Ry(n,s,a){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=a,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Jn(0),this.expirationTimes=Jn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jn(0),this.mutableSourceEagerHydrationData=null}function Dy(n,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:d==null?null:""+d,children:n,containerInfo:s,implementation:a}}function Ku(n,s,a,d){var p=s.current,S=Qt(),P=zr(p);e:if(a){a=a._reactInternals;t:{if(Xn(a)!==a||a.tag!==1)throw Error(r(170));var M=a;do{switch(M.tag){case 3:M=M.stateNode.context;break t;case 1:if(Ut(M.type)){M=M.stateNode.__reactInternalMemoizedMergedChildContext;break t}}M=M.return}while(M!==null);throw Error(r(171))}if(a.tag===1){var z=a.type;if(Ut(z)){a=ch(a,z,M);break e}}a=M}else a=Vr;return s.context===null?s.context=a:s.pendingContext=a,s=Lr(S,P),s.payload={element:n},d=d===void 0?null:d,d!==null&&(s.callback=d),xr(p,s),Br(p,P,S),P}function ed(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function kp(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function td(n,s){kp(n,s),(n=n.alternate)&&kp(n,s)}function Ny(){return null}function nd(n,s,a){var d=a!=null&&a.hydrationOptions!=null&&a.hydrationOptions.mutableSources||null;if(a=new Ry(n,s,a!=null&&a.hydrate===!0),s=an(3,null,null,s===2?7:s===1?3:0),a.current=s,s.stateNode=a,mc(s),n[bs]=a.current,Zf(n.nodeType===8?n.parentNode:n),d)for(n=0;n<d.length;n++){s=d[n];var p=s._getVersion;p=p(s._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[s,p]:a.mutableSourceEagerHydrationData.push(s,p)}this._internalRoot=a}nd.prototype.render=function(n){Ku(n,this._internalRoot,null,null)},nd.prototype.unmount=function(){var n=this._internalRoot,s=n.containerInfo;Ku(null,n,null,function(){s[bs]=null})};function aa(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function My(n,s){if(s||(s=n?n.nodeType===9?n.documentElement:n.firstChild:null,s=!(!s||s.nodeType!==1||!s.hasAttribute("data-reactroot"))),!s)for(var a;a=n.lastChild;)n.removeChild(a);return new nd(n,0,s?{hydrate:!0}:void 0)}function Qu(n,s,a,d,p){var S=a._reactRootContainer;if(S){var P=S._internalRoot;if(typeof p=="function"){var M=p;p=function(){var J=ed(P);M.call(J)}}Ku(s,P,n,p)}else{if(S=a._reactRootContainer=My(a,d),P=S._internalRoot,typeof p=="function"){var z=p;p=function(){var J=ed(P);z.call(J)}}_p(function(){Ku(s,P,n,p)})}return ed(P)}cs=function(n){if(n.tag===13){var s=Qt();Br(n,4,s),td(n,4)}},So=function(n){if(n.tag===13){var s=Qt();Br(n,67108864,s),td(n,67108864)}},Io=function(n){if(n.tag===13){var s=Qt(),a=zr(n);Br(n,a,s),td(n,a)}},ko=function(n,s){return s()},os=function(n,s,a){switch(s){case"input":if(ns(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==n&&d.form===n.form){var p=vu(d);if(!p)throw Error(r(90));bn(d),ns(d,p)}}}break;case"textarea":fo(n,a);break;case"select":s=a.value,s!=null&&et(n,!!a.multiple,s,!1)}},as=gp,Tr=function(n,s,a,d,p){var S=Ce;Ce|=4;try{return Ni(98,n.bind(null,s,a,d,p))}finally{Ce=S,Ce===0&&(js(),On())}},Gn=function(){!(Ce&49)&&(yy(),Ur())},Za=function(n,s){var a=Ce;Ce|=2;try{return n(s)}finally{Ce=a,Ce===0&&(js(),On())}};function Cp(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aa(s))throw Error(r(200));return Dy(n,s,null,a)}var Vy={Events:[Bo,Ps,vu,vo,mt,Ur,{current:!1}]},ua={findFiberByHostInstance:Pi,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Oy={bundleType:ua.bundleType,version:ua.version,rendererPackageName:ua.rendererPackageName,rendererConfig:ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Sr(n),n===null?null:n.stateNode},findFiberByHostInstance:ua.findFiberByHostInstance||Ny,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xu.isDisabled&&Xu.supportsFiber)try{ac=Xu.inject(Oy),Di=Xu}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vy,Xt.createPortal=Cp,Xt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):Error(r(268,Object.keys(n)));return n=Sr(s),n=n===null?null:n.stateNode,n},Xt.flushSync=function(n,s){var a=Ce;if(a&48)return n(s);Ce|=1;try{if(n)return Ni(99,n.bind(null,s))}finally{Ce=a,On()}},Xt.hydrate=function(n,s,a){if(!aa(s))throw Error(r(200));return Qu(null,n,s,!0,a)},Xt.render=function(n,s,a){if(!aa(s))throw Error(r(200));return Qu(null,n,s,!1,a)},Xt.unmountComponentAtNode=function(n){if(!aa(n))throw Error(r(40));return n._reactRootContainer?(_p(function(){Qu(null,null,n,!1,function(){n._reactRootContainer=null,n[bs]=null})}),!0):!1},Xt.unstable_batchedUpdates=gp,Xt.unstable_createPortal=function(n,s){return Cp(n,s,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)},Xt.unstable_renderSubtreeIntoContainer=function(n,s,a,d){if(!aa(a))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return Qu(n,s,a,!1,d)},Xt.version="17.0.2",Xt}var Op;function qy(){if(Op)return od.exports;Op=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),od.exports=$y(),od.exports}var Hy=qy();const Wy=Wa(Hy);function Gy(i){const e=i.notes.map((t,r)=>dt.jsx("div",{children:dt.jsxs("div",{className:`title ${t.id===i.currentNote.id?"selected-note":""}`,onClick:()=>i.setCurrentNoteId(t.id),children:[dt.jsx("h4",{className:"text-snippet",children:t.body.split(`
`)[0]}),dt.jsx("button",{className:"delete-btn",onClick:()=>i.deleteNote(t.id),children:dt.jsx("i",{className:"gg-trash trash-icon"})})]})},t.id));return dt.jsxs("section",{className:"pane sidebar",children:[dt.jsxs("div",{className:"sidebar--header",children:[dt.jsx("h3",{children:"Notes"}),dt.jsx("button",{className:"new-note",onClick:i.newNote,children:"+"})]}),e]})}var ld={},En={},Lp;function An(){if(Lp)return En;Lp=1,Object.defineProperty(En,"__esModule",{value:!0}),En.getBreaksNeededForEmptyLineAfter=En.getBreaksNeededForEmptyLineBefore=En.selectWord=En.getSurroundingWord=void 0;function i(o,l){if(!o)throw Error("Argument 'text' should be truthy");for(var c=function(C){return C===" "||C.charCodeAt(0)===10},h=0,g=o.length,v=l;v-1>-1;v--)if(c(o[v-1])){h=v;break}for(var v=l;v<o.length;v++)if(c(o[v])){g=v;break}return{start:h,end:g}}En.getSurroundingWord=i;function e(o){var l=o.text,c=o.selection;return l&&l.length&&c.start===c.end?i(l,c.start):c}En.selectWord=e;function t(o,l){if(o===void 0&&(o=""),l===0)return 0;for(var c=2,h=!0,g=l-1;g>=0&&c>=0;g--)switch(o.charCodeAt(g)){case 32:continue;case 10:c--,h=!1;break;default:return c}return h?0:c}En.getBreaksNeededForEmptyLineBefore=t;function r(o,l){if(o===void 0&&(o=""),l===o.length-1)return 0;for(var c=2,h=!0,g=l;g<o.length&&c>=0;g++)switch(o.charCodeAt(g)){case 32:continue;case 10:{c--,h=!1;break}default:return c}return h?0:c}return En.getBreaksNeededForEmptyLineAfter=r,En}var Fi={},la={},ca={},xp;function ro(){if(xp)return ca;xp=1;/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/Object.defineProperty(ca,"__esModule",{value:!0}),ca.classNames=void 0;function i(o){return typeof o=="string"}function e(o){return Array.isArray(o)&&o.length>0}function t(o){return typeof o=="object"}function r(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];for(var c=[],h=0;h<o.length;h++){var g=o[h];if(g){if(i(g))c.push(g);else if(e(g)){var v=r.apply(null,g);v&&c.push(v)}else if(t(g))for(var C in g)g.hasOwnProperty(C)&&g[C]&&c.push(C)}}return c.join(" ")}return ca.classNames=r,ca}var Fp;function Ag(){if(Fp)return la;Fp=1,Object.defineProperty(la,"__esModule",{value:!0}),la.ToolbarButtonGroup=void 0;var i=dn(),e=ro(),t=function(r){return i.createElement("ul",{className:e.classNames("mde-header-group",{hidden:r.hidden})},r.children)};return la.ToolbarButtonGroup=t,la}var ji={},jp;function bg(){if(jp)return ji;jp=1;var i=ji&&ji.__assign||function(){return i=Object.assign||function(o){for(var l,c=1,h=arguments.length;c<h;c++){l=arguments[c];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(o[g]=l[g])}return o},i.apply(this,arguments)};Object.defineProperty(ji,"__esModule",{value:!0}),ji.ToolbarButton=void 0;var e=dn(),t={tabIndex:-1},r=function(o){var l=o.buttonComponentClass,c=o.buttonContent,h=o.buttonProps,g=o.onClick,v=o.readOnly,C=o.name,D=i(i({},t),h||{}),b=l||"button";return e.createElement("li",{className:"mde-header-item"},e.createElement(b,i(i({"data-name":C},D),{onClick:g,disabled:v,type:"button"}),c))};return ji.ToolbarButton=r,ji}var da={},zp;function Pg(){if(zp)return da;zp=1,Object.defineProperty(da,"__esModule",{value:!0}),da.MdeFontAwesomeIcon=void 0;var i=dn(),e=function(t){var r=t.icon,o=r;switch(r){case"header":o="heading";break;case"quote":o="quote-right";break;case"unordered-list":o="tasks";break;case"ordered-list":o="list-ol";break;case"checked-list":o="tasks";break;default:o=r}return i.createElement("i",{className:"fas fa-"+o,"aria-hidden":"true"})};return da.MdeFontAwesomeIcon=e,da}var zi={},Bp;function Ky(){if(Bp)return zi;Bp=1;var i=zi&&zi.__extends||function(){var o=function(l,c){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(h[v]=g[v])},o(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");o(l,c);function h(){this.constructor=l}l.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}();Object.defineProperty(zi,"__esModule",{value:!0}),zi.Preview=void 0;var e=dn(),t=ro(),r=function(o){i(l,o);function l(c){var h=o.call(this,c)||this;return h.state={loading:!0},h}return l.prototype.componentDidMount=function(){this.generatePreview()},l.prototype.componentDidUpdate=function(c,h){this.props.markdown!==c.markdown&&this.generatePreview()},l.prototype.generatePreview=function(){var c=this,h=this.props,g=h.markdown,v=h.generateMarkdownPreview;v(g).then(function(C){c.setState({preview:C,loading:!1})})},l.prototype.render=function(){var c=this.props,h=c.classes,g=c.minHeight,v=c.loadingPreview,C=c.refObject,D=c.heightUnits,b=this.state,L=b.preview,j=b.loading,x=j?v:L,$;typeof x=="string"?$=e.createElement("div",{className:"mde-preview-content",dangerouslySetInnerHTML:{__html:x||"<p>&nbsp;</p>"},ref:C}):$=e.createElement("div",{className:"mde-preview-content"},x);var Q=g&&D?g+10+D:g+10;return e.createElement("div",{className:t.classNames("mde-preview",h,{loading:j}),style:{minHeight:Q},"data-testid":"mde-preview"},$)},l}(e.Component);return zi.Preview=r,zi}var cr={},fa={},Up;function Qy(){if(Up)return fa;Up=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.getCaretCoordinates=void 0;var i=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],e=typeof window<"u",t=e&&window.mozInnerScreenX!=null;function r(o,l){if(!e)throw new Error("getCaretCoordinates should only be called in a browser");var c=document.createElement("div");c.id="input-textarea-caret-position-mirror-div",document.body.appendChild(c);var h=c.style,g=window.getComputedStyle?window.getComputedStyle(o):o.currentStyle;h.whiteSpace="pre-wrap",h.wordWrap="break-word",h.position="absolute",h.visibility="hidden",i.forEach(function(D){h[D]=g[D]}),t?o.scrollHeight>parseInt(g.height)&&(h.overflowY="scroll"):h.overflow="hidden",c.textContent=o.value.substring(0,o.selectionStart),l&&(c.textContent+=l);var v=document.createElement("span");v.textContent=o.value.substring(o.selectionEnd)||".",c.appendChild(v);var C={top:v.offsetTop+parseInt(g.borderTopWidth),left:v.offsetLeft+parseInt(g.borderLeftWidth),lineHeight:parseInt(g.lineHeight)};return document.body.removeChild(c),C}return fa.getCaretCoordinates=r,fa}var ha={},$p;function Rg(){if($p)return ha;$p=1;/*!
 * The MIT License
   Copyright (c) 2018 Dmitriy Kubyshkin
   Copied from https://github.com/grassator/insert-text-at-cursor
 */Object.defineProperty(ha,"__esModule",{value:!0}),ha.insertText=void 0;function i(t,r){if(t.focus(),document.selection){var o=document.selection.createRange();o.text=r,o.collapse(!1),o.select();return}var l=document.execCommand("insertText",!1,r);if(!l){var c=t.selectionStart,h=t.selectionEnd;if(typeof t.setRangeText=="function")t.setRangeText(r);else if(e(t)){var g=document.createTextNode(r),v=t.firstChild;if(!v)t.appendChild(g);else{for(var C=0,D=null,b=null,L=document.createRange();v&&(D===null||b===null);){var j=v.nodeValue.length;c>=C&&c<=C+j&&L.setStart(D=v,c-C),h>=C&&h<=C+j&&L.setEnd(b=v,h-C),C+=j,v=v.nextSibling}c!==h&&L.deleteContents(),L.insertNode(g)}}else{var x=t.value;t.value=x.slice(0,c)+r+x.slice(h)}t.setSelectionRange(c+r.length,c+r.length);var $=document.createEvent("UIEvent");$.initEvent("input",!0,!1),t.dispatchEvent($)}}ha.insertText=i;function e(t){if(t.nodeName!=="TEXTAREA")return!1;var r;if(typeof r>"u"){var o=document.createElement("textarea");o.value="1",r=!!o.firstChild}return r}return ha}var pa={},qp;function Xy(){if(qp)return pa;qp=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.mod=void 0;function i(e,t){return(e%t+t)%t}return pa.mod=i,pa}var ma={},Hp;function Dg(){if(Hp)return ma;Hp=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.SuggestionsDropdown=void 0;var i=dn(),e=ro(),t=function(r){var o=r.classes,l=r.suggestions,c=r.caret,h=r.onSuggestionSelected,g=r.suggestionsAutoplace,v=r.focusIndex,C=r.textAreaRef,D=function(U){U.preventDefault();var Y=parseInt(U.currentTarget.attributes["data-index"].value);h(Y)},b=function(U){return U.preventDefault()},L=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),j=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),x=c.left-C.current.scrollLeft,$=c.top-C.current.scrollTop,Q={};return g&&$+C.current.getBoundingClientRect().top>j/2?Q.bottom=C.current.offsetHeight-$:Q.top=$,g&&x+C.current.getBoundingClientRect().left>L/2?Q.right=C.current.offsetWidth-x:Q.left=x,i.createElement("ul",{className:e.classNames("mde-suggestions",o),style:Q},l.map(function(U,Y){return i.createElement("li",{onClick:D,onMouseDown:b,key:Y,"aria-selected":v===Y?"true":"false","data-index":""+Y},U.preview)}))};return ma.SuggestionsDropdown=t,ma}var Wp;function Yy(){if(Wp)return cr;Wp=1;var i=cr&&cr.__extends||function(){var v=function(C,D){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,L){b.__proto__=L}||function(b,L){for(var j in L)Object.prototype.hasOwnProperty.call(L,j)&&(b[j]=L[j])},v(C,D)};return function(C,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");v(C,D);function b(){this.constructor=C}C.prototype=D===null?Object.create(D):(b.prototype=D.prototype,new b)}}(),e=cr&&cr.__assign||function(){return e=Object.assign||function(v){for(var C,D=1,b=arguments.length;D<b;D++){C=arguments[D];for(var L in C)Object.prototype.hasOwnProperty.call(C,L)&&(v[L]=C[L])}return v},e.apply(this,arguments)};Object.defineProperty(cr,"__esModule",{value:!0}),cr.TextArea=void 0;var t=dn(),r=ro(),o=Qy(),l=Rg(),c=Xy(),h=Dg(),g=function(v){i(C,v);function C(D){var b=v.call(this,D)||this;return b.currentLoadSuggestionsPromise=Promise.resolve(void 0),b.suggestionsPromiseIndex=0,b.getTextArea=function(){return b.props.refObject.current},b.handleOnChange=function(L){var j=b.props.onChange;j(L.target.value)},b.handleBlur=function(){var L=b.state.mention;L&&b.setState({mention:{status:"inactive",suggestions:[]}})},b.startLoadingSuggestions=function(L){var j=++b.suggestionsPromiseIndex,x=b.props.loadSuggestions;b.currentLoadSuggestionsPromise=b.currentLoadSuggestionsPromise.then(function(){return x(L,b.state.mention.triggeredBy)}).then(function($){if(b.state.mention.status!=="inactive")return b.suggestionsPromiseIndex===j&&(!$||!$.length?b.setState({mention:{status:"inactive",suggestions:[]}}):b.setState({mention:e(e({},b.state.mention),{status:"active",suggestions:$,focusIndex:0})}),b.suggestionsPromiseIndex=0),Promise.resolve()})},b.loadEmptySuggestion=function(L,j){var x=o.getCaretCoordinates(L,j);b.startLoadingSuggestions(""),b.setState({mention:{status:"loading",startPosition:L.selectionStart+1,caret:x,suggestions:[],triggeredBy:j}})},b.handleSuggestionSelected=function(L){var j=b.state.mention;b.getTextArea().selectionStart=j.startPosition-1,b.props.value.substr(b.getTextArea().selectionStart,b.getTextArea().selectionEnd-b.getTextArea().selectionStart),l.insertText(b.getTextArea(),j.suggestions[L].value+" "),b.setState({mention:{status:"inactive",suggestions:[]}})},b.handleKeyDown=function(L){if(b.props.onPossibleKeyCommand){var j=b.props.onPossibleKeyCommand(L);if(j){L.preventDefault(),b.suggestionsPromiseIndex=0,b.setState({mention:{status:"inactive",suggestions:[]}});return}}if(b.suggestionsEnabled()){var x=L.key,$=L.shiftKey,Q=L.currentTarget,U=Q.selectionStart,Y=b.state.mention;switch(Y.status){case"loading":case"active":if(x==="Escape"||x==="Backspace"&&U<=b.state.mention.startPosition)b.suggestionsPromiseIndex=0,b.setState({mention:{status:"inactive",suggestions:[]}});else if(Y.status==="active"&&(x==="ArrowUp"||x==="ArrowDown")&&!$){L.preventDefault();var f=x==="ArrowUp"?-1:1;b.setState({mention:e(e({},Y),{focusIndex:c.mod(Y.focusIndex+f,Y.suggestions.length)})})}else x==="Enter"&&Y.status==="active"&&Y.suggestions.length&&(L.preventDefault(),b.handleSuggestionSelected(Y.focusIndex));break}}},b.handleKeyUp=function(L){var j=L.key,x=b.state.mention,$=b.props,Q=$.suggestionTriggerCharacters,U=$.value;switch(x.status){case"loading":case"active":if(j==="Backspace"){var Y=U.substr(x.startPosition,b.getTextArea().selectionStart-x.startPosition);b.startLoadingSuggestions(Y),x.status!=="loading"&&b.setState({mention:e(e({},b.state.mention),{status:"loading"})})}break;case"inactive":if(j==="Backspace"){var f=U.charAt(b.getTextArea().selectionStart-1),y=Q.includes(U.charAt(b.getTextArea().selectionStart-1));y&&b.loadEmptySuggestion(L.currentTarget,f)}break}},b.handleKeyPress=function(L){var j=b.props,x=j.suggestionTriggerCharacters,$=j.value,Q=b.state.mention,U=L.key;switch(Q.status){case"loading":case"active":if(U===" "){b.setState({mention:e(e({},b.state.mention),{status:"inactive"})});return}var Y=$.substr(Q.startPosition,b.getTextArea().selectionStart-Q.startPosition)+U;b.startLoadingSuggestions(Y),Q.status!=="loading"&&b.setState({mention:e(e({},b.state.mention),{status:"loading"})});break;case"inactive":if(x.indexOf(L.key)===-1||!/\s|\(|\[|^.{0}$/.test($.charAt(b.getTextArea().selectionStart-1)))return;b.loadEmptySuggestion(L.currentTarget,L.key);break}},b.state={mention:{status:"inactive",suggestions:[]}},b}return C.prototype.suggestionsEnabled=function(){return this.props.suggestionTriggerCharacters&&this.props.suggestionTriggerCharacters.length&&this.props.loadSuggestions},C.prototype.render=function(){var D=this,b=this.props,L=b.classes,j=b.readOnly,x=b.textAreaProps,$=b.height,Q=b.heightUnits,U=b.value,Y=b.suggestionTriggerCharacters,f=b.loadSuggestions,y=b.suggestionsDropdownClasses,_=b.textAreaComponent,E=b.onPaste,T=b.onDrop,k=Y&&Y.length&&f,I=this.state.mention,R=_||"textarea",V=$&&Q?$+Q:$;return t.createElement("div",{className:"mde-textarea-wrapper"},t.createElement(R,e({className:r.classNames("mde-text",L),style:{height:V},ref:this.props.refObject,readOnly:j,value:U,"data-testid":"text-area"},x,{onChange:function(A){var X;(X=x==null?void 0:x.onChange)===null||X===void 0||X.call(x,A),D.handleOnChange(A)},onBlur:function(A){var X;(X=x==null?void 0:x.onBlur)===null||X===void 0||X.call(x,A),k&&D.handleBlur()},onKeyDown:function(A){var X;(X=x==null?void 0:x.onKeyDown)===null||X===void 0||X.call(x,A),D.handleKeyDown(A)},onKeyUp:function(A){var X;(X=x==null?void 0:x.onKeyUp)===null||X===void 0||X.call(x,A),k&&D.handleKeyUp(A)},onKeyPress:function(A){var X;(X=x==null?void 0:x.onKeyPress)===null||X===void 0||X.call(x,A),k&&D.handleKeyPress(A)},onPaste:function(A){var X;(X=x==null?void 0:x.onPaste)===null||X===void 0||X.call(x,A),E(A)},onDragOver:function(A){A.preventDefault(),A.stopPropagation()},onDrop:function(A){var X;(X=x==null?void 0:x.onDrop)===null||X===void 0||X.call(x,A),T(A),A.preventDefault()}})),I.status==="active"&&I.suggestions.length&&t.createElement(h.SuggestionsDropdown,{classes:y,caret:I.caret,suggestions:I.suggestions,onSuggestionSelected:this.handleSuggestionSelected,suggestionsAutoplace:this.props.suggestionsAutoplace,focusIndex:I.focusIndex,textAreaRef:this.props.refObject}))},C}(t.Component);return cr.TextArea=g,cr}var dr={},Gp;function Jy(){if(Gp)return dr;Gp=1;var i=dr&&dr.__extends||function(){var h=function(g,v){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,D){C.__proto__=D}||function(C,D){for(var b in D)Object.prototype.hasOwnProperty.call(D,b)&&(C[b]=D[b])},h(g,v)};return function(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");h(g,v);function C(){this.constructor=g}g.prototype=v===null?Object.create(v):(C.prototype=v.prototype,new C)}}(),e=dr&&dr.__assign||function(){return e=Object.assign||function(h){for(var g,v=1,C=arguments.length;v<C;v++){g=arguments[v];for(var D in g)Object.prototype.hasOwnProperty.call(g,D)&&(h[D]=g[D])}return h},e.apply(this,arguments)};Object.defineProperty(dr,"__esModule",{value:!0}),dr.Toolbar=void 0;var t=dn(),r=ro(),o=Ag(),l=bg(),c=function(h){i(g,h);function g(){var v=h!==null&&h.apply(this,arguments)||this;return v.handleTabChange=function(C){var D=v.props.onTabChange;D(C)},v}return g.prototype.render=function(){var v=this,C=this.props.l18n,D=this.props,b=D.classes,L=D.children,j=D.buttons,x=D.onCommand,$=D.readOnly,Q=D.disablePreview,U=D.writeButtonProps,Y=D.previewButtonProps,f=D.buttonProps;if((!j||j.length===0)&&!L)return null;var y=t.createElement("div",{className:"mde-tabs"},t.createElement("button",e({type:"button",className:r.classNames({selected:this.props.tab==="write"}),onClick:function(){return v.handleTabChange("write")}},U),C.write),t.createElement("button",e({type:"button",className:r.classNames({selected:this.props.tab==="preview"}),onClick:function(){return v.handleTabChange("preview")}},Y),C.preview));return t.createElement("div",{className:r.classNames("mde-header",b)},!Q&&y,j.map(function(_,E){return t.createElement(o.ToolbarButtonGroup,{key:E,hidden:v.props.tab==="preview"},_.map(function(T,k){return t.createElement(l.ToolbarButton,{key:k,name:T.commandName,buttonContent:T.buttonContent,buttonProps:e(e({},f||{}),T.buttonProps),onClick:function(){return x(T.commandName)},readOnly:$,buttonComponentClass:T.buttonComponentClass})}))}))},g}(t.Component);return dr.Toolbar=c,dr}var Yt={},fr={},ga={},Kp;function Zy(){if(Kp)return ga;Kp=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.headerCommand=void 0;var i=An();function e(t,r,o){var l=i.selectWord({text:t.text,selection:t.selection}),c=r.setSelectionRange(l),h=r.replaceSelection(""+o+c.selectedText);r.setSelectionRange({start:h.selection.end-c.selectedText.length,end:h.selection.end})}return ga.headerCommand={buttonProps:{"aria-label":"Add header"},execute:function(t){var r=t.initialState,o=t.textApi;e(r,o,"### ")}},ga}var _a={},Qp;function e0(){if(Qp)return _a;Qp=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.boldCommand=void 0;var i=An();return _a.boldCommand={buttonProps:{"aria-label":"Add bold text"},execute:function(e){var t=e.initialState,r=e.textApi,o=i.selectWord({text:t.text,selection:t.selection}),l=r.setSelectionRange(o),c=r.replaceSelection("**"+l.selectedText+"**");r.setSelectionRange({start:c.selection.end-2-l.selectedText.length,end:c.selection.end-2})},handleKeyCommand:function(e){return(e.ctrlKey||e.metaKey)&&e.key=="b"}},_a}var va={},Xp;function t0(){if(Xp)return va;Xp=1,Object.defineProperty(va,"__esModule",{value:!0}),va.italicCommand=void 0;var i=An();return va.italicCommand={buttonProps:{"aria-label":"Add italic text"},execute:function(e){var t=e.initialState,r=e.textApi,o=i.selectWord({text:t.text,selection:t.selection}),l=r.setSelectionRange(o),c=r.replaceSelection("*"+l.selectedText+"*");r.setSelectionRange({start:c.selection.end-1-l.selectedText.length,end:c.selection.end-1})},handleKeyCommand:function(e){return(e.ctrlKey||e.metaKey)&&e.key=="i"}},va}var ya={},Yp;function n0(){if(Yp)return ya;Yp=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.strikeThroughCommand=void 0;var i=An();return ya.strikeThroughCommand={buttonProps:{"aria-label":"Add strikethrough text"},execute:function(e){var t=e.initialState,r=e.textApi,o=i.selectWord({text:t.text,selection:t.selection}),l=r.setSelectionRange(o),c=r.replaceSelection("~~"+l.selectedText+"~~");r.setSelectionRange({start:c.selection.end-2-l.selectedText.length,end:c.selection.end-2})}},ya}var wa={},Jp;function r0(){if(Jp)return wa;Jp=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.linkCommand=void 0;var i=An();return wa.linkCommand={buttonProps:{"aria-label":"Add a link"},execute:function(e){var t=e.initialState,r=e.textApi,o=i.selectWord({text:t.text,selection:t.selection}),l=r.setSelectionRange(o),c=r.replaceSelection("["+l.selectedText+"](url)");r.setSelectionRange({start:c.selection.end-6-l.selectedText.length,end:c.selection.end-6})},handleKeyCommand:function(e){return(e.ctrlKey||e.metaKey)&&e.key=="k"}},wa}var Ea={},Zp;function i0(){if(Zp)return Ea;Zp=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.quoteCommand=void 0;var i=An();return Ea.quoteCommand={buttonProps:{"aria-label":"Insert a quote"},execute:function(e){var t=e.initialState,r=e.textApi,o=i.selectWord({text:t.text,selection:t.selection}),l=r.setSelectionRange(o),c=i.getBreaksNeededForEmptyLineBefore(l.text,l.selection.start),h=Array(c+1).join(`
`),g=i.getBreaksNeededForEmptyLineAfter(l.text,l.selection.end),v=Array(g+1).join(`
`);r.replaceSelection(h+"> "+l.selectedText+v);var C=l.selection.start+c+2,D=C+l.selectedText.length;r.setSelectionRange({start:C,end:D})}},Ea}var Ta={},em;function s0(){if(em)return Ta;em=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.codeCommand=void 0;var i=An();return Ta.codeCommand={buttonProps:{"aria-label":"Insert code"},execute:function(e){var t=e.initialState,r=e.textApi,o=i.selectWord({text:t.text,selection:t.selection}),l=r.setSelectionRange(o);if(l.selectedText.indexOf(`
`)===-1){r.replaceSelection("`"+l.selectedText+"`");var c=l.selection.start+1,h=c+l.selectedText.length;r.setSelectionRange({start:c,end:h});return}var g=i.getBreaksNeededForEmptyLineBefore(l.text,l.selection.start),v=Array(g+1).join(`
`),C=i.getBreaksNeededForEmptyLineAfter(l.text,l.selection.end),D=Array(C+1).join(`
`);r.replaceSelection(v+"```\n"+l.selectedText+"\n```"+D);var b=l.selection.start+g+4,L=b+l.selectedText.length;r.setSelectionRange({start:b,end:L})}},Ta}var cd={},tm;function o0(){return tm||(tm=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.checkedListCommand=i.orderedListCommand=i.unorderedListCommand=i.makeList=i.insertBeforeEachLine=void 0;var e=An();function t(o,l){var c=o.split(/\n/),h=0,g=c.map(function(v,C){if(typeof l=="string")return h+=l.length,l+v;if(typeof l=="function"){var D=l(v,C);return h+=D.length,l(v,C)+v}throw Error("insertion is expected to be either a string or a function")}).join(`
`);return{modifiedText:g,insertionLength:h}}i.insertBeforeEachLine=t;var r=function(o,l,c){var h=e.selectWord({text:o.text,selection:o.selection}),g=l.setSelectionRange(h),v=e.getBreaksNeededForEmptyLineBefore(g.text,g.selection.start),C=Array(v+1).join(`
`),D=e.getBreaksNeededForEmptyLineAfter(g.text,g.selection.end),b=Array(D+1).join(`
`),L=t(g.selectedText,c);l.replaceSelection(""+C+L.modifiedText+b);var j=g.selectedText.indexOf(`
`)===-1?L.insertionLength:0,x=g.selection.start+v+j,$=x+L.modifiedText.length-j;l.setSelectionRange({start:x,end:$})};i.makeList=r,i.unorderedListCommand={buttonProps:{"aria-label":"Add unordered list"},execute:function(o){var l=o.initialState,c=o.textApi;i.makeList(l,c,"- ")}},i.orderedListCommand={buttonProps:{"aria-label":"Add ordered list"},execute:function(o){var l=o.initialState,c=o.textApi;i.makeList(l,c,function(h,g){return g+1+". "})}},i.checkedListCommand={buttonProps:{"aria-label":"Add checked list"},execute:function(o){var l=o.initialState,c=o.textApi;i.makeList(l,c,function(h,g){return"- [ ] "})}}}(cd)),cd}var Sa={},nm;function a0(){if(nm)return Sa;nm=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.imageCommand=void 0;var i=An();return Sa.imageCommand={buttonProps:{"aria-label":"Add image"},execute:function(e){var t=e.initialState,r=e.textApi,o=r.setSelectionRange(i.selectWord({text:t.text,selection:t.selection})),l=o.selectedText||"https://example.com/your-image.png";r.replaceSelection("![]("+l+")"),r.setSelectionRange({start:o.selection.start+4,end:o.selection.start+4+l.length})}},Sa}var hr={},pr={},rm;function u0(){if(rm)return pr;rm=1;var i=pr&&pr.__awaiter||function(r,o,l,c){function h(g){return g instanceof l?g:new l(function(v){v(g)})}return new(l||(l=Promise))(function(g,v){function C(L){try{b(c.next(L))}catch(j){v(j)}}function D(L){try{b(c.throw(L))}catch(j){v(j)}}function b(L){L.done?g(L.value):h(L.value).then(C,D)}b((c=c.apply(r,o||[])).next())})},e=pr&&pr.__generator||function(r,o){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,h,g,v;return v={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function C(b){return function(L){return D([b,L])}}function D(b){if(c)throw new TypeError("Generator is already executing.");for(;l;)try{if(c=1,h&&(g=b[0]&2?h.return:b[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,b[1])).done)return g;switch(h=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return l.label++,{value:b[1],done:!1};case 5:l.label++,h=b[1],b=[0];continue;case 7:b=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){l=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){l.label=b[1];break}if(b[0]===6&&l.label<g[1]){l.label=g[1],g=b;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(b);break}g[2]&&l.ops.pop(),l.trys.pop();continue}b=o.call(r,l)}catch(L){b=[6,L],h=0}finally{c=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}};Object.defineProperty(pr,"__esModule",{value:!0}),pr.readFileAsync=void 0;function t(r){return i(this,void 0,void 0,function(){return e(this,function(o){return[2,new Promise(function(l,c){var h=new FileReader;h.onload=function(){if(typeof h.result=="string")throw new Error("reader.result is expected to be an ArrayBuffer");l(h.result)},h.onerror=c,h.readAsArrayBuffer(r)})]})})}return pr.readFileAsync=t,pr}var im;function l0(){if(im)return hr;im=1;var i=hr&&hr.__awaiter||function(v,C,D,b){function L(j){return j instanceof D?j:new D(function(x){x(j)})}return new(D||(D=Promise))(function(j,x){function $(Y){try{U(b.next(Y))}catch(f){x(f)}}function Q(Y){try{U(b.throw(Y))}catch(f){x(f)}}function U(Y){Y.done?j(Y.value):L(Y.value).then($,Q)}U((b=b.apply(v,C||[])).next())})},e=hr&&hr.__generator||function(v,C){var D={label:0,sent:function(){if(j[0]&1)throw j[1];return j[1]},trys:[],ops:[]},b,L,j,x;return x={next:$(0),throw:$(1),return:$(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function $(U){return function(Y){return Q([U,Y])}}function Q(U){if(b)throw new TypeError("Generator is already executing.");for(;D;)try{if(b=1,L&&(j=U[0]&2?L.return:U[0]?L.throw||((j=L.return)&&j.call(L),0):L.next)&&!(j=j.call(L,U[1])).done)return j;switch(L=0,j&&(U=[U[0]&2,j.value]),U[0]){case 0:case 1:j=U;break;case 4:return D.label++,{value:U[1],done:!1};case 5:D.label++,L=U[1],U=[0];continue;case 7:U=D.ops.pop(),D.trys.pop();continue;default:if(j=D.trys,!(j=j.length>0&&j[j.length-1])&&(U[0]===6||U[0]===2)){D=0;continue}if(U[0]===3&&(!j||U[1]>j[0]&&U[1]<j[3])){D.label=U[1];break}if(U[0]===6&&D.label<j[1]){D.label=j[1],j=U;break}if(j&&D.label<j[2]){D.label=j[2],D.ops.push(U);break}j[2]&&D.ops.pop(),D.trys.pop();continue}U=C.call(v,D)}catch(Y){U=[6,Y],L=0}finally{b=j=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}};Object.defineProperty(hr,"__esModule",{value:!0}),hr.saveImageCommand=void 0;var t=u0(),r=An();function o(v){var C=[];for(var D in v){var b=v[D];b.kind==="file"&&C.push(b.getAsFile())}return C}function l(v){for(var C=[],D=0;D<v.length;D++)C.push(v[0]);return C}function c(v,C){var D=C.multiple,b=C.accept,L=v;if(D||(L=L.slice(0,1)),b){var j=b.split(","),x=new Set(j.filter(function(U){return/^\.\w+/.test(U)}).map(function(U){return U.split(".")[1]})),$=new Set(j.filter(function(U){return/^[-\w.]+\/[-\w.]+$/.test(U)})),Q=new Set(j.filter(function(U){return/(audio|video|image)\/\*/.test(U)}).map(function(U){return U.split("/")[0]}));L=L.filter(function(U){return x.has(U.name.split(".")[1])||$.has(U.type)||Q.has(U.type.split("/")[0])})}return L}hr.saveImageCommand={execute:function(v){v.initialState;var C=v.textApi,D=v.context,b=v.l18n;return i(this,void 0,void 0,function(){var L,j,x,$,Q,U,Y,f,y,_,E,T,k,I,R,V,A,X,ee,F,O,W,te,he;return e(this,function(H){switch(H.label){case 0:if(!D)throw new Error("wrong context");L=D,j=L.event,x=L.pasteOptions,$=x.saveImage,Q=x.multiple,U=x.accept,Y=h(D)?o(j.clipboardData.items):g(D)?o(j.dataTransfer.items):l(j.target.files),f=c(Y,{multiple:Q,accept:U}),y=[];for(_ in f)y.push(_);E=0,H.label=1;case 1:return E<y.length?(T=y[E],k=C.getState(),I=r.getBreaksNeededForEmptyLineBefore(k.text,k.selection.start),R=Array(I+1).join(`
`),V=R+"!["+b.uploadingImage+"]()",C.replaceSelection(V),A=Y[T],[4,t.readFileAsync(A)]):[3,5];case 2:return X=H.sent(),ee=$(X,A),[4,ee.next()];case 3:F=H.sent().value,O=C.getState(),W=O.text.substr(k.selection.start,V.length),W===V&&(C.setSelectionRange({start:k.selection.start,end:k.selection.start+V.length}),te=F?R+"![image]("+F+")":"",he=te.length-V.length,C.replaceSelection(te),C.setSelectionRange({start:O.selection.start+he,end:O.selection.end+he})),H.label=4;case 4:return E++,[3,1];case 5:return[2]}})})}};function h(v){return v.event.clipboardData!==void 0}function g(v){return v.event.dataTransfer!==void 0}return hr}var sm;function Kd(){if(sm)return fr;sm=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.getDefaultSaveImageCommandName=fr.getDefaultCommandMap=fr.getDefaultToolbarCommands=void 0;var i=Zy(),e=e0(),t=t0(),r=n0(),o=r0(),l=i0(),c=s0(),h=o0(),g=a0(),v=l0();function C(){return[["header","bold","italic","strikethrough"],["link","quote","code","image"],["unordered-list","ordered-list","checked-list"]]}fr.getDefaultToolbarCommands=C;function D(){return{header:i.headerCommand,bold:e.boldCommand,italic:t.italicCommand,strikethrough:r.strikeThroughCommand,link:o.linkCommand,quote:l.quoteCommand,code:c.codeCommand,image:g.imageCommand,"unordered-list":h.unorderedListCommand,"ordered-list":h.orderedListCommand,"checked-list":h.checkedListCommand,"save-image":v.saveImageCommand}}fr.getDefaultCommandMap=D;function b(){return"save-image"}return fr.getDefaultSaveImageCommandName=b,fr}var Ia={},om;function c0(){return om||(om=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.enL18n=void 0,Ia.enL18n={write:"Write",preview:"Preview",uploadingImage:"Uploading image...",pasteDropSelect:"Attach files by dragging & dropping, selecting or pasting them."}),Ia}var Bi={},ka={},am;function d0(){if(am)return ka;am=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.SvgIcon=void 0;var i=dn(),e=i.createElement("svg",{className:"svg-icon","aria-hidden":"true","data-prefix":"fas","data-icon":"tasks",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},i.createElement("path",{fill:"currentColor",d:"M208 132h288c8.8 0 16-7.2 16-16V76c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16zm0 160h288c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16zm0 160h288c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16zM64 368c-26.5 0-48.6 21.5-48.6 48s22.1 48 48.6 48 48-21.5 48-48-21.5-48-48-48zm92.5-299l-72.2 72.2-15.6 15.6c-4.7 4.7-12.9 4.7-17.6 0L3.5 109.4c-4.7-4.7-4.7-12.3 0-17l15.7-15.7c4.7-4.7 12.3-4.7 17 0l22.7 22.1 63.7-63.3c4.7-4.7 12.3-4.7 17 0l17 16.5c4.6 4.7 4.6 12.3-.1 17zm0 159.6l-72.2 72.2-15.7 15.7c-4.7 4.7-12.9 4.7-17.6 0L3.5 269c-4.7-4.7-4.7-12.3 0-17l15.7-15.7c4.7-4.7 12.3-4.7 17 0l22.7 22.1 63.7-63.7c4.7-4.7 12.3-4.7 17 0l17 17c4.6 4.6 4.6 12.2-.1 16.9z"})),t=i.createElement("svg",{className:"svg-icon","aria-hidden":"true","data-prefix":"fas","data-icon":"list-ol",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},i.createElement("path",{fill:"currentColor",d:"M3.263 139.527c0-7.477 3.917-11.572 11.573-11.572h15.131V88.078c0-5.163.534-10.503.534-10.503h-.356s-1.779 2.67-2.848 3.738c-4.451 4.273-10.504 4.451-15.666-1.068l-5.518-6.231c-5.342-5.341-4.984-11.216.534-16.379l21.72-19.938C32.815 33.602 36.732 32 42.785 32H54.89c7.656 0 11.749 3.916 11.749 11.572v84.384h15.488c7.655 0 11.572 4.094 11.572 11.572v8.901c0 7.477-3.917 11.572-11.572 11.572H14.836c-7.656 0-11.573-4.095-11.573-11.572v-8.902zM2.211 304.591c0-47.278 50.955-56.383 50.955-69.165 0-7.18-5.954-8.755-9.28-8.755-3.153 0-6.479 1.051-9.455 3.852-5.079 4.903-10.507 7.004-16.111 2.451l-8.579-6.829c-5.779-4.553-7.18-9.805-2.803-15.409C13.592 201.981 26.025 192 47.387 192c19.437 0 44.476 10.506 44.476 39.573 0 38.347-46.753 46.402-48.679 56.909h39.049c7.529 0 11.557 4.027 11.557 11.382v8.755c0 7.354-4.028 11.382-11.557 11.382h-67.94c-7.005 0-12.083-4.028-12.083-11.382v-4.028zM5.654 454.61l5.603-9.28c3.853-6.654 9.105-7.004 15.584-3.152 4.903 2.101 9.63 3.152 14.359 3.152 10.155 0 14.358-3.502 14.358-8.23 0-6.654-5.604-9.106-15.934-9.106h-4.728c-5.954 0-9.28-2.101-12.258-7.88l-1.05-1.926c-2.451-4.728-1.226-9.806 2.801-14.884l5.604-7.004c6.829-8.405 12.257-13.483 12.257-13.483v-.35s-4.203 1.051-12.608 1.051H16.685c-7.53 0-11.383-4.028-11.383-11.382v-8.755c0-7.53 3.853-11.382 11.383-11.382h58.484c7.529 0 11.382 4.027 11.382 11.382v3.327c0 5.778-1.401 9.806-5.079 14.183l-17.509 20.137c19.611 5.078 28.716 20.487 28.716 34.845 0 21.363-14.358 44.126-48.503 44.126-16.636 0-28.192-4.728-35.896-9.455-5.779-4.202-6.304-9.805-2.626-15.934zM144 132h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"})),r=i.createElement("svg",{className:"svg-icon","aria-hidden":"true","data-prefix":"fas","data-icon":"list-ul",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},i.createElement("path",{fill:"currentColor",d:"M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"})),o=i.createElement("svg",{className:"svg-icon","aria-hidden":"true","data-prefix":"fas","data-icon":"image",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},i.createElement("path",{fill:"currentColor",d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"})),l=i.createElement("svg",{className:"svg-icon","aria-hidden":"true","data-prefix":"fas","data-icon":"code",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512","data-fa-i2svg":""},i.createElement("path",{fill:"currentColor",d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"})),c=i.createElement("svg",{className:"svg-icon","aria-hidden":"true","data-prefix":"fas","data-icon":"quote-right",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},i.createElement("path",{fill:"currentColor",d:"M512 80v128c0 137.018-63.772 236.324-193.827 271.172-15.225 4.08-30.173-7.437-30.173-23.199v-33.895c0-10.057 6.228-19.133 15.687-22.55C369.684 375.688 408 330.054 408 256h-72c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h128c26.51 0 48 21.49 48 48zM176 32H48C21.49 32 0 53.49 0 80v128c0 26.51 21.49 48 48 48h72c0 74.054-38.316 119.688-104.313 143.528C6.228 402.945 0 412.021 0 422.078v33.895c0 15.762 14.948 27.279 30.173 23.199C160.228 444.324 224 345.018 224 208V80c0-26.51-21.49-48-48-48z"})),h=i.createElement("svg",{className:"svg-icon","aria-hidden":"true","data-prefix":"fas","data-icon":"link",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},i.createElement("path",{fill:"currentColor",d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"})),g=i.createElement("svg",{className:"svg-icon","aria-hidden":"true","data-prefix":"fas","data-icon":"strikethrough",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},i.createElement("path",{fill:"currentColor",d:"M496 288H16c-8.837 0-16-7.163-16-16v-32c0-8.837 7.163-16 16-16h480c8.837 0 16 7.163 16 16v32c0 8.837-7.163 16-16 16zm-214.666 16c27.258 12.937 46.524 28.683 46.524 56.243 0 33.108-28.977 53.676-75.621 53.676-32.325 0-76.874-12.08-76.874-44.271V368c0-8.837-7.164-16-16-16H113.75c-8.836 0-16 7.163-16 16v19.204c0 66.845 77.717 101.82 154.487 101.82 88.578 0 162.013-45.438 162.013-134.424 0-19.815-3.618-36.417-10.143-50.6H281.334zm-30.952-96c-32.422-13.505-56.836-28.946-56.836-59.683 0-33.92 30.901-47.406 64.962-47.406 42.647 0 64.962 16.593 64.962 32.985V136c0 8.837 7.164 16 16 16h45.613c8.836 0 16-7.163 16-16v-30.318c0-52.438-71.725-79.875-142.575-79.875-85.203 0-150.726 40.972-150.726 125.646 0 22.71 4.665 41.176 12.777 56.547h129.823z"})),v=i.createElement("svg",{className:"svg-icon","aria-hidden":"true","data-prefix":"fas","data-icon":"italic",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512","data-fa-i2svg":""},i.createElement("path",{fill:"currentColor",d:"M204.758 416h-33.849l62.092-320h40.725a16 16 0 0 0 15.704-12.937l6.242-32C297.599 41.184 290.034 32 279.968 32H120.235a16 16 0 0 0-15.704 12.937l-6.242 32C96.362 86.816 103.927 96 113.993 96h33.846l-62.09 320H46.278a16 16 0 0 0-15.704 12.935l-6.245 32C22.402 470.815 29.967 480 40.034 480h158.479a16 16 0 0 0 15.704-12.935l6.245-32c1.927-9.88-5.638-19.065-15.704-19.065z"})),C=i.createElement("svg",{className:"svg-icon","aria-hidden":"true","data-prefix":"fas","data-icon":"heading",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},i.createElement("path",{fill:"currentColor",d:"M496 80V48c0-8.837-7.163-16-16-16H320c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h37.621v128H154.379V96H192c8.837 0 16-7.163 16-16V48c0-8.837-7.163-16-16-16H32c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h37.275v320H32c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h160c8.837 0 16-7.163 16-16v-32c0-8.837-7.163-16-16-16h-37.621V288H357.62v128H320c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h160c8.837 0 16-7.163 16-16v-32c0-8.837-7.163-16-16-16h-37.275V96H480c8.837 0 16-7.163 16-16z"})),D=i.createElement("svg",{className:"svg-icon","aria-hidden":"true","data-prefix":"fas","data-icon":"bold",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512","data-fa-i2svg":""},i.createElement("path",{fill:"currentColor",d:"M304.793 243.891c33.639-18.537 53.657-54.16 53.657-95.693 0-48.236-26.25-87.626-68.626-104.179C265.138 34.01 240.849 32 209.661 32H24c-8.837 0-16 7.163-16 16v33.049c0 8.837 7.163 16 16 16h33.113v318.53H24c-8.837 0-16 7.163-16 16V464c0 8.837 7.163 16 16 16h195.69c24.203 0 44.834-1.289 66.866-7.584C337.52 457.193 376 410.647 376 350.014c0-52.168-26.573-91.684-71.207-106.123zM142.217 100.809h67.444c16.294 0 27.536 2.019 37.525 6.717 15.828 8.479 24.906 26.502 24.906 49.446 0 35.029-20.32 56.79-53.029 56.79h-76.846V100.809zm112.642 305.475c-10.14 4.056-22.677 4.907-31.409 4.907h-81.233V281.943h84.367c39.645 0 63.057 25.38 63.057 63.057.001 28.425-13.66 52.483-34.782 61.284z"})),b=function(L){var j=L.icon;switch(j){case"header":return C;case"bold":return D;case"italic":return v;case"strikethrough":return g;case"link":return h;case"quote":return c;case"code":return l;case"image":return o;case"unordered-list":return r;case"ordered-list":return t;case"checked-list":return e;default:return null}};return ka.SvgIcon=b,ka}var um;function Ng(){return um||(um=1,function(i){var e=Bi&&Bi.__createBinding||(Object.create?function(r,o,l,c){c===void 0&&(c=l),Object.defineProperty(r,c,{enumerable:!0,get:function(){return o[l]}})}:function(r,o,l,c){c===void 0&&(c=l),r[c]=o[l]}),t=Bi&&Bi.__exportStar||function(r,o){for(var l in r)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,r,l)};Object.defineProperty(i,"__esModule",{value:!0}),t(Pg(),i),t(d0(),i)}(Bi)),Bi}var Ft={},Ca={},lm;function f0(){if(lm)return Ca;lm=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.extractKeyActivatedCommands=void 0;function i(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&e[r].handleKeyCommand&&t.push(r);return t}return Ca.extractKeyActivatedCommands=i,Ca}var cm;function h0(){if(cm)return Ft;cm=1;var i=Ft&&Ft.__assign||function(){return i=Object.assign||function(C){for(var D,b=1,L=arguments.length;b<L;b++){D=arguments[b];for(var j in D)Object.prototype.hasOwnProperty.call(D,j)&&(C[j]=D[j])}return C},i.apply(this,arguments)},e=Ft&&Ft.__awaiter||function(C,D,b,L){function j(x){return x instanceof b?x:new b(function($){$(x)})}return new(b||(b=Promise))(function(x,$){function Q(f){try{Y(L.next(f))}catch(y){$(y)}}function U(f){try{Y(L.throw(f))}catch(y){$(y)}}function Y(f){f.done?x(f.value):j(f.value).then(Q,U)}Y((L=L.apply(C,D||[])).next())})},t=Ft&&Ft.__generator||function(C,D){var b={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},L,j,x,$;return $={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function Q(Y){return function(f){return U([Y,f])}}function U(Y){if(L)throw new TypeError("Generator is already executing.");for(;b;)try{if(L=1,j&&(x=Y[0]&2?j.return:Y[0]?j.throw||((x=j.return)&&x.call(j),0):j.next)&&!(x=x.call(j,Y[1])).done)return x;switch(j=0,x&&(Y=[Y[0]&2,x.value]),Y[0]){case 0:case 1:x=Y;break;case 4:return b.label++,{value:Y[1],done:!1};case 5:b.label++,j=Y[1],Y=[0];continue;case 7:Y=b.ops.pop(),b.trys.pop();continue;default:if(x=b.trys,!(x=x.length>0&&x[x.length-1])&&(Y[0]===6||Y[0]===2)){b=0;continue}if(Y[0]===3&&(!x||Y[1]>x[0]&&Y[1]<x[3])){b.label=Y[1];break}if(Y[0]===6&&b.label<x[1]){b.label=x[1],x=Y;break}if(x&&b.label<x[2]){b.label=x[2],b.ops.push(Y);break}x[2]&&b.ops.pop(),b.trys.pop();continue}Y=D.call(C,b)}catch(f){Y=[6,f],j=0}finally{L=x=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.CommandOrchestrator=Ft.getStateFromTextArea=Ft.TextAreaTextApi=void 0;var r=Vg(),o=Rg(),l=f0(),c=Kd(),h=function(){function C(D){this.textAreaRef=D}return C.prototype.replaceSelection=function(D){var b=this.textAreaRef.current;return o.insertText(b,D),g(b)},C.prototype.setSelectionRange=function(D){var b=this.textAreaRef.current;return b.focus(),b.selectionStart=D.start,b.selectionEnd=D.end,g(b)},C.prototype.getState=function(){var D=this.textAreaRef.current;return g(D)},C}();Ft.TextAreaTextApi=h;function g(C){return{selection:{start:C.selectionStart,end:C.selectionEnd},text:C.value,selectedText:C.value.slice(C.selectionStart,C.selectionEnd)}}Ft.getStateFromTextArea=g;var v=function(){function C(D,b,L,j){var x=this;if(this.getCommand=function($){var Q=x.commandMap[$];if(!Q)throw new Error("Cannot execute command. Command not found: "+$);return Q},this.handlePossibleKeyCommand=function($){for(var Q=0,U=x.keyActivatedCommands;Q<U.length;Q++){var Y=U[Q];if(x.getCommand(Y).handleKeyCommand($))return x.executeCommand(Y).then(function(f){}),!0}return!1},j&&!j.saveImage)throw new Error("paste options are incomplete. saveImage are required ");this.commandMap=i(i({},r.getDefaultCommandMap()),D||{}),this.pasteOptions=j,this.keyActivatedCommands=l.extractKeyActivatedCommands(D),this.textAreaRef=b,this.textApi=new h(b),this.l18n=L}return C.prototype.executeCommand=function(D,b){return e(this,void 0,void 0,function(){var L,j;return t(this,function(x){switch(x.label){case 0:return this.isExecuting?[2]:(this.isExecuting=!0,L=this.commandMap[D],j=L.execute({initialState:g(this.textAreaRef.current),textApi:this.textApi,l18n:this.l18n,context:b}),[4,j]);case 1:return x.sent(),this.isExecuting=!1,[2]}})})},C.prototype.executePasteCommand=function(D){return e(this,void 0,void 0,function(){return t(this,function(b){return this.pasteOptions?[2,this.executeCommand(this.pasteOptions.command||c.getDefaultSaveImageCommandName(),{pasteOptions:this.pasteOptions,event:D})]:[2]})})},C.prototype.executeDropCommand=function(D){return e(this,void 0,void 0,function(){return t(this,function(b){return this.pasteOptions?[2,this.executeCommand(this.pasteOptions.command||c.getDefaultSaveImageCommandName(),{pasteOptions:this.pasteOptions,event:D})]:[2]})})},C.prototype.executeSelectImageCommand=function(D){return e(this,void 0,void 0,function(){return t(this,function(b){return this.pasteOptions?[2,this.executeCommand(this.pasteOptions.command||c.getDefaultSaveImageCommandName(),{pasteOptions:this.pasteOptions,event:D})]:[2]})})},C.prototype.getCommandByName=function(D){return this.commandMap[D]},C}();return Ft.CommandOrchestrator=v,Ft}var dm;function p0(){if(dm)return Yt;dm=1;var i=Yt&&Yt.__extends||function(){var L=function(j,x){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,Q){$.__proto__=Q}||function($,Q){for(var U in Q)Object.prototype.hasOwnProperty.call(Q,U)&&($[U]=Q[U])},L(j,x)};return function(j,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");L(j,x);function $(){this.constructor=j}j.prototype=x===null?Object.create(x):($.prototype=x.prototype,new $)}}(),e=Yt&&Yt.__assign||function(){return e=Object.assign||function(L){for(var j,x=1,$=arguments.length;x<$;x++){j=arguments[x];for(var Q in j)Object.prototype.hasOwnProperty.call(j,Q)&&(L[Q]=j[Q])}return L},e.apply(this,arguments)},t=Yt&&Yt.__awaiter||function(L,j,x,$){function Q(U){return U instanceof x?U:new x(function(Y){Y(U)})}return new(x||(x=Promise))(function(U,Y){function f(E){try{_($.next(E))}catch(T){Y(T)}}function y(E){try{_($.throw(E))}catch(T){Y(T)}}function _(E){E.done?U(E.value):Q(E.value).then(f,y)}_(($=$.apply(L,j||[])).next())})},r=Yt&&Yt.__generator||function(L,j){var x={label:0,sent:function(){if(U[0]&1)throw U[1];return U[1]},trys:[],ops:[]},$,Q,U,Y;return Y={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function f(_){return function(E){return y([_,E])}}function y(_){if($)throw new TypeError("Generator is already executing.");for(;x;)try{if($=1,Q&&(U=_[0]&2?Q.return:_[0]?Q.throw||((U=Q.return)&&U.call(Q),0):Q.next)&&!(U=U.call(Q,_[1])).done)return U;switch(Q=0,U&&(_=[_[0]&2,U.value]),_[0]){case 0:case 1:U=_;break;case 4:return x.label++,{value:_[1],done:!1};case 5:x.label++,Q=_[1],_=[0];continue;case 7:_=x.ops.pop(),x.trys.pop();continue;default:if(U=x.trys,!(U=U.length>0&&U[U.length-1])&&(_[0]===6||_[0]===2)){x=0;continue}if(_[0]===3&&(!U||_[1]>U[0]&&_[1]<U[3])){x.label=_[1];break}if(_[0]===6&&x.label<U[1]){x.label=U[1],U=_;break}if(U&&x.label<U[2]){x.label=U[2],x.ops.push(_);break}U[2]&&x.ops.pop(),x.trys.pop();continue}_=j.call(L,x)}catch(E){_=[6,E],Q=0}finally{$=U=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.ReactMde=void 0;var o=dn(),l=Mg(),c=Kd(),h=c0(),g=Ng(),v=ro(),C=h0(),D={accept:"image/*",multiple:!1},b=function(L){i(j,L);function j(x){var $,Q=L.call(this,x)||this;Q.handleTextChange=function(Y){var f=Q.props.onChange;f(Y)},Q.handlePaste=function(Y){return t(Q,void 0,void 0,function(){var f;return r(this,function(y){switch(y.label){case 0:return f=this.props.paste,!f||!f.saveImage?[2]:[4,this.commandOrchestrator.executePasteCommand(Y)];case 1:return y.sent(),[2]}})})},Q.handleDrop=function(Y){return t(Q,void 0,void 0,function(){var f;return r(this,function(y){switch(y.label){case 0:return f=this.props.paste,!f||!f.saveImage?[2]:[4,this.commandOrchestrator.executeDropCommand(Y)];case 1:return y.sent(),[2]}})})},Q.handleImageSelection=function(Y){return t(Q,void 0,void 0,function(){var f;return r(this,function(y){switch(y.label){case 0:return f=this.props.paste,!f||!f.saveImage?[2]:[4,this.commandOrchestrator.executeSelectImageCommand(Y)];case 1:return y.sent(),[2]}})})},Q.handleTabChange=function(Y){var f=Q.props.onTabChange;f(Y)},Q.handleCommand=function(Y){return t(Q,void 0,void 0,function(){return r(this,function(f){switch(f.label){case 0:return[4,this.commandOrchestrator.executeCommand(Y)];case 1:return f.sent(),[2]}})})},Q.finalRefs=e({},x.refs||{}),Q.finalRefs.textarea||(Q.finalRefs.textarea=o.createRef()),Q.finalRefs.preview||(Q.finalRefs.preview=o.createRef()),Q.commandOrchestrator=new C.CommandOrchestrator(Q.props.commands,Q.finalRefs.textarea,Q.props.l18n,Q.props.paste?e(e({},D),Q.props.paste):void 0);var U=Math.min(x.maxEditorHeight,x.minEditorHeight);return Q.state={editorHeight:($=x.initialEditorHeight)!==null&&$!==void 0?$:U},Q}return j.prototype.render=function(){var x=this,$,Q,U=this.props,Y=U.getIcon,f=U.toolbarCommands,y=U.classes,_=U.loadingPreview,E=U.readOnly,T=U.disablePreview,k=U.value,I=U.l18n,R=U.minPreviewHeight,V=U.heightUnits,A=U.childProps,X=U.selectedTab,ee=U.generateMarkdownPreview,F=U.loadSuggestions,O=U.suggestionTriggerCharacters,W=U.textAreaComponent,te=A||{},he=f.map(function(H){return H.map(function(ae){var ne=x.commandOrchestrator.getCommand(ae);return{commandName:ae,buttonContent:ne.icon?ne.icon(Y):Y(ae),buttonProps:ne.buttonProps,buttonComponentClass:ne.buttonComponentClass}})});return o.createElement("div",{className:v.classNames("react-mde","react-mde-tabbed-layout",y==null?void 0:y.reactMde)},o.createElement(l.Toolbar,{classes:y==null?void 0:y.toolbar,buttons:he,onCommand:this.handleCommand,onTabChange:this.handleTabChange,tab:X,readOnly:E,disablePreview:T,l18n:I,buttonProps:te.commandButtons,writeButtonProps:te.writeButton,previewButtonProps:te.previewButton}),o.createElement("div",{className:v.classNames({invisible:X!=="write"})},o.createElement(l.TextArea,{classes:y==null?void 0:y.textArea,suggestionsDropdownClasses:y==null?void 0:y.suggestionsDropdown,suggestionsAutoplace:this.props.suggestionsAutoplace,refObject:this.finalRefs.textarea,onChange:this.handleTextChange,onPaste:this.handlePaste,onDrop:this.handleDrop,readOnly:E,textAreaComponent:W,textAreaProps:A&&A.textArea,height:this.state.editorHeight,heightUnits:this.props.heightUnits,value:k,suggestionTriggerCharacters:O,loadSuggestions:F,onPossibleKeyCommand:this.commandOrchestrator.handlePossibleKeyCommand}),this.props.paste&&o.createElement("label",{className:v.classNames("image-tip")},o.createElement("input",{className:v.classNames("image-input"),type:"file",accept:($=this.props.paste.accept)!==null&&$!==void 0?$:D.accept,multiple:(Q=this.props.paste.multiple)!==null&&Q!==void 0?Q:D.multiple,onChange:this.handleImageSelection}),o.createElement("span",null,I.pasteDropSelect))),X!=="write"&&o.createElement(l.Preview,{classes:y==null?void 0:y.preview,refObject:this.finalRefs.preview,loadingPreview:_,minHeight:R,heightUnits:V,generateMarkdownPreview:ee,markdown:k}))},j.defaultProps={commands:c.getDefaultCommandMap(),toolbarCommands:c.getDefaultToolbarCommands(),getIcon:function(x){return o.createElement(g.SvgIcon,{icon:x})},readOnly:!1,l18n:h.enL18n,minEditorHeight:200,maxEditorHeight:500,minPreviewHeight:200,heightUnits:"px",selectedTab:"write",disablePreview:!1,suggestionTriggerCharacters:["@"],suggestionsAutoplace:!1},j}(o.Component);return Yt.ReactMde=b,Yt}var fm;function Mg(){return fm||(fm=1,function(i){var e=Fi&&Fi.__createBinding||(Object.create?function(r,o,l,c){c===void 0&&(c=l),Object.defineProperty(r,c,{enumerable:!0,get:function(){return o[l]}})}:function(r,o,l,c){c===void 0&&(c=l),r[c]=o[l]}),t=Fi&&Fi.__exportStar||function(r,o){for(var l in r)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,r,l)};Object.defineProperty(i,"__esModule",{value:!0}),t(Ag(),i),t(bg(),i),t(Pg(),i),t(Ky(),i),t(Yy(),i),t(Jy(),i),t(p0(),i),t(Dg(),i)}(Fi)),Fi}var hm;function Vg(){return hm||(hm=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.getDefaultToolbarCommands=i.getDefaultCommandMap=i.MdeFontAwesomeIcon=i.SvgIcon=i.MarkdownUtil=i.ToolbarButtonGroup=i.Toolbar=i.Preview=i.SuggestionsDropdown=i.TextArea=void 0;var e=An();i.MarkdownUtil=e;var t=Mg();Object.defineProperty(i,"TextArea",{enumerable:!0,get:function(){return t.TextArea}}),Object.defineProperty(i,"SuggestionsDropdown",{enumerable:!0,get:function(){return t.SuggestionsDropdown}}),Object.defineProperty(i,"Preview",{enumerable:!0,get:function(){return t.Preview}}),Object.defineProperty(i,"Toolbar",{enumerable:!0,get:function(){return t.Toolbar}}),Object.defineProperty(i,"ToolbarButtonGroup",{enumerable:!0,get:function(){return t.ToolbarButtonGroup}});var r=Ng();Object.defineProperty(i,"SvgIcon",{enumerable:!0,get:function(){return r.SvgIcon}}),Object.defineProperty(i,"MdeFontAwesomeIcon",{enumerable:!0,get:function(){return r.MdeFontAwesomeIcon}});var o=Kd();Object.defineProperty(i,"getDefaultCommandMap",{enumerable:!0,get:function(){return o.getDefaultCommandMap}}),Object.defineProperty(i,"getDefaultToolbarCommands",{enumerable:!0,get:function(){return o.getDefaultToolbarCommands}}),i.default=t.ReactMde}(ld)),ld}var m0=Vg();const g0=Wa(m0);var il={exports:{}},_0=il.exports,pm;function v0(){return pm||(pm=1,function(i){(function(){function e(f){var y={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,description:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,description:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,description:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,description:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",description:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,description:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,description:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,description:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,description:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,description:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},completeHTMLDocument:{defaultValue:!1,description:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,description:"Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,description:"Split adjacent blockquote blocks",type:"boolean"}};if(f===!1)return JSON.parse(JSON.stringify(y));var _={};for(var E in y)y.hasOwnProperty(E)&&(_[E]=y[E].defaultValue);return _}function t(){var f=e(!0),y={};for(var _ in f)f.hasOwnProperty(_)&&(y[_]=!0);return y}var r={},o={},l={},c=e(!0),h="vanilla",g={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:t()};r.helper={},r.extensions={},r.setOption=function(f,y){return c[f]=y,this},r.getOption=function(f){return c[f]},r.getOptions=function(){return c},r.resetOptions=function(){c=e(!0)},r.setFlavor=function(f){if(!g.hasOwnProperty(f))throw Error(f+" flavor was not found");r.resetOptions();var y=g[f];h=f;for(var _ in y)y.hasOwnProperty(_)&&(c[_]=y[_])},r.getFlavor=function(){return h},r.getFlavorOptions=function(f){if(g.hasOwnProperty(f))return g[f]},r.getDefaultOptions=function(f){return e(f)},r.subParser=function(f,y){if(r.helper.isString(f))if(typeof y<"u")o[f]=y;else{if(o.hasOwnProperty(f))return o[f];throw Error("SubParser named "+f+" not registered!")}},r.extension=function(f,y){if(!r.helper.isString(f))throw Error("Extension 'name' must be a string");if(f=r.helper.stdExtName(f),r.helper.isUndefined(y)){if(!l.hasOwnProperty(f))throw Error("Extension named "+f+" is not registered!");return l[f]}else{typeof y=="function"&&(y=y()),r.helper.isArray(y)||(y=[y]);var _=v(y,f);if(_.valid)l[f]=y;else throw Error(_.error)}},r.getAllExtensions=function(){return l},r.removeExtension=function(f){delete l[f]},r.resetExtensions=function(){l={}};function v(f,y){var _=y?"Error in "+y+" extension->":"Error in unnamed extension",E={valid:!0,error:""};r.helper.isArray(f)||(f=[f]);for(var T=0;T<f.length;++T){var k=_+" sub-extension "+T+": ",I=f[T];if(typeof I!="object")return E.valid=!1,E.error=k+"must be an object, but "+typeof I+" given",E;if(!r.helper.isString(I.type))return E.valid=!1,E.error=k+'property "type" must be a string, but '+typeof I.type+" given",E;var R=I.type=I.type.toLowerCase();if(R==="language"&&(R=I.type="lang"),R==="html"&&(R=I.type="output"),R!=="lang"&&R!=="output"&&R!=="listener")return E.valid=!1,E.error=k+"type "+R+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',E;if(R==="listener"){if(r.helper.isUndefined(I.listeners))return E.valid=!1,E.error=k+'. Extensions of type "listener" must have a property called "listeners"',E}else if(r.helper.isUndefined(I.filter)&&r.helper.isUndefined(I.regex))return E.valid=!1,E.error=k+R+' extensions must define either a "regex" property or a "filter" method',E;if(I.listeners){if(typeof I.listeners!="object")return E.valid=!1,E.error=k+'"listeners" property must be an object but '+typeof I.listeners+" given",E;for(var V in I.listeners)if(I.listeners.hasOwnProperty(V)&&typeof I.listeners[V]!="function")return E.valid=!1,E.error=k+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+V+" must be a function but "+typeof I.listeners[V]+" given",E}if(I.filter){if(typeof I.filter!="function")return E.valid=!1,E.error=k+'"filter" must be a function, but '+typeof I.filter+" given",E}else if(I.regex){if(r.helper.isString(I.regex)&&(I.regex=new RegExp(I.regex,"g")),!(I.regex instanceof RegExp))return E.valid=!1,E.error=k+'"regex" property must either be a string or a RegExp object, but '+typeof I.regex+" given",E;if(r.helper.isUndefined(I.replace))return E.valid=!1,E.error=k+'"regex" extensions must implement a replace string or function',E}}return E}r.validateExtension=function(f){var y=v(f,null);return y.valid?!0:(console.warn(y.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(f){return typeof f=="string"||f instanceof String},r.helper.isFunction=function(f){var y={};return f&&y.toString.call(f)==="[object Function]"},r.helper.isArray=function(f){return Array.isArray(f)},r.helper.isUndefined=function(f){return typeof f>"u"},r.helper.forEach=function(f,y){if(r.helper.isUndefined(f))throw new Error("obj param is required");if(r.helper.isUndefined(y))throw new Error("callback param is required");if(!r.helper.isFunction(y))throw new Error("callback param must be a function/closure");if(typeof f.forEach=="function")f.forEach(y);else if(r.helper.isArray(f))for(var _=0;_<f.length;_++)y(f[_],_,f);else if(typeof f=="object")for(var E in f)f.hasOwnProperty(E)&&y(f[E],E,f);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(f){return f.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function C(f,y){var _=y.charCodeAt(0);return"E"+_+"E"}r.helper.escapeCharactersCallback=C,r.helper.escapeCharacters=function(f,y,_){var E="(["+y.replace(/([\[\]\\])/g,"\\$1")+"])";_&&(E="\\\\"+E);var T=new RegExp(E,"g");return f=f.replace(T,C),f},r.helper.unescapeHTMLEntities=function(f){return f.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var D=function(f,y,_,E){var T=E||"",k=T.indexOf("g")>-1,I=new RegExp(y+"|"+_,"g"+T.replace(/g/g,"")),R=new RegExp(y,T.replace(/g/g,"")),V=[],A,X,ee,F,O;do for(A=0;ee=I.exec(f);)if(R.test(ee[0]))A++||(X=I.lastIndex,F=X-ee[0].length);else if(A&&!--A){O=ee.index+ee[0].length;var W={left:{start:F,end:X},match:{start:X,end:ee.index},right:{start:ee.index,end:O},wholeMatch:{start:F,end:O}};if(V.push(W),!k)return V}while(A&&(I.lastIndex=X));return V};r.helper.matchRecursiveRegExp=function(f,y,_,E){for(var T=D(f,y,_,E),k=[],I=0;I<T.length;++I)k.push([f.slice(T[I].wholeMatch.start,T[I].wholeMatch.end),f.slice(T[I].match.start,T[I].match.end),f.slice(T[I].left.start,T[I].left.end),f.slice(T[I].right.start,T[I].right.end)]);return k},r.helper.replaceRecursiveRegExp=function(f,y,_,E,T){if(!r.helper.isFunction(y)){var k=y;y=function(){return k}}var I=D(f,_,E,T),R=f,V=I.length;if(V>0){var A=[];I[0].wholeMatch.start!==0&&A.push(f.slice(0,I[0].wholeMatch.start));for(var X=0;X<V;++X)A.push(y(f.slice(I[X].wholeMatch.start,I[X].wholeMatch.end),f.slice(I[X].match.start,I[X].match.end),f.slice(I[X].left.start,I[X].left.end),f.slice(I[X].right.start,I[X].right.end))),X<V-1&&A.push(f.slice(I[X].wholeMatch.end,I[X+1].wholeMatch.start));I[V-1].wholeMatch.end<f.length&&A.push(f.slice(I[V-1].wholeMatch.end)),R=A.join("")}return R},r.helper.regexIndexOf=function(f,y,_){if(!r.helper.isString(f))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(y instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var E=f.substring(_||0).search(y);return E>=0?E+(_||0):E},r.helper.splitAtIndex=function(f,y){if(!r.helper.isString(f))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[f.substring(0,y),f.substring(y)]},r.helper.encodeEmailAddress=function(f){var y=[function(_){return"&#"+_.charCodeAt(0)+";"},function(_){return"&#x"+_.charCodeAt(0).toString(16)+";"},function(_){return _}];return f=f.replace(/./g,function(_){if(_==="@")_=y[Math.floor(Math.random()*2)](_);else{var E=Math.random();_=E>.9?y[2](_):E>.45?y[1](_):y[0](_)}return _}),f},r.helper.padEnd=function(y,_,E){return _=_>>0,E=String(E||" "),y.length>_?String(y):(_=_-y.length,_>E.length&&(E+=E.repeat(_/E.length)),String(y)+E.slice(0,_))},typeof console>"u"&&(console={warn:function(f){alert(f)},log:function(f){alert(f)},error:function(f){throw f}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"","-1":"",100:"",1234:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"","8ball":"",a:"",ab:"",abc:"",abcd:"",accept:"",aerial_tramway:"",airplane:"",alarm_clock:"",alembic:"",alien:"",ambulance:"",amphora:"",anchor:"",angel:"",anger:"",angry:"",anguished:"",ant:"",apple:"",aquarius:"",aries:"",arrow_backward:"",arrow_double_down:"",arrow_double_up:"",arrow_down:"",arrow_down_small:"",arrow_forward:"",arrow_heading_down:"",arrow_heading_up:"",arrow_left:"",arrow_lower_left:"",arrow_lower_right:"",arrow_right:"",arrow_right_hook:"",arrow_up:"",arrow_up_down:"",arrow_up_small:"",arrow_upper_left:"",arrow_upper_right:"",arrows_clockwise:"",arrows_counterclockwise:"",art:"",articulated_lorry:"",artificial_satellite:"",astonished:"",athletic_shoe:"",atm:"",atom_symbol:"",avocado:"",b:"",baby:"",baby_bottle:"",baby_chick:"",baby_symbol:"",back:"",bacon:"",badminton:"",baggage_claim:"",baguette_bread:"",balance_scale:"",balloon:"",ballot_box:"",ballot_box_with_check:"",bamboo:"",banana:"",bangbang:"",bank:"",bar_chart:"",barber:"",baseball:"",basketball:"",basketball_man:"",basketball_woman:"&zwj;",bat:"",bath:"",bathtub:"",battery:"",beach_umbrella:"",bear:"",bed:"",bee:"",beer:"",beers:"",beetle:"",beginner:"",bell:"",bellhop_bell:"",bento:"",biking_man:"",bike:"",biking_woman:"&zwj;",bikini:"",biohazard:"",bird:"",birthday:"",black_circle:"",black_flag:"",black_heart:"",black_joker:"",black_large_square:"",black_medium_small_square:"",black_medium_square:"",black_nib:"",black_small_square:"",black_square_button:"",blonde_man:"",blonde_woman:"&zwj;",blossom:"",blowfish:"",blue_book:"",blue_car:"",blue_heart:"",blush:"",boar:"",boat:"",bomb:"",book:"",bookmark:"",bookmark_tabs:"",books:"",boom:"",boot:"",bouquet:"",bowing_man:"",bow_and_arrow:"",bowing_woman:"&zwj;",bowling:"",boxing_glove:"",boy:"",bread:"",bride_with_veil:"",bridge_at_night:"",briefcase:"",broken_heart:"",bug:"",building_construction:"",bulb:"",bullettrain_front:"",bullettrain_side:"",burrito:"",bus:"",business_suit_levitating:"",busstop:"",bust_in_silhouette:"",busts_in_silhouette:"",butterfly:"",cactus:"",cake:"",calendar:"",call_me_hand:"",calling:"",camel:"",camera:"",camera_flash:"",camping:"",cancer:"",candle:"",candy:"",canoe:"",capital_abcd:"",capricorn:"",car:"",card_file_box:"",card_index:"",card_index_dividers:"",carousel_horse:"",carrot:"",cat:"",cat2:"",cd:"",chains:"",champagne:"",chart:"",chart_with_downwards_trend:"",chart_with_upwards_trend:"",checkered_flag:"",cheese:"",cherries:"",cherry_blossom:"",chestnut:"",chicken:"",children_crossing:"",chipmunk:"",chocolate_bar:"",christmas_tree:"",church:"",cinema:"",circus_tent:"",city_sunrise:"",city_sunset:"",cityscape:"",cl:"",clamp:"",clap:"",clapper:"",classical_building:"",clinking_glasses:"",clipboard:"",clock1:"",clock10:"",clock1030:"",clock11:"",clock1130:"",clock12:"",clock1230:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",closed_book:"",closed_lock_with_key:"",closed_umbrella:"",cloud:"",cloud_with_lightning:"",cloud_with_lightning_and_rain:"",cloud_with_rain:"",cloud_with_snow:"",clown_face:"",clubs:"",cocktail:"",coffee:"",coffin:"",cold_sweat:"",comet:"",computer:"",computer_mouse:"",confetti_ball:"",confounded:"",confused:"",congratulations:"",construction:"",construction_worker_man:"",construction_worker_woman:"&zwj;",control_knobs:"",convenience_store:"",cookie:"",cool:"",policeman:"",copyright:"",corn:"",couch_and_lamp:"",couple:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"&zwj;&zwj;",couple_with_heart_woman_woman:"&zwj;&zwj;",couplekiss_man_man:"&zwj;&zwj;&zwj;",couplekiss_man_woman:"",couplekiss_woman_woman:"&zwj;&zwj;&zwj;",cow:"",cow2:"",cowboy_hat_face:"",crab:"",crayon:"",credit_card:"",crescent_moon:"",cricket:"",crocodile:"",croissant:"",crossed_fingers:"",crossed_flags:"",crossed_swords:"",crown:"",cry:"",crying_cat_face:"",crystal_ball:"",cucumber:"",cupid:"",curly_loop:"",currency_exchange:"",curry:"",custard:"",customs:"",cyclone:"",dagger:"",dancer:"",dancing_women:"",dancing_men:"&zwj;",dango:"",dark_sunglasses:"",dart:"",dash:"",date:"",deciduous_tree:"",deer:"",department_store:"",derelict_house:"",desert:"",desert_island:"",desktop_computer:"",male_detective:"",diamond_shape_with_a_dot_inside:"",diamonds:"",disappointed:"",disappointed_relieved:"",dizzy:"",dizzy_face:"",do_not_litter:"",dog:"",dog2:"",dollar:"",dolls:"",dolphin:"",door:"",doughnut:"",dove:"",dragon:"",dragon_face:"",dress:"",dromedary_camel:"",drooling_face:"",droplet:"",drum:"",duck:"",dvd:"","e-mail":"",eagle:"",ear:"",ear_of_rice:"",earth_africa:"",earth_americas:"",earth_asia:"",egg:"",eggplant:"",eight_pointed_black_star:"",eight_spoked_asterisk:"",electric_plug:"",elephant:"",email:"",end:"",envelope_with_arrow:"",euro:"",european_castle:"",european_post_office:"",evergreen_tree:"",exclamation:"",expressionless:"",eye:"",eye_speech_bubble:"&zwj;",eyeglasses:"",eyes:"",face_with_head_bandage:"",face_with_thermometer:"",fist_oncoming:"",factory:"",fallen_leaf:"",family_man_woman_boy:"",family_man_boy:"&zwj;",family_man_boy_boy:"&zwj;&zwj;",family_man_girl:"&zwj;",family_man_girl_boy:"&zwj;&zwj;",family_man_girl_girl:"&zwj;&zwj;",family_man_man_boy:"&zwj;&zwj;",family_man_man_boy_boy:"&zwj;&zwj;&zwj;",family_man_man_girl:"&zwj;&zwj;",family_man_man_girl_boy:"&zwj;&zwj;&zwj;",family_man_man_girl_girl:"&zwj;&zwj;&zwj;",family_man_woman_boy_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl:"&zwj;&zwj;",family_man_woman_girl_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl_girl:"&zwj;&zwj;&zwj;",family_woman_boy:"&zwj;",family_woman_boy_boy:"&zwj;&zwj;",family_woman_girl:"&zwj;",family_woman_girl_boy:"&zwj;&zwj;",family_woman_girl_girl:"&zwj;&zwj;",family_woman_woman_boy:"&zwj;&zwj;",family_woman_woman_boy_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl:"&zwj;&zwj;",family_woman_woman_girl_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl_girl:"&zwj;&zwj;&zwj;",fast_forward:"",fax:"",fearful:"",feet:"",female_detective:"&zwj;",ferris_wheel:"",ferry:"",field_hockey:"",file_cabinet:"",file_folder:"",film_projector:"",film_strip:"",fire:"",fire_engine:"",fireworks:"",first_quarter_moon:"",first_quarter_moon_with_face:"",fish:"",fish_cake:"",fishing_pole_and_fish:"",fist_raised:"",fist_left:"",fist_right:"",flags:"",flashlight:"",fleur_de_lis:"",flight_arrival:"",flight_departure:"",floppy_disk:"",flower_playing_cards:"",flushed:"",fog:"",foggy:"",football:"",footprints:"",fork_and_knife:"",fountain:"",fountain_pen:"",four_leaf_clover:"",fox_face:"",framed_picture:"",free:"",fried_egg:"",fried_shrimp:"",fries:"",frog:"",frowning:"",frowning_face:"",frowning_man:"&zwj;",frowning_woman:"",middle_finger:"",fuelpump:"",full_moon:"",full_moon_with_face:"",funeral_urn:"",game_die:"",gear:"",gem:"",gemini:"",ghost:"",gift:"",gift_heart:"",girl:"",globe_with_meridians:"",goal_net:"",goat:"",golf:"",golfing_man:"",golfing_woman:"&zwj;",gorilla:"",grapes:"",green_apple:"",green_book:"",green_heart:"",green_salad:"",grey_exclamation:"",grey_question:"",grimacing:"",grin:"",grinning:"",guardsman:"",guardswoman:"&zwj;",guitar:"",gun:"",haircut_woman:"",haircut_man:"&zwj;",hamburger:"",hammer:"",hammer_and_pick:"",hammer_and_wrench:"",hamster:"",hand:"",handbag:"",handshake:"",hankey:"",hatched_chick:"",hatching_chick:"",headphones:"",hear_no_evil:"",heart:"",heart_decoration:"",heart_eyes:"",heart_eyes_cat:"",heartbeat:"",heartpulse:"",hearts:"",heavy_check_mark:"",heavy_division_sign:"",heavy_dollar_sign:"",heavy_heart_exclamation:"",heavy_minus_sign:"",heavy_multiplication_x:"",heavy_plus_sign:"",helicopter:"",herb:"",hibiscus:"",high_brightness:"",high_heel:"",hocho:"",hole:"",honey_pot:"",horse:"",horse_racing:"",hospital:"",hot_pepper:"",hotdog:"",hotel:"",hotsprings:"",hourglass:"",hourglass_flowing_sand:"",house:"",house_with_garden:"",houses:"",hugs:"",hushed:"",ice_cream:"",ice_hockey:"",ice_skate:"",icecream:"",id:"",ideograph_advantage:"",imp:"",inbox_tray:"",incoming_envelope:"",tipping_hand_woman:"",information_source:"",innocent:"",interrobang:"",iphone:"",izakaya_lantern:"",jack_o_lantern:"",japan:"",japanese_castle:"",japanese_goblin:"",japanese_ogre:"",jeans:"",joy:"",joy_cat:"",joystick:"",kaaba:"",key:"",keyboard:"",keycap_ten:"",kick_scooter:"",kimono:"",kiss:"",kissing:"",kissing_cat:"",kissing_closed_eyes:"",kissing_heart:"",kissing_smiling_eyes:"",kiwi_fruit:"",koala:"",koko:"",label:"",large_blue_circle:"",large_blue_diamond:"",large_orange_diamond:"",last_quarter_moon:"",last_quarter_moon_with_face:"",latin_cross:"",laughing:"",leaves:"",ledger:"",left_luggage:"",left_right_arrow:"",leftwards_arrow_with_hook:"",lemon:"",leo:"",leopard:"",level_slider:"",libra:"",light_rail:"",link:"",lion:"",lips:"",lipstick:"",lizard:"",lock:"",lock_with_ink_pen:"",lollipop:"",loop:"",loud_sound:"",loudspeaker:"",love_hotel:"",love_letter:"",low_brightness:"",lying_face:"",m:"",mag:"",mag_right:"",mahjong:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",man:"",man_artist:"&zwj;",man_astronaut:"&zwj;",man_cartwheeling:"&zwj;",man_cook:"&zwj;",man_dancing:"",man_facepalming:"&zwj;",man_factory_worker:"&zwj;",man_farmer:"&zwj;",man_firefighter:"&zwj;",man_health_worker:"&zwj;",man_in_tuxedo:"",man_judge:"&zwj;",man_juggling:"&zwj;",man_mechanic:"&zwj;",man_office_worker:"&zwj;",man_pilot:"&zwj;",man_playing_handball:"&zwj;",man_playing_water_polo:"&zwj;",man_scientist:"&zwj;",man_shrugging:"&zwj;",man_singer:"&zwj;",man_student:"&zwj;",man_teacher:"&zwj;",man_technologist:"&zwj;",man_with_gua_pi_mao:"",man_with_turban:"",tangerine:"",mans_shoe:"",mantelpiece_clock:"",maple_leaf:"",martial_arts_uniform:"",mask:"",massage_woman:"",massage_man:"&zwj;",meat_on_bone:"",medal_military:"",medal_sports:"",mega:"",melon:"",memo:"",men_wrestling:"&zwj;",menorah:"",mens:"",metal:"",metro:"",microphone:"",microscope:"",milk_glass:"",milky_way:"",minibus:"",minidisc:"",mobile_phone_off:"",money_mouth_face:"",money_with_wings:"",moneybag:"",monkey:"",monkey_face:"",monorail:"",moon:"",mortar_board:"",mosque:"",motor_boat:"",motor_scooter:"",motorcycle:"",motorway:"",mount_fuji:"",mountain:"",mountain_biking_man:"",mountain_biking_woman:"&zwj;",mountain_cableway:"",mountain_railway:"",mountain_snow:"",mouse:"",mouse2:"",movie_camera:"",moyai:"",mrs_claus:"",muscle:"",mushroom:"",musical_keyboard:"",musical_note:"",musical_score:"",mute:"",nail_care:"",name_badge:"",national_park:"",nauseated_face:"",necktie:"",negative_squared_cross_mark:"",nerd_face:"",neutral_face:"",new:"",new_moon:"",new_moon_with_face:"",newspaper:"",newspaper_roll:"",next_track_button:"",ng:"",no_good_man:"&zwj;",no_good_woman:"",night_with_stars:"",no_bell:"",no_bicycles:"",no_entry:"",no_entry_sign:"",no_mobile_phones:"",no_mouth:"",no_pedestrians:"",no_smoking:"","non-potable_water":"",nose:"",notebook:"",notebook_with_decorative_cover:"",notes:"",nut_and_bolt:"",o:"",o2:"",ocean:"",octopus:"",oden:"",office:"",oil_drum:"",ok:"",ok_hand:"",ok_man:"&zwj;",ok_woman:"",old_key:"",older_man:"",older_woman:"",om:"",on:"",oncoming_automobile:"",oncoming_bus:"",oncoming_police_car:"",oncoming_taxi:"",open_file_folder:"",open_hands:"",open_mouth:"",open_umbrella:"",ophiuchus:"",orange_book:"",orthodox_cross:"",outbox_tray:"",owl:"",ox:"",package:"",page_facing_up:"",page_with_curl:"",pager:"",paintbrush:"",palm_tree:"",pancakes:"",panda_face:"",paperclip:"",paperclips:"",parasol_on_ground:"",parking:"",part_alternation_mark:"",partly_sunny:"",passenger_ship:"",passport_control:"",pause_button:"",peace_symbol:"",peach:"",peanuts:"",pear:"",pen:"",pencil2:"",penguin:"",pensive:"",performing_arts:"",persevere:"",person_fencing:"",pouting_woman:"",phone:"",pick:"",pig:"",pig2:"",pig_nose:"",pill:"",pineapple:"",ping_pong:"",pisces:"",pizza:"",place_of_worship:"",plate_with_cutlery:"",play_or_pause_button:"",point_down:"",point_left:"",point_right:"",point_up:"",point_up_2:"",police_car:"",policewoman:"&zwj;",poodle:"",popcorn:"",post_office:"",postal_horn:"",postbox:"",potable_water:"",potato:"",pouch:"",poultry_leg:"",pound:"",rage:"",pouting_cat:"",pouting_man:"&zwj;",pray:"",prayer_beads:"",pregnant_woman:"",previous_track_button:"",prince:"",princess:"",printer:"",purple_heart:"",purse:"",pushpin:"",put_litter_in_its_place:"",question:"",rabbit:"",rabbit2:"",racehorse:"",racing_car:"",radio:"",radio_button:"",radioactive:"",railway_car:"",railway_track:"",rainbow:"",rainbow_flag:"&zwj;",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",raised_hands:"",raising_hand_woman:"",raising_hand_man:"&zwj;",ram:"",ramen:"",rat:"",record_button:"",recycle:"",red_circle:"",registered:"",relaxed:"",relieved:"",reminder_ribbon:"",repeat:"",repeat_one:"",rescue_worker_helmet:"",restroom:"",revolving_hearts:"",rewind:"",rhinoceros:"",ribbon:"",rice:"",rice_ball:"",rice_cracker:"",rice_scene:"",right_anger_bubble:"",ring:"",robot:"",rocket:"",rofl:"",roll_eyes:"",roller_coaster:"",rooster:"",rose:"",rosette:"",rotating_light:"",round_pushpin:"",rowing_man:"",rowing_woman:"&zwj;",rugby_football:"",running_man:"",running_shirt_with_sash:"",running_woman:"&zwj;",sa:"",sagittarius:"",sake:"",sandal:"",santa:"",satellite:"",saxophone:"",school:"",school_satchel:"",scissors:"",scorpion:"",scorpius:"",scream:"",scream_cat:"",scroll:"",seat:"",secret:"",see_no_evil:"",seedling:"",selfie:"",shallow_pan_of_food:"",shamrock:"",shark:"",shaved_ice:"",sheep:"",shell:"",shield:"",shinto_shrine:"",ship:"",shirt:"",shopping:"",shopping_cart:"",shower:"",shrimp:"",signal_strength:"",six_pointed_star:"",ski:"",skier:"",skull:"",skull_and_crossbones:"",sleeping:"",sleeping_bed:"",sleepy:"",slightly_frowning_face:"",slightly_smiling_face:"",slot_machine:"",small_airplane:"",small_blue_diamond:"",small_orange_diamond:"",small_red_triangle:"",small_red_triangle_down:"",smile:"",smile_cat:"",smiley:"",smiley_cat:"",smiling_imp:"",smirk:"",smirk_cat:"",smoking:"",snail:"",snake:"",sneezing_face:"",snowboarder:"",snowflake:"",snowman:"",snowman_with_snow:"",sob:"",soccer:"",soon:"",sos:"",sound:"",space_invader:"",spades:"",spaghetti:"",sparkle:"",sparkler:"",sparkles:"",sparkling_heart:"",speak_no_evil:"",speaker:"",speaking_head:"",speech_balloon:"",speedboat:"",spider:"",spider_web:"",spiral_calendar:"",spiral_notepad:"",spoon:"",squid:"",stadium:"",star:"",star2:"",star_and_crescent:"",star_of_david:"",stars:"",station:"",statue_of_liberty:"",steam_locomotive:"",stew:"",stop_button:"",stop_sign:"",stopwatch:"",straight_ruler:"",strawberry:"",stuck_out_tongue:"",stuck_out_tongue_closed_eyes:"",stuck_out_tongue_winking_eye:"",studio_microphone:"",stuffed_flatbread:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",sun_behind_small_cloud:"",sun_with_face:"",sunflower:"",sunglasses:"",sunny:"",sunrise:"",sunrise_over_mountains:"",surfing_man:"",surfing_woman:"&zwj;",sushi:"",suspension_railway:"",sweat:"",sweat_drops:"",sweat_smile:"",sweet_potato:"",swimming_man:"",swimming_woman:"&zwj;",symbols:"",synagogue:"",syringe:"",taco:"",tada:"",tanabata_tree:"",taurus:"",taxi:"",tea:"",telephone_receiver:"",telescope:"",tennis:"",tent:"",thermometer:"",thinking:"",thought_balloon:"",ticket:"",tickets:"",tiger:"",tiger2:"",timer_clock:"",tipping_hand_man:"&zwj;",tired_face:"",tm:"",toilet:"",tokyo_tower:"",tomato:"",tongue:"",top:"",tophat:"",tornado:"",trackball:"",tractor:"",traffic_light:"",train:"",train2:"",tram:"",triangular_flag_on_post:"",triangular_ruler:"",trident:"",triumph:"",trolleybus:"",trophy:"",tropical_drink:"",tropical_fish:"",truck:"",trumpet:"",tulip:"",tumbler_glass:"",turkey:"",turtle:"",tv:"",twisted_rightwards_arrows:"",two_hearts:"",two_men_holding_hands:"",two_women_holding_hands:"",u5272:"",u5408:"",u55b6:"",u6307:"",u6708:"",u6709:"",u6e80:"",u7121:"",u7533:"",u7981:"",u7a7a:"",umbrella:"",unamused:"",underage:"",unicorn:"",unlock:"",up:"",upside_down_face:"",v:"",vertical_traffic_light:"",vhs:"",vibration_mode:"",video_camera:"",video_game:"",violin:"",virgo:"",volcano:"",volleyball:"",vs:"",vulcan_salute:"",walking_man:"",walking_woman:"&zwj;",waning_crescent_moon:"",waning_gibbous_moon:"",warning:"",wastebasket:"",watch:"",water_buffalo:"",watermelon:"",wave:"",wavy_dash:"",waxing_crescent_moon:"",wc:"",weary:"",wedding:"",weight_lifting_man:"",weight_lifting_woman:"&zwj;",whale:"",whale2:"",wheel_of_dharma:"",wheelchair:"",white_check_mark:"",white_circle:"",white_flag:"",white_flower:"",white_large_square:"",white_medium_small_square:"",white_medium_square:"",white_small_square:"",white_square_button:"",wilted_flower:"",wind_chime:"",wind_face:"",wine_glass:"",wink:"",wolf:"",woman:"",woman_artist:"&zwj;",woman_astronaut:"&zwj;",woman_cartwheeling:"&zwj;",woman_cook:"&zwj;",woman_facepalming:"&zwj;",woman_factory_worker:"&zwj;",woman_farmer:"&zwj;",woman_firefighter:"&zwj;",woman_health_worker:"&zwj;",woman_judge:"&zwj;",woman_juggling:"&zwj;",woman_mechanic:"&zwj;",woman_office_worker:"&zwj;",woman_pilot:"&zwj;",woman_playing_handball:"&zwj;",woman_playing_water_polo:"&zwj;",woman_scientist:"&zwj;",woman_shrugging:"&zwj;",woman_singer:"&zwj;",woman_student:"&zwj;",woman_teacher:"&zwj;",woman_technologist:"&zwj;",woman_with_turban:"&zwj;",womans_clothes:"",womans_hat:"",women_wrestling:"&zwj;",womens:"",world_map:"",worried:"",wrench:"",writing_hand:"",x:"",yellow_heart:"",yen:"",yin_yang:"",yum:"",zap:"",zipper_mouth_face:"",zzz:"",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(f){var y={},_=[],E=[],T={},k=h,I={parsed:{},raw:"",format:""};R();function R(){f=f||{};for(var F in c)c.hasOwnProperty(F)&&(y[F]=c[F]);if(typeof f=="object")for(var O in f)f.hasOwnProperty(O)&&(y[O]=f[O]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof f+" was passed instead.");y.extensions&&r.helper.forEach(y.extensions,V)}function V(F,O){if(O=O||null,r.helper.isString(F))if(F=r.helper.stdExtName(F),O=F,r.extensions[F]){console.warn("DEPRECATION WARNING: "+F+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),A(r.extensions[F],F);return}else if(!r.helper.isUndefined(l[F]))F=l[F];else throw Error('Extension "'+F+'" could not be loaded. It was either not found or is not a valid extension.');typeof F=="function"&&(F=F()),r.helper.isArray(F)||(F=[F]);var W=v(F,O);if(!W.valid)throw Error(W.error);for(var te=0;te<F.length;++te){switch(F[te].type){case"lang":_.push(F[te]);break;case"output":E.push(F[te]);break}if(F[te].hasOwnProperty("listeners"))for(var he in F[te].listeners)F[te].listeners.hasOwnProperty(he)&&X(he,F[te].listeners[he])}}function A(F,O){typeof F=="function"&&(F=F(new r.Converter)),r.helper.isArray(F)||(F=[F]);var W=v(F,O);if(!W.valid)throw Error(W.error);for(var te=0;te<F.length;++te)switch(F[te].type){case"lang":_.push(F[te]);break;case"output":E.push(F[te]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function X(F,O){if(!r.helper.isString(F))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof F+" given");if(typeof O!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof O+" given");T.hasOwnProperty(F)||(T[F]=[]),T[F].push(O)}function ee(F){var O=F.match(/^\s*/)[0].length,W=new RegExp("^\\s{0,"+O+"}","gm");return F.replace(W,"")}this._dispatch=function(O,W,te,he){if(T.hasOwnProperty(O))for(var H=0;H<T[O].length;++H){var ae=T[O][H](O,W,this,te,he);ae&&typeof ae<"u"&&(W=ae)}return W},this.listen=function(F,O){return X(F,O),this},this.makeHtml=function(F){if(!F)return F;var O={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:_,outputModifiers:E,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return F=F.replace(//g,"T"),F=F.replace(/\$/g,"D"),F=F.replace(/\r\n/g,`
`),F=F.replace(/\r/g,`
`),F=F.replace(/\u00A0/g,"&nbsp;"),y.smartIndentationFix&&(F=ee(F)),F=`

`+F+`

`,F=r.subParser("detab")(F,y,O),F=F.replace(/^[ \t]+$/mg,""),r.helper.forEach(_,function(W){F=r.subParser("runExtension")(W,F,y,O)}),F=r.subParser("metadata")(F,y,O),F=r.subParser("hashPreCodeTags")(F,y,O),F=r.subParser("githubCodeBlocks")(F,y,O),F=r.subParser("hashHTMLBlocks")(F,y,O),F=r.subParser("hashCodeTags")(F,y,O),F=r.subParser("stripLinkDefinitions")(F,y,O),F=r.subParser("blockGamut")(F,y,O),F=r.subParser("unhashHTMLSpans")(F,y,O),F=r.subParser("unescapeSpecialChars")(F,y,O),F=F.replace(/D/g,"$$"),F=F.replace(/T/g,""),F=r.subParser("completeHTMLDocument")(F,y,O),r.helper.forEach(E,function(W){F=r.subParser("runExtension")(W,F,y,O)}),I=O.metadata,F},this.makeMarkdown=this.makeMd=function(F,O){if(F=F.replace(/\r\n/g,`
`),F=F.replace(/\r/g,`
`),F=F.replace(/>[ \t]+</,">NBSP;<"),!O)if(window&&window.document)O=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var W=O.createElement("div");W.innerHTML=F;var te={preList:_e(W)};ne(W);for(var he=W.childNodes,H="",ae=0;ae<he.length;ae++)H+=r.subParser("makeMarkdown.node")(he[ae],te);function ne(pe){for(var Me=0;Me<pe.childNodes.length;++Me){var Fe=pe.childNodes[Me];Fe.nodeType===3?/\S/.test(Fe.nodeValue)?(Fe.nodeValue=Fe.nodeValue.split(`
`).join(" "),Fe.nodeValue=Fe.nodeValue.replace(/(\s)+/g,"$1")):(pe.removeChild(Fe),--Me):Fe.nodeType===1&&ne(Fe)}}function _e(pe){for(var Me=pe.querySelectorAll("pre"),Fe=[],ce=0;ce<Me.length;++ce)if(Me[ce].childElementCount===1&&Me[ce].firstChild.tagName.toLowerCase()==="code"){var se=Me[ce].firstChild.innerHTML.trim(),de=Me[ce].firstChild.getAttribute("data-language")||"";if(de==="")for(var ve=Me[ce].firstChild.className.split(" "),je=0;je<ve.length;++je){var qe=ve[je].match(/^language-(.+)$/);if(qe!==null){de=qe[1];break}}se=r.helper.unescapeHTMLEntities(se),Fe.push(se),Me[ce].outerHTML='<precode language="'+de+'" precodenum="'+ce.toString()+'"></precode>'}else Fe.push(Me[ce].innerHTML),Me[ce].innerHTML="",Me[ce].setAttribute("prenum",ce.toString());return Fe}return H},this.setOption=function(F,O){y[F]=O},this.getOption=function(F){return y[F]},this.getOptions=function(){return y},this.addExtension=function(F,O){O=O||null,V(F,O)},this.useExtension=function(F){V(F)},this.setFlavor=function(F){if(!g.hasOwnProperty(F))throw Error(F+" flavor was not found");var O=g[F];k=F;for(var W in O)O.hasOwnProperty(W)&&(y[W]=O[W])},this.getFlavor=function(){return k},this.removeExtension=function(F){r.helper.isArray(F)||(F=[F]);for(var O=0;O<F.length;++O){for(var W=F[O],te=0;te<_.length;++te)_[te]===W&&_[te].splice(te,1);for(var he=0;he<E.length;++te)E[he]===W&&E[he].splice(te,1)}},this.getAllExtensions=function(){return{language:_,output:E}},this.getMetadata=function(F){return F?I.raw:I.parsed},this.getMetadataFormat=function(){return I.format},this._setMetadataPair=function(F,O){I.parsed[F]=O},this._setMetadataFormat=function(F){I.format=F},this._setMetadataRaw=function(F){I.raw=F}},r.subParser("anchors",function(f,y,_){f=_.converter._dispatch("anchors.before",f,y,_);var E=function(T,k,I,R,V,A,X){if(r.helper.isUndefined(X)&&(X=""),I=I.toLowerCase(),T.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)R="";else if(!R)if(I||(I=k.toLowerCase().replace(/ ?\n/g," ")),R="#"+I,!r.helper.isUndefined(_.gUrls[I]))R=_.gUrls[I],r.helper.isUndefined(_.gTitles[I])||(X=_.gTitles[I]);else return T;R=R.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var ee='<a href="'+R+'"';return X!==""&&X!==null&&(X=X.replace(/"/g,"&quot;"),X=X.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),ee+=' title="'+X+'"'),y.openLinksInNewWindow&&!/^#/.test(R)&&(ee+=' rel="noopener noreferrer" target="E95Eblank"'),ee+=">"+k+"</a>",ee};return f=f.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,E),f=f.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,E),f=f.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,E),f=f.replace(/\[([^\[\]]+)]()()()()()/g,E),y.ghMentions&&(f=f.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(T,k,I,R,V){if(I==="\\")return k+R;if(!r.helper.isString(y.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var A=y.ghMentionsLink.replace(/\{u}/g,V),X="";return y.openLinksInNewWindow&&(X=' rel="noopener noreferrer" target="E95Eblank"'),k+'<a href="'+A+'"'+X+">"+R+"</a>"})),f=_.converter._dispatch("anchors.after",f,y,_),f});var b=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,L=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,j=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,x=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,$=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,Q=function(f){return function(y,_,E,T,k,I,R){E=E.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var V=E,A="",X="",ee=_||"",F=R||"";return/^www\./i.test(E)&&(E=E.replace(/^www\./i,"http://www.")),f.excludeTrailingPunctuationFromURLs&&I&&(A=I),f.openLinksInNewWindow&&(X=' rel="noopener noreferrer" target="E95Eblank"'),ee+'<a href="'+E+'"'+X+">"+V+"</a>"+A+F}},U=function(f,y){return function(_,E,T){var k="mailto:";return E=E||"",T=r.subParser("unescapeSpecialChars")(T,f,y),f.encodeEmails?(k=r.helper.encodeEmailAddress(k+T),T=r.helper.encodeEmailAddress(T)):k=k+T,E+'<a href="'+k+'">'+T+"</a>"}};r.subParser("autoLinks",function(f,y,_){return f=_.converter._dispatch("autoLinks.before",f,y,_),f=f.replace(j,Q(y)),f=f.replace($,U(y,_)),f=_.converter._dispatch("autoLinks.after",f,y,_),f}),r.subParser("simplifiedAutoLinks",function(f,y,_){return y.simplifiedAutoLink&&(f=_.converter._dispatch("simplifiedAutoLinks.before",f,y,_),y.excludeTrailingPunctuationFromURLs?f=f.replace(L,Q(y)):f=f.replace(b,Q(y)),f=f.replace(x,U(y,_)),f=_.converter._dispatch("simplifiedAutoLinks.after",f,y,_)),f}),r.subParser("blockGamut",function(f,y,_){return f=_.converter._dispatch("blockGamut.before",f,y,_),f=r.subParser("blockQuotes")(f,y,_),f=r.subParser("headers")(f,y,_),f=r.subParser("horizontalRule")(f,y,_),f=r.subParser("lists")(f,y,_),f=r.subParser("codeBlocks")(f,y,_),f=r.subParser("tables")(f,y,_),f=r.subParser("hashHTMLBlocks")(f,y,_),f=r.subParser("paragraphs")(f,y,_),f=_.converter._dispatch("blockGamut.after",f,y,_),f}),r.subParser("blockQuotes",function(f,y,_){f=_.converter._dispatch("blockQuotes.before",f,y,_),f=f+`

`;var E=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return y.splitAdjacentBlockquotes&&(E=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),f=f.replace(E,function(T){return T=T.replace(/^[ \t]*>[ \t]?/gm,""),T=T.replace(/0/g,""),T=T.replace(/^[ \t]+$/gm,""),T=r.subParser("githubCodeBlocks")(T,y,_),T=r.subParser("blockGamut")(T,y,_),T=T.replace(/(^|\n)/g,"$1  "),T=T.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(k,I){var R=I;return R=R.replace(/^  /mg,"0"),R=R.replace(/0/g,""),R}),r.subParser("hashBlock")(`<blockquote>
`+T+`
</blockquote>`,y,_)}),f=_.converter._dispatch("blockQuotes.after",f,y,_),f}),r.subParser("codeBlocks",function(f,y,_){f=_.converter._dispatch("codeBlocks.before",f,y,_),f+="0";var E=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return f=f.replace(E,function(T,k,I){var R=k,V=I,A=`
`;return R=r.subParser("outdent")(R,y,_),R=r.subParser("encodeCode")(R,y,_),R=r.subParser("detab")(R,y,_),R=R.replace(/^\n+/g,""),R=R.replace(/\n+$/g,""),y.omitExtraWLInCodeBlocks&&(A=""),R="<pre><code>"+R+A+"</code></pre>",r.subParser("hashBlock")(R,y,_)+V}),f=f.replace(/0/,""),f=_.converter._dispatch("codeBlocks.after",f,y,_),f}),r.subParser("codeSpans",function(f,y,_){return f=_.converter._dispatch("codeSpans.before",f,y,_),typeof f>"u"&&(f=""),f=f.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(E,T,k,I){var R=I;return R=R.replace(/^([ \t]*)/g,""),R=R.replace(/[ \t]*$/g,""),R=r.subParser("encodeCode")(R,y,_),R=T+"<code>"+R+"</code>",R=r.subParser("hashHTMLSpans")(R,y,_),R}),f=_.converter._dispatch("codeSpans.after",f,y,_),f}),r.subParser("completeHTMLDocument",function(f,y,_){if(!y.completeHTMLDocument)return f;f=_.converter._dispatch("completeHTMLDocument.before",f,y,_);var E="html",T=`<!DOCTYPE HTML>
`,k="",I=`<meta charset="utf-8">
`,R="",V="";typeof _.metadata.parsed.doctype<"u"&&(T="<!DOCTYPE "+_.metadata.parsed.doctype+`>
`,E=_.metadata.parsed.doctype.toString().toLowerCase(),(E==="html"||E==="html5")&&(I='<meta charset="utf-8">'));for(var A in _.metadata.parsed)if(_.metadata.parsed.hasOwnProperty(A))switch(A.toLowerCase()){case"doctype":break;case"title":k="<title>"+_.metadata.parsed.title+`</title>
`;break;case"charset":E==="html"||E==="html5"?I='<meta charset="'+_.metadata.parsed.charset+`">
`:I='<meta name="charset" content="'+_.metadata.parsed.charset+`">
`;break;case"language":case"lang":R=' lang="'+_.metadata.parsed[A]+'"',V+='<meta name="'+A+'" content="'+_.metadata.parsed[A]+`">
`;break;default:V+='<meta name="'+A+'" content="'+_.metadata.parsed[A]+`">
`}return f=T+"<html"+R+`>
<head>
`+k+I+V+`</head>
<body>
`+f.trim()+`
</body>
</html>`,f=_.converter._dispatch("completeHTMLDocument.after",f,y,_),f}),r.subParser("detab",function(f,y,_){return f=_.converter._dispatch("detab.before",f,y,_),f=f.replace(/\t(?=\t)/g,"    "),f=f.replace(/\t/g,"AB"),f=f.replace(/B(.+?)A/g,function(E,T){for(var k=T,I=4-k.length%4,R=0;R<I;R++)k+=" ";return k}),f=f.replace(/A/g,"    "),f=f.replace(/B/g,""),f=_.converter._dispatch("detab.after",f,y,_),f}),r.subParser("ellipsis",function(f,y,_){return f=_.converter._dispatch("ellipsis.before",f,y,_),f=f.replace(/\.\.\./g,""),f=_.converter._dispatch("ellipsis.after",f,y,_),f}),r.subParser("emoji",function(f,y,_){if(!y.emoji)return f;f=_.converter._dispatch("emoji.before",f,y,_);var E=/:([\S]+?):/g;return f=f.replace(E,function(T,k){return r.helper.emojis.hasOwnProperty(k)?r.helper.emojis[k]:T}),f=_.converter._dispatch("emoji.after",f,y,_),f}),r.subParser("encodeAmpsAndAngles",function(f,y,_){return f=_.converter._dispatch("encodeAmpsAndAngles.before",f,y,_),f=f.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),f=f.replace(/<(?![a-z\/?$!])/gi,"&lt;"),f=f.replace(/</g,"&lt;"),f=f.replace(/>/g,"&gt;"),f=_.converter._dispatch("encodeAmpsAndAngles.after",f,y,_),f}),r.subParser("encodeBackslashEscapes",function(f,y,_){return f=_.converter._dispatch("encodeBackslashEscapes.before",f,y,_),f=f.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),f=f.replace(/\\([`*_{}\[\]()>#+.!~=|-])/g,r.helper.escapeCharactersCallback),f=_.converter._dispatch("encodeBackslashEscapes.after",f,y,_),f}),r.subParser("encodeCode",function(f,y,_){return f=_.converter._dispatch("encodeCode.before",f,y,_),f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),f=_.converter._dispatch("encodeCode.after",f,y,_),f}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(f,y,_){f=_.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",f,y,_);var E=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,T=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return f=f.replace(E,function(k){return k.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),f=f.replace(T,function(k){return k.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),f=_.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",f,y,_),f}),r.subParser("githubCodeBlocks",function(f,y,_){return y.ghCodeBlocks?(f=_.converter._dispatch("githubCodeBlocks.before",f,y,_),f+="0",f=f.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(E,T,k,I){var R=y.omitExtraWLInCodeBlocks?"":`
`;return I=r.subParser("encodeCode")(I,y,_),I=r.subParser("detab")(I,y,_),I=I.replace(/^\n+/g,""),I=I.replace(/\n+$/g,""),I="<pre><code"+(k?' class="'+k+" language-"+k+'"':"")+">"+I+R+"</code></pre>",I=r.subParser("hashBlock")(I,y,_),`

G`+(_.ghCodeBlocks.push({text:E,codeblock:I})-1)+`G

`}),f=f.replace(/0/,""),_.converter._dispatch("githubCodeBlocks.after",f,y,_)):f}),r.subParser("hashBlock",function(f,y,_){return f=_.converter._dispatch("hashBlock.before",f,y,_),f=f.replace(/(^\n+|\n+$)/g,""),f=`

K`+(_.gHtmlBlocks.push(f)-1)+`K

`,f=_.converter._dispatch("hashBlock.after",f,y,_),f}),r.subParser("hashCodeTags",function(f,y,_){f=_.converter._dispatch("hashCodeTags.before",f,y,_);var E=function(T,k,I,R){var V=I+r.subParser("encodeCode")(k,y,_)+R;return"C"+(_.gHtmlSpans.push(V)-1)+"C"};return f=r.helper.replaceRecursiveRegExp(f,E,"<code\\b[^>]*>","</code>","gim"),f=_.converter._dispatch("hashCodeTags.after",f,y,_),f}),r.subParser("hashElement",function(f,y,_){return function(E,T){var k=T;return k=k.replace(/\n\n/g,`
`),k=k.replace(/^\n/,""),k=k.replace(/\n+$/g,""),k=`

K`+(_.gHtmlBlocks.push(k)-1)+`K

`,k}}),r.subParser("hashHTMLBlocks",function(f,y,_){f=_.converter._dispatch("hashHTMLBlocks.before",f,y,_);var E=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],T=function(F,O,W,te){var he=F;return W.search(/\bmarkdown\b/)!==-1&&(he=W+_.converter.makeHtml(O)+te),`

K`+(_.gHtmlBlocks.push(he)-1)+`K

`};y.backslashEscapesHTMLTags&&(f=f.replace(/\\<(\/?[^>]+?)>/g,function(F,O){return"&lt;"+O+"&gt;"}));for(var k=0;k<E.length;++k)for(var I,R=new RegExp("^ {0,3}(<"+E[k]+"\\b[^>]*>)","im"),V="<"+E[k]+"\\b[^>]*>",A="</"+E[k]+">";(I=r.helper.regexIndexOf(f,R))!==-1;){var X=r.helper.splitAtIndex(f,I),ee=r.helper.replaceRecursiveRegExp(X[1],T,V,A,"im");if(ee===X[1])break;f=X[0].concat(ee)}return f=f.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(f,y,_)),f=r.helper.replaceRecursiveRegExp(f,function(F){return`

K`+(_.gHtmlBlocks.push(F)-1)+`K

`},"^ {0,3}<!--","-->","gm"),f=f.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(f,y,_)),f=_.converter._dispatch("hashHTMLBlocks.after",f,y,_),f}),r.subParser("hashHTMLSpans",function(f,y,_){f=_.converter._dispatch("hashHTMLSpans.before",f,y,_);function E(T){return"C"+(_.gHtmlSpans.push(T)-1)+"C"}return f=f.replace(/<[^>]+?\/>/gi,function(T){return E(T)}),f=f.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(T){return E(T)}),f=f.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(T){return E(T)}),f=f.replace(/<[^>]+?>/gi,function(T){return E(T)}),f=_.converter._dispatch("hashHTMLSpans.after",f,y,_),f}),r.subParser("unhashHTMLSpans",function(f,y,_){f=_.converter._dispatch("unhashHTMLSpans.before",f,y,_);for(var E=0;E<_.gHtmlSpans.length;++E){for(var T=_.gHtmlSpans[E],k=0;/C(\d+)C/.test(T);){var I=RegExp.$1;if(T=T.replace("C"+I+"C",_.gHtmlSpans[I]),k===10){console.error("maximum nesting of 10 spans reached!!!");break}++k}f=f.replace("C"+E+"C",T)}return f=_.converter._dispatch("unhashHTMLSpans.after",f,y,_),f}),r.subParser("hashPreCodeTags",function(f,y,_){f=_.converter._dispatch("hashPreCodeTags.before",f,y,_);var E=function(T,k,I,R){var V=I+r.subParser("encodeCode")(k,y,_)+R;return`

G`+(_.ghCodeBlocks.push({text:T,codeblock:V})-1)+`G

`};return f=r.helper.replaceRecursiveRegExp(f,E,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),f=_.converter._dispatch("hashPreCodeTags.after",f,y,_),f}),r.subParser("headers",function(f,y,_){f=_.converter._dispatch("headers.before",f,y,_);var E=isNaN(parseInt(y.headerLevelStart))?1:parseInt(y.headerLevelStart),T=y.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,k=y.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;f=f.replace(T,function(V,A){var X=r.subParser("spanGamut")(A,y,_),ee=y.noHeaderId?"":' id="'+R(A)+'"',F=E,O="<h"+F+ee+">"+X+"</h"+F+">";return r.subParser("hashBlock")(O,y,_)}),f=f.replace(k,function(V,A){var X=r.subParser("spanGamut")(A,y,_),ee=y.noHeaderId?"":' id="'+R(A)+'"',F=E+1,O="<h"+F+ee+">"+X+"</h"+F+">";return r.subParser("hashBlock")(O,y,_)});var I=y.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;f=f.replace(I,function(V,A,X){var ee=X;y.customizedHeaderId&&(ee=X.replace(/\s?\{([^{]+?)}\s*$/,""));var F=r.subParser("spanGamut")(ee,y,_),O=y.noHeaderId?"":' id="'+R(X)+'"',W=E-1+A.length,te="<h"+W+O+">"+F+"</h"+W+">";return r.subParser("hashBlock")(te,y,_)});function R(V){var A,X;if(y.customizedHeaderId){var ee=V.match(/\{([^{]+?)}\s*$/);ee&&ee[1]&&(V=ee[1])}return A=V,r.helper.isString(y.prefixHeaderId)?X=y.prefixHeaderId:y.prefixHeaderId===!0?X="section-":X="",y.rawPrefixHeaderId||(A=X+A),y.ghCompatibleHeaderId?A=A.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():y.rawHeaderId?A=A.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():A=A.replace(/[^\w]/g,"").toLowerCase(),y.rawPrefixHeaderId&&(A=X+A),_.hashLinkCounts[A]?A=A+"-"+_.hashLinkCounts[A]++:_.hashLinkCounts[A]=1,A}return f=_.converter._dispatch("headers.after",f,y,_),f}),r.subParser("horizontalRule",function(f,y,_){f=_.converter._dispatch("horizontalRule.before",f,y,_);var E=r.subParser("hashBlock")("<hr />",y,_);return f=f.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,E),f=f.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,E),f=f.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,E),f=_.converter._dispatch("horizontalRule.after",f,y,_),f}),r.subParser("images",function(f,y,_){f=_.converter._dispatch("images.before",f,y,_);var E=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,T=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,k=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,I=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,R=/!\[([^\[\]]+)]()()()()()/g;function V(X,ee,F,O,W,te,he,H){return O=O.replace(/\s/g,""),A(X,ee,F,O,W,te,he,H)}function A(X,ee,F,O,W,te,he,H){var ae=_.gUrls,ne=_.gTitles,_e=_.gDimensions;if(F=F.toLowerCase(),H||(H=""),X.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)O="";else if(O===""||O===null)if((F===""||F===null)&&(F=ee.toLowerCase().replace(/ ?\n/g," ")),O="#"+F,!r.helper.isUndefined(ae[F]))O=ae[F],r.helper.isUndefined(ne[F])||(H=ne[F]),r.helper.isUndefined(_e[F])||(W=_e[F].width,te=_e[F].height);else return X;ee=ee.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),O=O.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var pe='<img src="'+O+'" alt="'+ee+'"';return H&&r.helper.isString(H)&&(H=H.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),pe+=' title="'+H+'"'),W&&te&&(W=W==="*"?"auto":W,te=te==="*"?"auto":te,pe+=' width="'+W+'"',pe+=' height="'+te+'"'),pe+=" />",pe}return f=f.replace(I,A),f=f.replace(k,V),f=f.replace(T,A),f=f.replace(E,A),f=f.replace(R,A),f=_.converter._dispatch("images.after",f,y,_),f}),r.subParser("italicsAndBold",function(f,y,_){f=_.converter._dispatch("italicsAndBold.before",f,y,_);function E(T,k,I){return k+T+I}return y.literalMidWordUnderscores?(f=f.replace(/\b___(\S[\s\S]*?)___\b/g,function(T,k){return E(k,"<strong><em>","</em></strong>")}),f=f.replace(/\b__(\S[\s\S]*?)__\b/g,function(T,k){return E(k,"<strong>","</strong>")}),f=f.replace(/\b_(\S[\s\S]*?)_\b/g,function(T,k){return E(k,"<em>","</em>")})):(f=f.replace(/___(\S[\s\S]*?)___/g,function(T,k){return/\S$/.test(k)?E(k,"<strong><em>","</em></strong>"):T}),f=f.replace(/__(\S[\s\S]*?)__/g,function(T,k){return/\S$/.test(k)?E(k,"<strong>","</strong>"):T}),f=f.replace(/_([^\s_][\s\S]*?)_/g,function(T,k){return/\S$/.test(k)?E(k,"<em>","</em>"):T})),y.literalMidWordAsterisks?(f=f.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(T,k,I){return E(I,k+"<strong><em>","</em></strong>")}),f=f.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(T,k,I){return E(I,k+"<strong>","</strong>")}),f=f.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(T,k,I){return E(I,k+"<em>","</em>")})):(f=f.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(T,k){return/\S$/.test(k)?E(k,"<strong><em>","</em></strong>"):T}),f=f.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(T,k){return/\S$/.test(k)?E(k,"<strong>","</strong>"):T}),f=f.replace(/\*([^\s*][\s\S]*?)\*/g,function(T,k){return/\S$/.test(k)?E(k,"<em>","</em>"):T})),f=_.converter._dispatch("italicsAndBold.after",f,y,_),f}),r.subParser("lists",function(f,y,_){function E(I,R){_.gListLevel++,I=I.replace(/\n{2,}$/,`
`),I+="0";var V=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,A=/\n[ \t]*\n(?!0)/.test(I);return y.disableForced4SpacesIndentedSublists&&(V=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),I=I.replace(V,function(X,ee,F,O,W,te,he){he=he&&he.trim()!=="";var H=r.subParser("outdent")(W,y,_),ae="";return te&&y.tasklists&&(ae=' class="task-list-item" style="list-style-type: none;"',H=H.replace(/^[ \t]*\[(x|X| )?]/m,function(){var ne='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return he&&(ne+=" checked"),ne+=">",ne})),H=H.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(ne){return"A"+ne}),ee||H.search(/\n{2,}/)>-1?(H=r.subParser("githubCodeBlocks")(H,y,_),H=r.subParser("blockGamut")(H,y,_)):(H=r.subParser("lists")(H,y,_),H=H.replace(/\n$/,""),H=r.subParser("hashHTMLBlocks")(H,y,_),H=H.replace(/\n\n+/g,`

`),A?H=r.subParser("paragraphs")(H,y,_):H=r.subParser("spanGamut")(H,y,_)),H=H.replace("A",""),H="<li"+ae+">"+H+`</li>
`,H}),I=I.replace(/0/g,""),_.gListLevel--,R&&(I=I.replace(/\s+$/,"")),I}function T(I,R){if(R==="ol"){var V=I.match(/^ *(\d+)\./);if(V&&V[1]!=="1")return' start="'+V[1]+'"'}return""}function k(I,R,V){var A=y.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,X=y.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,ee=R==="ul"?A:X,F="";if(I.search(ee)!==-1)(function W(te){var he=te.search(ee),H=T(I,R);he!==-1?(F+=`

<`+R+H+`>
`+E(te.slice(0,he),!!V)+"</"+R+`>
`,R=R==="ul"?"ol":"ul",ee=R==="ul"?A:X,W(te.slice(he))):F+=`

<`+R+H+`>
`+E(te,!!V)+"</"+R+`>
`})(I);else{var O=T(I,R);F=`

<`+R+O+`>
`+E(I,!!V)+"</"+R+`>
`}return F}return f=_.converter._dispatch("lists.before",f,y,_),f+="0",_.gListLevel?f=f.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(I,R,V){var A=V.search(/[*+-]/g)>-1?"ul":"ol";return k(R,A,!0)}):f=f.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(I,R,V,A){var X=A.search(/[*+-]/g)>-1?"ul":"ol";return k(V,X,!1)}),f=f.replace(/0/,""),f=_.converter._dispatch("lists.after",f,y,_),f}),r.subParser("metadata",function(f,y,_){if(!y.metadata)return f;f=_.converter._dispatch("metadata.before",f,y,_);function E(T){_.metadata.raw=T,T=T.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),T=T.replace(/\n {4}/g," "),T.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(k,I,R){return _.metadata.parsed[I]=R,""})}return f=f.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(T,k,I){return E(I),"M"}),f=f.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(T,k,I){return k&&(_.metadata.format=k),E(I),"M"}),f=f.replace(/M/g,""),f=_.converter._dispatch("metadata.after",f,y,_),f}),r.subParser("outdent",function(f,y,_){return f=_.converter._dispatch("outdent.before",f,y,_),f=f.replace(/^(\t|[ ]{1,4})/gm,"0"),f=f.replace(/0/g,""),f=_.converter._dispatch("outdent.after",f,y,_),f}),r.subParser("paragraphs",function(f,y,_){f=_.converter._dispatch("paragraphs.before",f,y,_),f=f.replace(/^\n+/g,""),f=f.replace(/\n+$/g,"");for(var E=f.split(/\n{2,}/g),T=[],k=E.length,I=0;I<k;I++){var R=E[I];R.search(/(K|G)(\d+)\1/g)>=0?T.push(R):R.search(/\S/)>=0&&(R=r.subParser("spanGamut")(R,y,_),R=R.replace(/^([ \t]*)/g,"<p>"),R+="</p>",T.push(R))}for(k=T.length,I=0;I<k;I++){for(var V="",A=T[I],X=!1;/(K|G)(\d+)\1/.test(A);){var ee=RegExp.$1,F=RegExp.$2;ee==="K"?V=_.gHtmlBlocks[F]:X?V=r.subParser("encodeCode")(_.ghCodeBlocks[F].text,y,_):V=_.ghCodeBlocks[F].codeblock,V=V.replace(/\$/g,"$$$$"),A=A.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,V),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(A)&&(X=!0)}T[I]=A}return f=T.join(`
`),f=f.replace(/^\n+/g,""),f=f.replace(/\n+$/g,""),_.converter._dispatch("paragraphs.after",f,y,_)}),r.subParser("runExtension",function(f,y,_,E){if(f.filter)y=f.filter(y,E.converter,_);else if(f.regex){var T=f.regex;T instanceof RegExp||(T=new RegExp(T,"g")),y=y.replace(T,f.replace)}return y}),r.subParser("spanGamut",function(f,y,_){return f=_.converter._dispatch("spanGamut.before",f,y,_),f=r.subParser("codeSpans")(f,y,_),f=r.subParser("escapeSpecialCharsWithinTagAttributes")(f,y,_),f=r.subParser("encodeBackslashEscapes")(f,y,_),f=r.subParser("images")(f,y,_),f=r.subParser("anchors")(f,y,_),f=r.subParser("autoLinks")(f,y,_),f=r.subParser("simplifiedAutoLinks")(f,y,_),f=r.subParser("emoji")(f,y,_),f=r.subParser("underline")(f,y,_),f=r.subParser("italicsAndBold")(f,y,_),f=r.subParser("strikethrough")(f,y,_),f=r.subParser("ellipsis")(f,y,_),f=r.subParser("hashHTMLSpans")(f,y,_),f=r.subParser("encodeAmpsAndAngles")(f,y,_),y.simpleLineBreaks?/\n\nK/.test(f)||(f=f.replace(/\n+/g,`<br />
`)):f=f.replace(/  +\n/g,`<br />
`),f=_.converter._dispatch("spanGamut.after",f,y,_),f}),r.subParser("strikethrough",function(f,y,_){function E(T){return y.simplifiedAutoLink&&(T=r.subParser("simplifiedAutoLinks")(T,y,_)),"<del>"+T+"</del>"}return y.strikethrough&&(f=_.converter._dispatch("strikethrough.before",f,y,_),f=f.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(T,k){return E(k)}),f=_.converter._dispatch("strikethrough.after",f,y,_)),f}),r.subParser("stripLinkDefinitions",function(f,y,_){var E=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,T=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;f+="0";var k=function(I,R,V,A,X,ee,F){return R=R.toLowerCase(),V.match(/^data:.+?\/.+?;base64,/)?_.gUrls[R]=V.replace(/\s/g,""):_.gUrls[R]=r.subParser("encodeAmpsAndAngles")(V,y,_),ee?ee+F:(F&&(_.gTitles[R]=F.replace(/"|'/g,"&quot;")),y.parseImgDimensions&&A&&X&&(_.gDimensions[R]={width:A,height:X}),"")};return f=f.replace(T,k),f=f.replace(E,k),f=f.replace(/0/,""),f}),r.subParser("tables",function(f,y,_){if(!y.tables)return f;var E=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,T=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function k(X){return/^:[ \t]*--*$/.test(X)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(X)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(X)?' style="text-align:center;"':""}function I(X,ee){var F="";return X=X.trim(),(y.tablesHeaderId||y.tableHeaderId)&&(F=' id="'+X.replace(/ /g,"_").toLowerCase()+'"'),X=r.subParser("spanGamut")(X,y,_),"<th"+F+ee+">"+X+`</th>
`}function R(X,ee){var F=r.subParser("spanGamut")(X,y,_);return"<td"+ee+">"+F+`</td>
`}function V(X,ee){for(var F=`<table>
<thead>
<tr>
`,O=X.length,W=0;W<O;++W)F+=X[W];for(F+=`</tr>
</thead>
<tbody>
`,W=0;W<ee.length;++W){F+=`<tr>
`;for(var te=0;te<O;++te)F+=ee[W][te];F+=`</tr>
`}return F+=`</tbody>
</table>
`,F}function A(X){var ee,F=X.split(`
`);for(ee=0;ee<F.length;++ee)/^ {0,3}\|/.test(F[ee])&&(F[ee]=F[ee].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(F[ee])&&(F[ee]=F[ee].replace(/\|[ \t]*$/,"")),F[ee]=r.subParser("codeSpans")(F[ee],y,_);var O=F[0].split("|").map(function(pe){return pe.trim()}),W=F[1].split("|").map(function(pe){return pe.trim()}),te=[],he=[],H=[],ae=[];for(F.shift(),F.shift(),ee=0;ee<F.length;++ee)F[ee].trim()!==""&&te.push(F[ee].split("|").map(function(pe){return pe.trim()}));if(O.length<W.length)return X;for(ee=0;ee<W.length;++ee)H.push(k(W[ee]));for(ee=0;ee<O.length;++ee)r.helper.isUndefined(H[ee])&&(H[ee]=""),he.push(I(O[ee],H[ee]));for(ee=0;ee<te.length;++ee){for(var ne=[],_e=0;_e<he.length;++_e)r.helper.isUndefined(te[ee][_e]),ne.push(R(te[ee][_e],H[_e]));ae.push(ne)}return V(he,ae)}return f=_.converter._dispatch("tables.before",f,y,_),f=f.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),f=f.replace(E,A),f=f.replace(T,A),f=_.converter._dispatch("tables.after",f,y,_),f}),r.subParser("underline",function(f,y,_){return y.underline&&(f=_.converter._dispatch("underline.before",f,y,_),y.literalMidWordUnderscores?(f=f.replace(/\b___(\S[\s\S]*?)___\b/g,function(E,T){return"<u>"+T+"</u>"}),f=f.replace(/\b__(\S[\s\S]*?)__\b/g,function(E,T){return"<u>"+T+"</u>"})):(f=f.replace(/___(\S[\s\S]*?)___/g,function(E,T){return/\S$/.test(T)?"<u>"+T+"</u>":E}),f=f.replace(/__(\S[\s\S]*?)__/g,function(E,T){return/\S$/.test(T)?"<u>"+T+"</u>":E})),f=f.replace(/(_)/g,r.helper.escapeCharactersCallback),f=_.converter._dispatch("underline.after",f,y,_)),f}),r.subParser("unescapeSpecialChars",function(f,y,_){return f=_.converter._dispatch("unescapeSpecialChars.before",f,y,_),f=f.replace(/E(\d+)E/g,function(E,T){var k=parseInt(T);return String.fromCharCode(k)}),f=_.converter._dispatch("unescapeSpecialChars.after",f,y,_),f}),r.subParser("makeMarkdown.blockquote",function(f,y){var _="";if(f.hasChildNodes())for(var E=f.childNodes,T=E.length,k=0;k<T;++k){var I=r.subParser("makeMarkdown.node")(E[k],y);I!==""&&(_+=I)}return _=_.trim(),_="> "+_.split(`
`).join(`
> `),_}),r.subParser("makeMarkdown.codeBlock",function(f,y){var _=f.getAttribute("language"),E=f.getAttribute("precodenum");return"```"+_+`
`+y.preList[E]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(f){return"`"+f.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(f,y){var _="";if(f.hasChildNodes()){_+="*";for(var E=f.childNodes,T=E.length,k=0;k<T;++k)_+=r.subParser("makeMarkdown.node")(E[k],y);_+="*"}return _}),r.subParser("makeMarkdown.header",function(f,y,_){var E=new Array(_+1).join("#"),T="";if(f.hasChildNodes()){T=E+" ";for(var k=f.childNodes,I=k.length,R=0;R<I;++R)T+=r.subParser("makeMarkdown.node")(k[R],y)}return T}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(f){var y="";return f.hasAttribute("src")&&(y+="!["+f.getAttribute("alt")+"](",y+="<"+f.getAttribute("src")+">",f.hasAttribute("width")&&f.hasAttribute("height")&&(y+=" ="+f.getAttribute("width")+"x"+f.getAttribute("height")),f.hasAttribute("title")&&(y+=' "'+f.getAttribute("title")+'"'),y+=")"),y}),r.subParser("makeMarkdown.links",function(f,y){var _="";if(f.hasChildNodes()&&f.hasAttribute("href")){var E=f.childNodes,T=E.length;_="[";for(var k=0;k<T;++k)_+=r.subParser("makeMarkdown.node")(E[k],y);_+="](",_+="<"+f.getAttribute("href")+">",f.hasAttribute("title")&&(_+=' "'+f.getAttribute("title")+'"'),_+=")"}return _}),r.subParser("makeMarkdown.list",function(f,y,_){var E="";if(!f.hasChildNodes())return"";for(var T=f.childNodes,k=T.length,I=f.getAttribute("start")||1,R=0;R<k;++R)if(!(typeof T[R].tagName>"u"||T[R].tagName.toLowerCase()!=="li")){var V="";_==="ol"?V=I.toString()+". ":V="- ",E+=V+r.subParser("makeMarkdown.listItem")(T[R],y),++I}return E+=`
<!-- -->
`,E.trim()}),r.subParser("makeMarkdown.listItem",function(f,y){for(var _="",E=f.childNodes,T=E.length,k=0;k<T;++k)_+=r.subParser("makeMarkdown.node")(E[k],y);return/\n$/.test(_)?_=_.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):_+=`
`,_}),r.subParser("makeMarkdown.node",function(f,y,_){_=_||!1;var E="";if(f.nodeType===3)return r.subParser("makeMarkdown.txt")(f,y);if(f.nodeType===8)return"<!--"+f.data+`-->

`;if(f.nodeType!==1)return"";var T=f.tagName.toLowerCase();switch(T){case"h1":_||(E=r.subParser("makeMarkdown.header")(f,y,1)+`

`);break;case"h2":_||(E=r.subParser("makeMarkdown.header")(f,y,2)+`

`);break;case"h3":_||(E=r.subParser("makeMarkdown.header")(f,y,3)+`

`);break;case"h4":_||(E=r.subParser("makeMarkdown.header")(f,y,4)+`

`);break;case"h5":_||(E=r.subParser("makeMarkdown.header")(f,y,5)+`

`);break;case"h6":_||(E=r.subParser("makeMarkdown.header")(f,y,6)+`

`);break;case"p":_||(E=r.subParser("makeMarkdown.paragraph")(f,y)+`

`);break;case"blockquote":_||(E=r.subParser("makeMarkdown.blockquote")(f,y)+`

`);break;case"hr":_||(E=r.subParser("makeMarkdown.hr")(f,y)+`

`);break;case"ol":_||(E=r.subParser("makeMarkdown.list")(f,y,"ol")+`

`);break;case"ul":_||(E=r.subParser("makeMarkdown.list")(f,y,"ul")+`

`);break;case"precode":_||(E=r.subParser("makeMarkdown.codeBlock")(f,y)+`

`);break;case"pre":_||(E=r.subParser("makeMarkdown.pre")(f,y)+`

`);break;case"table":_||(E=r.subParser("makeMarkdown.table")(f,y)+`

`);break;case"code":E=r.subParser("makeMarkdown.codeSpan")(f,y);break;case"em":case"i":E=r.subParser("makeMarkdown.emphasis")(f,y);break;case"strong":case"b":E=r.subParser("makeMarkdown.strong")(f,y);break;case"del":E=r.subParser("makeMarkdown.strikethrough")(f,y);break;case"a":E=r.subParser("makeMarkdown.links")(f,y);break;case"img":E=r.subParser("makeMarkdown.image")(f,y);break;default:E=f.outerHTML+`

`}return E}),r.subParser("makeMarkdown.paragraph",function(f,y){var _="";if(f.hasChildNodes())for(var E=f.childNodes,T=E.length,k=0;k<T;++k)_+=r.subParser("makeMarkdown.node")(E[k],y);return _=_.trim(),_}),r.subParser("makeMarkdown.pre",function(f,y){var _=f.getAttribute("prenum");return"<pre>"+y.preList[_]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(f,y){var _="";if(f.hasChildNodes()){_+="~~";for(var E=f.childNodes,T=E.length,k=0;k<T;++k)_+=r.subParser("makeMarkdown.node")(E[k],y);_+="~~"}return _}),r.subParser("makeMarkdown.strong",function(f,y){var _="";if(f.hasChildNodes()){_+="**";for(var E=f.childNodes,T=E.length,k=0;k<T;++k)_+=r.subParser("makeMarkdown.node")(E[k],y);_+="**"}return _}),r.subParser("makeMarkdown.table",function(f,y){var _="",E=[[],[]],T=f.querySelectorAll("thead>tr>th"),k=f.querySelectorAll("tbody>tr"),I,R;for(I=0;I<T.length;++I){var V=r.subParser("makeMarkdown.tableCell")(T[I],y),A="---";if(T[I].hasAttribute("style")){var X=T[I].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(X){case"text-align:left;":A=":---";break;case"text-align:right;":A="---:";break;case"text-align:center;":A=":---:";break}}E[0][I]=V.trim(),E[1][I]=A}for(I=0;I<k.length;++I){var ee=E.push([])-1,F=k[I].getElementsByTagName("td");for(R=0;R<T.length;++R){var O=" ";typeof F[R]<"u"&&(O=r.subParser("makeMarkdown.tableCell")(F[R],y)),E[ee].push(O)}}var W=3;for(I=0;I<E.length;++I)for(R=0;R<E[I].length;++R){var te=E[I][R].length;te>W&&(W=te)}for(I=0;I<E.length;++I){for(R=0;R<E[I].length;++R)I===1?E[I][R].slice(-1)===":"?E[I][R]=r.helper.padEnd(E[I][R].slice(-1),W-1,"-")+":":E[I][R]=r.helper.padEnd(E[I][R],W,"-"):E[I][R]=r.helper.padEnd(E[I][R],W);_+="| "+E[I].join(" | ")+` |
`}return _.trim()}),r.subParser("makeMarkdown.tableCell",function(f,y){var _="";if(!f.hasChildNodes())return"";for(var E=f.childNodes,T=E.length,k=0;k<T;++k)_+=r.subParser("makeMarkdown.node")(E[k],y,!0);return _.trim()}),r.subParser("makeMarkdown.txt",function(f){var y=f.nodeValue;return y=y.replace(/ +/g," "),y=y.replace(/NBSP;/g," "),y=r.helper.unescapeHTMLEntities(y),y=y.replace(/([*_~|`])/g,"\\$1"),y=y.replace(/^(\s*)>/g,"\\$1>"),y=y.replace(/^#/gm,"\\#"),y=y.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),y=y.replace(/^( {0,3}\d+)\./gm,"$1\\."),y=y.replace(/^( {0,3})([+-])/gm,"$1\\$2"),y=y.replace(/]([\s]*)\(/g,"\\]$1\\("),y=y.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),y});var Y=this;i.exports?i.exports=r:Y.showdown=r}).call(_0)}(il)),il.exports}var y0=v0();const w0=Wa(y0);function E0({currentNote:i,updateNote:e}){const[t,r]=$i.useState("write"),o=new w0.Converter({tables:!0,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0});return dt.jsx("section",{className:"pane editor",children:dt.jsx(g0,{value:i==null?void 0:i.body,onChange:e,selectedTab:t,onTabChange:r,generateMarkdownPreview:l=>Promise.resolve(o.makeHtml(l)),minEditorHeight:80,heightUnits:"vh"})})}var dd={exports:{}},fd,mm;function T0(){if(mm)return fd;mm=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return fd=i,fd}var hd,gm;function S0(){if(gm)return hd;gm=1;var i=T0();function e(){}function t(){}return t.resetWarningCache=e,hd=function(){function r(c,h,g,v,C,D){if(D!==i){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function o(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},hd}var _m;function I0(){return _m||(_m=1,dd.exports=S0()()),dd.exports}var k0=I0();const Qe=Wa(k0);var un=typeof window<"u"?window:null,Qd=un===null,xa=Qd?void 0:un.document,Tn="addEventListener",Sn="removeEventListener",pd="getBoundingClientRect",Aa="_a",In="_b",mr="_c",Yu="horizontal",kn=function(){return!1},C0=Qd?"calc":["","-webkit-","-moz-","-o-"].filter(function(i){var e=xa.createElement("div");return e.style.cssText="width:"+i+"calc(9px)",!!e.style.length}).shift()+"calc",Og=function(i){return typeof i=="string"||i instanceof String},vm=function(i){if(Og(i)){var e=xa.querySelector(i);if(!e)throw new Error("Selector "+i+" did not match a DOM element");return e}return i},Pt=function(i,e,t){var r=i[e];return r!==void 0?r:t},Ju=function(i,e,t,r){if(e){if(r==="end")return 0;if(r==="center")return i/2}else if(t){if(r==="start")return 0;if(r==="center")return i/2}return i},A0=function(i,e){var t=xa.createElement("div");return t.className="gutter gutter-"+e,t},b0=function(i,e,t){var r={};return Og(e)?r[i]=e:r[i]=C0+"("+e+"% - "+t+"px)",r},P0=function(i,e){var t;return t={},t[i]=e+"px",t},ym=function(i,e){if(e===void 0&&(e={}),Qd)return{};var t=i,r,o,l,c,h,g;Array.from&&(t=Array.from(t));var v=vm(t[0]),C=v.parentNode,D=getComputedStyle?getComputedStyle(C):null,b=D?D.flexDirection:null,L=Pt(e,"sizes")||t.map(function(){return 100/t.length}),j=Pt(e,"minSize",100),x=Array.isArray(j)?j:t.map(function(){return j}),$=Pt(e,"maxSize",1/0),Q=Array.isArray($)?$:t.map(function(){return $}),U=Pt(e,"expandToMin",!1),Y=Pt(e,"gutterSize",10),f=Pt(e,"gutterAlign","center"),y=Pt(e,"snapOffset",30),_=Array.isArray(y)?y:t.map(function(){return y}),E=Pt(e,"dragInterval",1),T=Pt(e,"direction",Yu),k=Pt(e,"cursor",T===Yu?"col-resize":"row-resize"),I=Pt(e,"gutter",A0),R=Pt(e,"elementStyle",b0),V=Pt(e,"gutterStyle",P0);T===Yu?(r="width",o="clientX",l="left",c="right",h="clientWidth"):T==="vertical"&&(r="height",o="clientY",l="top",c="bottom",h="clientHeight");function A(ce,se,de,ve){var je=R(r,se,de,ve);Object.keys(je).forEach(function(qe){ce.style[qe]=je[qe]})}function X(ce,se,de){var ve=V(r,se,de);Object.keys(ve).forEach(function(je){ce.style[je]=ve[je]})}function ee(){return g.map(function(ce){return ce.size})}function F(ce){return"touches"in ce?ce.touches[0][o]:ce[o]}function O(ce){var se=g[this.a],de=g[this.b],ve=se.size+de.size;se.size=ce/this.size*ve,de.size=ve-ce/this.size*ve,A(se.element,se.size,this[In],se.i),A(de.element,de.size,this[mr],de.i)}function W(ce){var se,de=g[this.a],ve=g[this.b];this.dragging&&(se=F(ce)-this.start+(this[In]-this.dragOffset),E>1&&(se=Math.round(se/E)*E),se<=de.minSize+de.snapOffset+this[In]?se=de.minSize+this[In]:se>=this.size-(ve.minSize+ve.snapOffset+this[mr])&&(se=this.size-(ve.minSize+this[mr])),se>=de.maxSize-de.snapOffset+this[In]?se=de.maxSize+this[In]:se<=this.size-(ve.maxSize-ve.snapOffset+this[mr])&&(se=this.size-(ve.maxSize+this[mr])),O.call(this,se),Pt(e,"onDrag",kn)(ee()))}function te(){var ce=g[this.a].element,se=g[this.b].element,de=ce[pd](),ve=se[pd]();this.size=de[r]+ve[r]+this[In]+this[mr],this.start=de[l],this.end=de[c]}function he(ce){if(!getComputedStyle)return null;var se=getComputedStyle(ce);if(!se)return null;var de=ce[h];return de===0?null:(T===Yu?de-=parseFloat(se.paddingLeft)+parseFloat(se.paddingRight):de-=parseFloat(se.paddingTop)+parseFloat(se.paddingBottom),de)}function H(ce){var se=he(C);if(se===null||x.reduce(function(qe,at){return qe+at},0)>se)return ce;var de=0,ve=[],je=ce.map(function(qe,at){var It=se*qe/100,bn=Ju(Y,at===0,at===ce.length-1,f),fn=x[at]+bn;return It<fn?(de+=fn-It,ve.push(0),fn):(ve.push(It-fn),It)});return de===0?ce:je.map(function(qe,at){var It=qe;if(de>0&&ve[at]-de>0){var bn=Math.min(de,ve[at]-de);de-=bn,It=qe-bn}return It/se*100})}function ae(){var ce=this,se=g[ce.a].element,de=g[ce.b].element;ce.dragging&&Pt(e,"onDragEnd",kn)(ee()),ce.dragging=!1,un[Sn]("mouseup",ce.stop),un[Sn]("touchend",ce.stop),un[Sn]("touchcancel",ce.stop),un[Sn]("mousemove",ce.move),un[Sn]("touchmove",ce.move),ce.stop=null,ce.move=null,se[Sn]("selectstart",kn),se[Sn]("dragstart",kn),de[Sn]("selectstart",kn),de[Sn]("dragstart",kn),se.style.userSelect="",se.style.webkitUserSelect="",se.style.MozUserSelect="",se.style.pointerEvents="",de.style.userSelect="",de.style.webkitUserSelect="",de.style.MozUserSelect="",de.style.pointerEvents="",ce.gutter.style.cursor="",ce.parent.style.cursor="",xa.body.style.cursor=""}function ne(ce){if(!("button"in ce&&ce.button!==0)){var se=this,de=g[se.a].element,ve=g[se.b].element;se.dragging||Pt(e,"onDragStart",kn)(ee()),ce.preventDefault(),se.dragging=!0,se.move=W.bind(se),se.stop=ae.bind(se),un[Tn]("mouseup",se.stop),un[Tn]("touchend",se.stop),un[Tn]("touchcancel",se.stop),un[Tn]("mousemove",se.move),un[Tn]("touchmove",se.move),de[Tn]("selectstart",kn),de[Tn]("dragstart",kn),ve[Tn]("selectstart",kn),ve[Tn]("dragstart",kn),de.style.userSelect="none",de.style.webkitUserSelect="none",de.style.MozUserSelect="none",de.style.pointerEvents="none",ve.style.userSelect="none",ve.style.webkitUserSelect="none",ve.style.MozUserSelect="none",ve.style.pointerEvents="none",se.gutter.style.cursor=k,se.parent.style.cursor=k,xa.body.style.cursor=k,te.call(se),se.dragOffset=F(ce)-se.end}}L=H(L);var _e=[];g=t.map(function(ce,se){var de={element:vm(ce),size:L[se],minSize:x[se],maxSize:Q[se],snapOffset:_[se],i:se},ve;if(se>0&&(ve={a:se-1,b:se,dragging:!1,direction:T,parent:C},ve[In]=Ju(Y,se-1===0,!1,f),ve[mr]=Ju(Y,!1,se===t.length-1,f),b==="row-reverse"||b==="column-reverse")){var je=ve.a;ve.a=ve.b,ve.b=je}if(se>0){var qe=I(se,T,de.element);X(qe,Y,se),ve[Aa]=ne.bind(ve),qe[Tn]("mousedown",ve[Aa]),qe[Tn]("touchstart",ve[Aa]),C.insertBefore(qe,de.element),ve.gutter=qe}return A(de.element,de.size,Ju(Y,se===0,se===t.length-1,f),se),se>0&&_e.push(ve),de});function pe(ce){var se=ce.i===_e.length,de=se?_e[ce.i-1]:_e[ce.i];te.call(de);var ve=se?de.size-ce.minSize-de[mr]:ce.minSize+de[In];O.call(de,ve)}g.forEach(function(ce){var se=ce.element[pd]()[r];se<ce.minSize&&(U?pe(ce):ce.minSize=se)});function Me(ce){var se=H(ce);se.forEach(function(de,ve){if(ve>0){var je=_e[ve-1],qe=g[je.a],at=g[je.b];qe.size=se[ve-1],at.size=de,A(qe.element,qe.size,je[In],qe.i),A(at.element,at.size,je[mr],at.i)}})}function Fe(ce,se){_e.forEach(function(de){if(se!==!0?de.parent.removeChild(de.gutter):(de.gutter[Sn]("mousedown",de[Aa]),de.gutter[Sn]("touchstart",de[Aa])),ce!==!0){var ve=R(r,de.a.size,de[In]);Object.keys(ve).forEach(function(je){g[de.a].element.style[je]="",g[de.b].element.style[je]=""})}})}return{setSizes:Me,getSizes:ee,collapse:function(se){pe(g[se])},destroy:Fe,parent:C,pairs:_e}};function md(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)===-1&&(t[r]=i[r]);return t}var Xd=function(i){function e(){i.apply(this,arguments)}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e.prototype.componentDidMount=function(){var r=this.props;r.children;var o=r.gutter,l=md(r,["children","gutter"]),c=l;c.gutter=function(h,g){var v;return o?v=o(h,g):(v=document.createElement("div"),v.className="gutter gutter-"+g),v.__isSplitGutter=!0,v},this.split=ym(this.parent.children,c)},e.prototype.componentDidUpdate=function(r){var o=this,l=this.props;l.children;var c=l.minSize,h=l.sizes,g=l.collapsed,v=md(l,["children","minSize","sizes","collapsed"]),C=v,D=r.minSize,b=r.sizes,L=r.collapsed,j=["maxSize","expandToMin","gutterSize","gutterAlign","snapOffset","dragInterval","direction","cursor"],x=j.map(function(U){return o.props[U]!==r[U]}).reduce(function(U,Y){return U||Y},!1);if(Array.isArray(c)&&Array.isArray(D)){var $=!1;c.forEach(function(U,Y){$=$||U!==D[Y]}),x=x||$}else Array.isArray(c)||Array.isArray(D)?x=!0:x=x||c!==D;if(x)C.minSize=c,C.sizes=h||this.split.getSizes(),this.split.destroy(!0,!0),C.gutter=function(U,Y,f){return f.previousSibling},this.split=ym(Array.from(this.parent.children).filter(function(U){return!U.__isSplitGutter}),C);else if(h){var Q=!1;h.forEach(function(U,Y){Q=Q||U!==b[Y]}),Q&&this.split.setSizes(this.props.sizes)}Number.isInteger(g)&&(g!==L||x)&&this.split.collapse(g)},e.prototype.componentWillUnmount=function(){this.split.destroy(),delete this.split},e.prototype.render=function(){var r=this,o=this.props;o.sizes,o.minSize,o.maxSize,o.expandToMin,o.gutterSize,o.gutterAlign,o.snapOffset,o.dragInterval,o.direction,o.cursor,o.gutter,o.elementStyle,o.gutterStyle,o.onDrag,o.onDragStart,o.onDragEnd,o.collapsed;var l=o.children,c=md(o,["sizes","minSize","maxSize","expandToMin","gutterSize","gutterAlign","snapOffset","dragInterval","direction","cursor","gutter","elementStyle","gutterStyle","onDrag","onDragStart","onDragEnd","collapsed","children"]),h=c;return $i.createElement("div",Object.assign({},{ref:function(g){r.parent=g}},h),l)},e}($i.Component);Xd.propTypes={sizes:Qe.arrayOf(Qe.number),minSize:Qe.oneOfType([Qe.number,Qe.arrayOf(Qe.number)]),maxSize:Qe.oneOfType([Qe.number,Qe.arrayOf(Qe.number)]),expandToMin:Qe.bool,gutterSize:Qe.number,gutterAlign:Qe.string,snapOffset:Qe.number,dragInterval:Qe.number,direction:Qe.string,cursor:Qe.string,gutter:Qe.func,elementStyle:Qe.func,gutterStyle:Qe.func,onDrag:Qe.func,onDragStart:Qe.func,onDragEnd:Qe.func,collapsed:Qe.number,children:Qe.arrayOf(Qe.element)};Xd.defaultProps={sizes:void 0,minSize:void 0,maxSize:void 0,expandToMin:void 0,gutterSize:void 0,gutterAlign:void 0,snapOffset:void 0,dragInterval:void 0,direction:void 0,cursor:void 0,gutter:void 0,elementStyle:void 0,gutterStyle:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0,collapsed:void 0,children:void 0};var wm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},R0=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=i[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=i[t++],c=i[t++],h=i[t++],g=((o&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},xg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const l=i[o],c=o+1<i.length,h=c?i[o+1]:0,g=o+2<i.length,v=g?i[o+2]:0,C=l>>2,D=(l&3)<<4|h>>4;let b=(h&15)<<2|v>>6,L=v&63;g||(L=64,c||(b=64)),r.push(t[C],t[D],t[b],t[L])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Lg(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):R0(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const l=t[i.charAt(o++)],h=o<i.length?t[i.charAt(o)]:0;++o;const v=o<i.length?t[i.charAt(o)]:64;++o;const D=o<i.length?t[i.charAt(o)]:64;if(++o,l==null||h==null||v==null||D==null)throw new D0;const b=l<<2|h>>4;if(r.push(b),v!==64){const L=h<<4&240|v>>2;if(r.push(L),D!==64){const j=v<<6&192|D;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class D0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N0=function(i){const e=Lg(i);return xg.encodeByteArray(e,!0)},dl=function(i){return N0(i).replace(/\./g,"")},M0=function(i){try{return xg.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=()=>V0().__FIREBASE_DEFAULTS__,L0=()=>{if(typeof process>"u"||typeof wm>"u")return;const i=wm.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},x0=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&M0(i[1]);return e&&JSON.parse(e)},Yd=()=>{try{return O0()||L0()||x0()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},F0=i=>{var e,t;return(t=(e=Yd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},j0=i=>{const e=F0(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Fg=()=>{var i;return(i=Yd())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},i);return[dl(JSON.stringify(t)),dl(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $0(){var i;const e=(i=Yd())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function q0(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function H0(){return!$0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jg(){try{return typeof indexedDB=="object"}catch{return!1}}function zg(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function W0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="FirebaseError";class ri extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=G0,Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cl.prototype.create)}}class Cl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?K0(l,r):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new ri(o,h,r)}}function K0(i,e){return i.replace(Q0,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Q0=/\{\$([^}]+)}/g;function fl(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=i[o],c=e[o];if(Em(l)&&Em(c)){if(!fl(l,c))return!1}else if(l!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Em(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=1e3,Y0=2,J0=4*60*60*1e3,Z0=.5;function Tm(i,e=X0,t=Y0){const r=e*Math.pow(t,i),o=Math.round(Z0*r*(Math.random()-.5)*2);return Math.min(J0,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(i){return i&&i._delegate?i._delegate:i}class gr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new z0;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n1(e))try{this.getOrInitializeService({instanceIdentifier:Ui})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=Ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ui){return this.instances.has(e)}getOptions(e=Ui){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);r===h&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:t1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ui){return this.component?this.component.multipleInstances?e:Ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t1(i){return i===Ui?void 0:i}function n1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new e1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})($e||($e={}));const i1={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},s1=$e.INFO,o1={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},a1=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=o1[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jd{constructor(e){this.name=e,this._logLevel=s1,this._logHandler=a1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const u1=(i,e)=>e.some(t=>i instanceof t);let Sm,Im;function l1(){return Sm||(Sm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c1(){return Im||(Im=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bg=new WeakMap,Ad=new WeakMap,Ug=new WeakMap,gd=new WeakMap,Zd=new WeakMap;function d1(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(Gr(i.result)),o()},c=()=>{r(i.error),o()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Bg.set(t,i)}).catch(()=>{}),Zd.set(e,i),e}function f1(i){if(Ad.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});Ad.set(i,e)}let bd={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Ad.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Ug.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gr(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function h1(i){bd=i(bd)}function p1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(_d(this),e,...t);return Ug.set(r,e.sort?e.sort():[e]),Gr(r)}:c1().includes(i)?function(...e){return i.apply(_d(this),e),Gr(Bg.get(this))}:function(...e){return Gr(i.apply(_d(this),e))}}function m1(i){return typeof i=="function"?p1(i):(i instanceof IDBTransaction&&f1(i),u1(i,l1())?new Proxy(i,bd):i)}function Gr(i){if(i instanceof IDBRequest)return d1(i);if(gd.has(i))return gd.get(i);const e=m1(i);return e!==i&&(gd.set(i,e),Zd.set(e,i)),e}const _d=i=>Zd.get(i);function $g(i,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const c=indexedDB.open(i,e),h=Gr(c);return r&&c.addEventListener("upgradeneeded",g=>{r(Gr(c.result),g.oldVersion,g.newVersion,Gr(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),h}const g1=["get","getKey","getAll","getAllKeys","count"],_1=["put","add","delete","clear"],vd=new Map;function km(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(vd.get(e))return vd.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=_1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||g1.includes(t)))return;const l=async function(c,...h){const g=this.transaction(c,o?"readwrite":"readonly");let v=g.store;return r&&(v=v.index(h.shift())),(await Promise.all([v[t](...h),o&&g.done]))[0]};return vd.set(e,l),l}h1(i=>({...i,get:(e,t,r)=>km(e,t)||i.get(e,t,r),has:(e,t)=>!!km(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(y1(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function y1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pd="@firebase/app",Cm="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new Jd("@firebase/app"),w1="@firebase/app-compat",E1="@firebase/analytics-compat",T1="@firebase/analytics",S1="@firebase/app-check-compat",I1="@firebase/app-check",k1="@firebase/auth",C1="@firebase/auth-compat",A1="@firebase/database",b1="@firebase/data-connect",P1="@firebase/database-compat",R1="@firebase/functions",D1="@firebase/functions-compat",N1="@firebase/installations",M1="@firebase/installations-compat",V1="@firebase/messaging",O1="@firebase/messaging-compat",L1="@firebase/performance",x1="@firebase/performance-compat",F1="@firebase/remote-config",j1="@firebase/remote-config-compat",z1="@firebase/storage",B1="@firebase/storage-compat",U1="@firebase/firestore",$1="@firebase/vertexai",q1="@firebase/firestore-compat",H1="firebase",W1="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="[DEFAULT]",G1={[Pd]:"fire-core",[w1]:"fire-core-compat",[T1]:"fire-analytics",[E1]:"fire-analytics-compat",[I1]:"fire-app-check",[S1]:"fire-app-check-compat",[k1]:"fire-auth",[C1]:"fire-auth-compat",[A1]:"fire-rtdb",[b1]:"fire-data-connect",[P1]:"fire-rtdb-compat",[R1]:"fire-fn",[D1]:"fire-fn-compat",[N1]:"fire-iid",[M1]:"fire-iid-compat",[V1]:"fire-fcm",[O1]:"fire-fcm-compat",[L1]:"fire-perf",[x1]:"fire-perf-compat",[F1]:"fire-rc",[j1]:"fire-rc-compat",[z1]:"fire-gcs",[B1]:"fire-gcs-compat",[U1]:"fire-fst",[q1]:"fire-fst-compat",[$1]:"fire-vertex","fire-js":"fire-js",[H1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new Map,K1=new Map,Dd=new Map;function Am(i,e){try{i.container.addComponent(e)}catch(t){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Yr(i){const e=i.name;if(Dd.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;Dd.set(e,i);for(const t of hl.values())Am(t,i);for(const t of K1.values())Am(t,i);return!0}function Ga(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new Cl("app","Firebase",Q1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=W1;function qg(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Rd,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw Kr.create("bad-app-name",{appName:String(o)});if(t||(t=Fg()),!t)throw Kr.create("no-options");const l=hl.get(o);if(l){if(fl(t,l.options)&&fl(r,l.config))return l;throw Kr.create("duplicate-app",{appName:o})}const c=new r1(o);for(const g of Dd.values())c.addComponent(g);const h=new X1(t,r,c);return hl.set(o,h),h}function Hg(i=Rd){const e=hl.get(i);if(!e&&i===Rd&&Fg())return qg();if(!e)throw Kr.create("no-app",{appName:i});return e}function zn(i,e,t){var r;let o=(r=G1[i])!==null&&r!==void 0?r:i;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const h=[`Unable to register library "${o}" with version "${e}":`];l&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(h.join(" "));return}Yr(new gr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="firebase-heartbeat-database",Z1=1,Fa="firebase-heartbeat-store";let yd=null;function Wg(){return yd||(yd=$g(J1,Z1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Fa)}catch(t){console.warn(t)}}}}).catch(i=>{throw Kr.create("idb-open",{originalErrorMessage:i.message})})),yd}async function ew(i){try{const t=(await Wg()).transaction(Fa),r=await t.objectStore(Fa).get(Gg(i));return await t.done,r}catch(e){if(e instanceof ri)_r.warn(e.message);else{const t=Kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(t.message)}}}async function bm(i,e){try{const r=(await Wg()).transaction(Fa,"readwrite");await r.objectStore(Fa).put(e,Gg(i)),await r.done}catch(t){if(t instanceof ri)_r.warn(t.message);else{const r=Kr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_r.warn(r.message)}}}function Gg(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=1024,nw=30*24*60*60*1e3;class rw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Pm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const h=new Date(c.date).valueOf();return Date.now()-h<=nw}),this._storage.overwrite(this._heartbeatsCache))}catch(r){_r.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Pm(),{heartbeatsToSend:r,unsentEntries:o}=iw(this._heartbeatsCache.heartbeats),l=dl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return _r.warn(t),""}}}function Pm(){return new Date().toISOString().substring(0,10)}function iw(i,e=tw){const t=[];let r=i.slice();for(const o of i){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Rm(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Rm(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class sw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jg()?zg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ew(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return bm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return bm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Rm(i){return dl(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(i){Yr(new gr("platform-logger",e=>new v1(e),"PRIVATE")),Yr(new gr("heartbeat",e=>new rw(e),"PRIVATE")),zn(Pd,Cm,i),zn(Pd,Cm,"esm2017"),zn("fire-js","")}ow("");var Dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wi,Kg;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,T){function k(){}k.prototype=T.prototype,E.D=T.prototype,E.prototype=new k,E.prototype.constructor=E,E.C=function(I,R,V){for(var A=Array(arguments.length-2),X=2;X<arguments.length;X++)A[X-2]=arguments[X];return T.prototype[R].apply(I,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(E,T,k){k||(k=0);var I=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)I[R]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(R=0;16>R;++R)I[R]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=E.g[0],k=E.g[1],R=E.g[2];var V=E.g[3],A=T+(V^k&(R^V))+I[0]+3614090360&4294967295;T=k+(A<<7&4294967295|A>>>25),A=V+(R^T&(k^R))+I[1]+3905402710&4294967295,V=T+(A<<12&4294967295|A>>>20),A=R+(k^V&(T^k))+I[2]+606105819&4294967295,R=V+(A<<17&4294967295|A>>>15),A=k+(T^R&(V^T))+I[3]+3250441966&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(V^k&(R^V))+I[4]+4118548399&4294967295,T=k+(A<<7&4294967295|A>>>25),A=V+(R^T&(k^R))+I[5]+1200080426&4294967295,V=T+(A<<12&4294967295|A>>>20),A=R+(k^V&(T^k))+I[6]+2821735955&4294967295,R=V+(A<<17&4294967295|A>>>15),A=k+(T^R&(V^T))+I[7]+4249261313&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(V^k&(R^V))+I[8]+1770035416&4294967295,T=k+(A<<7&4294967295|A>>>25),A=V+(R^T&(k^R))+I[9]+2336552879&4294967295,V=T+(A<<12&4294967295|A>>>20),A=R+(k^V&(T^k))+I[10]+4294925233&4294967295,R=V+(A<<17&4294967295|A>>>15),A=k+(T^R&(V^T))+I[11]+2304563134&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(V^k&(R^V))+I[12]+1804603682&4294967295,T=k+(A<<7&4294967295|A>>>25),A=V+(R^T&(k^R))+I[13]+4254626195&4294967295,V=T+(A<<12&4294967295|A>>>20),A=R+(k^V&(T^k))+I[14]+2792965006&4294967295,R=V+(A<<17&4294967295|A>>>15),A=k+(T^R&(V^T))+I[15]+1236535329&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(R^V&(k^R))+I[1]+4129170786&4294967295,T=k+(A<<5&4294967295|A>>>27),A=V+(k^R&(T^k))+I[6]+3225465664&4294967295,V=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(V^T))+I[11]+643717713&4294967295,R=V+(A<<14&4294967295|A>>>18),A=k+(V^T&(R^V))+I[0]+3921069994&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(R^V&(k^R))+I[5]+3593408605&4294967295,T=k+(A<<5&4294967295|A>>>27),A=V+(k^R&(T^k))+I[10]+38016083&4294967295,V=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(V^T))+I[15]+3634488961&4294967295,R=V+(A<<14&4294967295|A>>>18),A=k+(V^T&(R^V))+I[4]+3889429448&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(R^V&(k^R))+I[9]+568446438&4294967295,T=k+(A<<5&4294967295|A>>>27),A=V+(k^R&(T^k))+I[14]+3275163606&4294967295,V=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(V^T))+I[3]+4107603335&4294967295,R=V+(A<<14&4294967295|A>>>18),A=k+(V^T&(R^V))+I[8]+1163531501&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(R^V&(k^R))+I[13]+2850285829&4294967295,T=k+(A<<5&4294967295|A>>>27),A=V+(k^R&(T^k))+I[2]+4243563512&4294967295,V=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(V^T))+I[7]+1735328473&4294967295,R=V+(A<<14&4294967295|A>>>18),A=k+(V^T&(R^V))+I[12]+2368359562&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(k^R^V)+I[5]+4294588738&4294967295,T=k+(A<<4&4294967295|A>>>28),A=V+(T^k^R)+I[8]+2272392833&4294967295,V=T+(A<<11&4294967295|A>>>21),A=R+(V^T^k)+I[11]+1839030562&4294967295,R=V+(A<<16&4294967295|A>>>16),A=k+(R^V^T)+I[14]+4259657740&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(k^R^V)+I[1]+2763975236&4294967295,T=k+(A<<4&4294967295|A>>>28),A=V+(T^k^R)+I[4]+1272893353&4294967295,V=T+(A<<11&4294967295|A>>>21),A=R+(V^T^k)+I[7]+4139469664&4294967295,R=V+(A<<16&4294967295|A>>>16),A=k+(R^V^T)+I[10]+3200236656&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(k^R^V)+I[13]+681279174&4294967295,T=k+(A<<4&4294967295|A>>>28),A=V+(T^k^R)+I[0]+3936430074&4294967295,V=T+(A<<11&4294967295|A>>>21),A=R+(V^T^k)+I[3]+3572445317&4294967295,R=V+(A<<16&4294967295|A>>>16),A=k+(R^V^T)+I[6]+76029189&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(k^R^V)+I[9]+3654602809&4294967295,T=k+(A<<4&4294967295|A>>>28),A=V+(T^k^R)+I[12]+3873151461&4294967295,V=T+(A<<11&4294967295|A>>>21),A=R+(V^T^k)+I[15]+530742520&4294967295,R=V+(A<<16&4294967295|A>>>16),A=k+(R^V^T)+I[2]+3299628645&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(R^(k|~V))+I[0]+4096336452&4294967295,T=k+(A<<6&4294967295|A>>>26),A=V+(k^(T|~R))+I[7]+1126891415&4294967295,V=T+(A<<10&4294967295|A>>>22),A=R+(T^(V|~k))+I[14]+2878612391&4294967295,R=V+(A<<15&4294967295|A>>>17),A=k+(V^(R|~T))+I[5]+4237533241&4294967295,k=R+(A<<21&4294967295|A>>>11),A=T+(R^(k|~V))+I[12]+1700485571&4294967295,T=k+(A<<6&4294967295|A>>>26),A=V+(k^(T|~R))+I[3]+2399980690&4294967295,V=T+(A<<10&4294967295|A>>>22),A=R+(T^(V|~k))+I[10]+4293915773&4294967295,R=V+(A<<15&4294967295|A>>>17),A=k+(V^(R|~T))+I[1]+2240044497&4294967295,k=R+(A<<21&4294967295|A>>>11),A=T+(R^(k|~V))+I[8]+1873313359&4294967295,T=k+(A<<6&4294967295|A>>>26),A=V+(k^(T|~R))+I[15]+4264355552&4294967295,V=T+(A<<10&4294967295|A>>>22),A=R+(T^(V|~k))+I[6]+2734768916&4294967295,R=V+(A<<15&4294967295|A>>>17),A=k+(V^(R|~T))+I[13]+1309151649&4294967295,k=R+(A<<21&4294967295|A>>>11),A=T+(R^(k|~V))+I[4]+4149444226&4294967295,T=k+(A<<6&4294967295|A>>>26),A=V+(k^(T|~R))+I[11]+3174756917&4294967295,V=T+(A<<10&4294967295|A>>>22),A=R+(T^(V|~k))+I[2]+718787259&4294967295,R=V+(A<<15&4294967295|A>>>17),A=k+(V^(R|~T))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+T&4294967295,E.g[1]=E.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+V&4294967295}r.prototype.u=function(E,T){T===void 0&&(T=E.length);for(var k=T-this.blockSize,I=this.B,R=this.h,V=0;V<T;){if(R==0)for(;V<=k;)o(this,E,V),V+=this.blockSize;if(typeof E=="string"){for(;V<T;)if(I[R++]=E.charCodeAt(V++),R==this.blockSize){o(this,I),R=0;break}}else for(;V<T;)if(I[R++]=E[V++],R==this.blockSize){o(this,I),R=0;break}}this.h=R,this.o+=T},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var T=1;T<E.length-8;++T)E[T]=0;var k=8*this.o;for(T=E.length-8;T<E.length;++T)E[T]=k&255,k/=256;for(this.u(E),E=Array(16),T=k=0;4>T;++T)for(var I=0;32>I;I+=8)E[k++]=this.g[T]>>>I&255;return E};function l(E,T){var k=h;return Object.prototype.hasOwnProperty.call(k,E)?k[E]:k[E]=T(E)}function c(E,T){this.h=T;for(var k=[],I=!0,R=E.length-1;0<=R;R--){var V=E[R]|0;I&&V==T||(k[R]=V,I=!1)}this.g=k}var h={};function g(E){return-128<=E&&128>E?l(E,function(T){return new c([T|0],0>T?-1:0)}):new c([E|0],0>E?-1:0)}function v(E){if(isNaN(E)||!isFinite(E))return D;if(0>E)return $(v(-E));for(var T=[],k=1,I=0;E>=k;I++)T[I]=E/k|0,k*=4294967296;return new c(T,0)}function C(E,T){if(E.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E.charAt(0)=="-")return $(C(E.substring(1),T));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=v(Math.pow(T,8)),I=D,R=0;R<E.length;R+=8){var V=Math.min(8,E.length-R),A=parseInt(E.substring(R,R+V),T);8>V?(V=v(Math.pow(T,V)),I=I.j(V).add(v(A))):(I=I.j(k),I=I.add(v(A)))}return I}var D=g(0),b=g(1),L=g(16777216);i=c.prototype,i.m=function(){if(x(this))return-$(this).m();for(var E=0,T=1,k=0;k<this.g.length;k++){var I=this.i(k);E+=(0<=I?I:4294967296+I)*T,T*=4294967296}return E},i.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(j(this))return"0";if(x(this))return"-"+$(this).toString(E);for(var T=v(Math.pow(E,6)),k=this,I="";;){var R=f(k,T).g;k=Q(k,R.j(T));var V=((0<k.g.length?k.g[0]:k.h)>>>0).toString(E);if(k=R,j(k))return V+I;for(;6>V.length;)V="0"+V;I=V+I}},i.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function j(E){if(E.h!=0)return!1;for(var T=0;T<E.g.length;T++)if(E.g[T]!=0)return!1;return!0}function x(E){return E.h==-1}i.l=function(E){return E=Q(this,E),x(E)?-1:j(E)?0:1};function $(E){for(var T=E.g.length,k=[],I=0;I<T;I++)k[I]=~E.g[I];return new c(k,~E.h).add(b)}i.abs=function(){return x(this)?$(this):this},i.add=function(E){for(var T=Math.max(this.g.length,E.g.length),k=[],I=0,R=0;R<=T;R++){var V=I+(this.i(R)&65535)+(E.i(R)&65535),A=(V>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);I=A>>>16,V&=65535,A&=65535,k[R]=A<<16|V}return new c(k,k[k.length-1]&-2147483648?-1:0)};function Q(E,T){return E.add($(T))}i.j=function(E){if(j(this)||j(E))return D;if(x(this))return x(E)?$(this).j($(E)):$($(this).j(E));if(x(E))return $(this.j($(E)));if(0>this.l(L)&&0>E.l(L))return v(this.m()*E.m());for(var T=this.g.length+E.g.length,k=[],I=0;I<2*T;I++)k[I]=0;for(I=0;I<this.g.length;I++)for(var R=0;R<E.g.length;R++){var V=this.i(I)>>>16,A=this.i(I)&65535,X=E.i(R)>>>16,ee=E.i(R)&65535;k[2*I+2*R]+=A*ee,U(k,2*I+2*R),k[2*I+2*R+1]+=V*ee,U(k,2*I+2*R+1),k[2*I+2*R+1]+=A*X,U(k,2*I+2*R+1),k[2*I+2*R+2]+=V*X,U(k,2*I+2*R+2)}for(I=0;I<T;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=T;I<2*T;I++)k[I]=0;return new c(k,0)};function U(E,T){for(;(E[T]&65535)!=E[T];)E[T+1]+=E[T]>>>16,E[T]&=65535,T++}function Y(E,T){this.g=E,this.h=T}function f(E,T){if(j(T))throw Error("division by zero");if(j(E))return new Y(D,D);if(x(E))return T=f($(E),T),new Y($(T.g),$(T.h));if(x(T))return T=f(E,$(T)),new Y($(T.g),T.h);if(30<E.g.length){if(x(E)||x(T))throw Error("slowDivide_ only works with positive integers.");for(var k=b,I=T;0>=I.l(E);)k=y(k),I=y(I);var R=_(k,1),V=_(I,1);for(I=_(I,2),k=_(k,2);!j(I);){var A=V.add(I);0>=A.l(E)&&(R=R.add(k),V=A),I=_(I,1),k=_(k,1)}return T=Q(E,R.j(T)),new Y(R,T)}for(R=D;0<=E.l(T);){for(k=Math.max(1,Math.floor(E.m()/T.m())),I=Math.ceil(Math.log(k)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),V=v(k),A=V.j(T);x(A)||0<A.l(E);)k-=I,V=v(k),A=V.j(T);j(V)&&(V=b),R=R.add(V),E=Q(E,A)}return new Y(R,E)}i.A=function(E){return f(this,E).h},i.and=function(E){for(var T=Math.max(this.g.length,E.g.length),k=[],I=0;I<T;I++)k[I]=this.i(I)&E.i(I);return new c(k,this.h&E.h)},i.or=function(E){for(var T=Math.max(this.g.length,E.g.length),k=[],I=0;I<T;I++)k[I]=this.i(I)|E.i(I);return new c(k,this.h|E.h)},i.xor=function(E){for(var T=Math.max(this.g.length,E.g.length),k=[],I=0;I<T;I++)k[I]=this.i(I)^E.i(I);return new c(k,this.h^E.h)};function y(E){for(var T=E.g.length+1,k=[],I=0;I<T;I++)k[I]=E.i(I)<<1|E.i(I-1)>>>31;return new c(k,E.h)}function _(E,T){var k=T>>5;T%=32;for(var I=E.g.length-k,R=[],V=0;V<I;V++)R[V]=0<T?E.i(V+k)>>>T|E.i(V+k+1)<<32-T:E.i(V+k);return new c(R,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Kg=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=C,Wi=c}).apply(typeof Dm<"u"?Dm:typeof self<"u"?self:typeof window<"u"?window:{});var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qg,ba,Xg,sl,Nd,Yg,Jg,Zg;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,w){return u==Array.prototype||u==Object.prototype||(u[m]=w.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zu=="object"&&Zu];for(var m=0;m<u.length;++m){var w=u[m];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function o(u,m){if(m)e:{var w=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var G=u[N];if(!(G in w))break e;w=w[G]}u=u[u.length-1],N=w[u],m=m(N),m!=N&&m!=null&&e(w,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var w=0,N=!1,G={next:function(){if(!N&&w<u.length){var Z=w++;return{value:m(Z,u[Z]),done:!1}}return N=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function C(u,m,w){return u.call.apply(u.bind,arguments)}function D(u,m,w){if(!u)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,N),u.apply(m,G)}}return function(){return u.apply(m,arguments)}}function b(u,m,w){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?C:D,b.apply(null,arguments)}function L(u,m){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function j(u,m){function w(){}w.prototype=m.prototype,u.aa=m.prototype,u.prototype=new w,u.prototype.constructor=u,u.Qb=function(N,G,Z){for(var fe=Array(arguments.length-2),He=2;He<arguments.length;He++)fe[He-2]=arguments[He];return m.prototype[G].apply(N,fe)}}function x(u){const m=u.length;if(0<m){const w=Array(m);for(let N=0;N<m;N++)w[N]=u[N];return w}return[]}function $(u,m){for(let w=1;w<arguments.length;w++){const N=arguments[w];if(g(N)){const G=u.length||0,Z=N.length||0;u.length=G+Z;for(let fe=0;fe<Z;fe++)u[G+fe]=N[fe]}else u.push(N)}}class Q{constructor(m,w){this.i=m,this.j=w,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function U(u){return/^[\s\xa0]*$/.test(u)}function Y(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function f(u){return f[" "](u),u}f[" "]=function(){};var y=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function _(u,m,w){for(const N in u)m.call(w,u[N],N,u)}function E(u,m){for(const w in u)m.call(void 0,u[w],w,u)}function T(u){const m={};for(const w in u)m[w]=u[w];return m}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,m){let w,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(w in N)u[w]=N[w];for(let Z=0;Z<k.length;Z++)w=k[Z],Object.prototype.hasOwnProperty.call(N,w)&&(u[w]=N[w])}}function R(u){var m=1;u=u.split(":");const w=[];for(;0<m&&u.length;)w.push(u.shift()),m--;return u.length&&w.push(u.join(":")),w}function V(u){h.setTimeout(()=>{throw u},0)}function A(){var u=te;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class X{constructor(){this.h=this.g=null}add(m,w){const N=ee.get();N.set(m,w),this.h?this.h.next=N:this.g=N,this.h=N}}var ee=new Q(()=>new F,u=>u.reset());class F{constructor(){this.next=this.g=this.h=null}set(m,w){this.h=m,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let O,W=!1,te=new X,he=()=>{const u=h.Promise.resolve(void 0);O=()=>{u.then(H)}};var H=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(w){V(w)}var m=ee;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}W=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};h.addEventListener("test",w,m),h.removeEventListener("test",w,m)}catch{}return u}();function pe(u,m){if(ne.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var w=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(y){e:{try{f(m.nodeName);var G=!0;break e}catch{}G=!1}G||(m=null)}}else w=="mouseover"?m=u.fromElement:w=="mouseout"&&(m=u.toElement);this.relatedTarget=m,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&pe.aa.h.call(this)}}j(pe,ne);var Me={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),ce=0;function se(u,m,w,N,G){this.listener=u,this.proxy=null,this.src=m,this.type=w,this.capture=!!N,this.ha=G,this.key=++ce,this.da=this.fa=!1}function de(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ve(u){this.src=u,this.g={},this.h=0}ve.prototype.add=function(u,m,w,N,G){var Z=u.toString();u=this.g[Z],u||(u=this.g[Z]=[],this.h++);var fe=qe(u,m,N,G);return-1<fe?(m=u[fe],w||(m.fa=!1)):(m=new se(m,this.src,Z,!!N,G),m.fa=w,u.push(m)),m};function je(u,m){var w=m.type;if(w in u.g){var N=u.g[w],G=Array.prototype.indexOf.call(N,m,void 0),Z;(Z=0<=G)&&Array.prototype.splice.call(N,G,1),Z&&(de(m),u.g[w].length==0&&(delete u.g[w],u.h--))}}function qe(u,m,w,N){for(var G=0;G<u.length;++G){var Z=u[G];if(!Z.da&&Z.listener==m&&Z.capture==!!w&&Z.ha==N)return G}return-1}var at="closure_lm_"+(1e6*Math.random()|0),It={};function bn(u,m,w,N,G){if(Array.isArray(m)){for(var Z=0;Z<m.length;Z++)bn(u,m[Z],w,N,G);return null}return w=rs(w),u&&u[Fe]?u.K(m,w,v(N)?!!N.capture:!!N,G):fn(u,m,w,!1,N,G)}function fn(u,m,w,N,G,Z){if(!m)throw Error("Invalid event type");var fe=v(G)?!!G.capture:!!G,He=ii(u);if(He||(u[at]=He=new ve(u)),w=He.add(m,w,N,fe,Z),w.proxy)return w;if(N=uo(),w.proxy=N,N.src=u,N.listener=w,u.addEventListener)_e||(G=fe),G===void 0&&(G=!1),u.addEventListener(m.toString(),N,G);else if(u.attachEvent)u.attachEvent(ns(m.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function uo(){function u(w){return m.call(u.src,u.listener,w)}const m=Ja;return u}function lo(u,m,w,N,G){if(Array.isArray(m))for(var Z=0;Z<m.length;Z++)lo(u,m[Z],w,N,G);else N=v(N)?!!N.capture:!!N,w=rs(w),u&&u[Fe]?(u=u.i,m=String(m).toString(),m in u.g&&(Z=u.g[m],w=qe(Z,w,N,G),-1<w&&(de(Z[w]),Array.prototype.splice.call(Z,w,1),Z.length==0&&(delete u.g[m],u.h--)))):u&&(u=ii(u))&&(m=u.g[m.toString()],u=-1,m&&(u=qe(m,w,N,G)),(w=-1<u?m[u]:null)&&ts(w))}function ts(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Fe])je(m.i,u);else{var w=u.type,N=u.proxy;m.removeEventListener?m.removeEventListener(w,N,u.capture):m.detachEvent?m.detachEvent(ns(w),N):m.addListener&&m.removeListener&&m.removeListener(N),(w=ii(m))?(je(w,u),w.h==0&&(w.src=null,m[at]=null)):de(u)}}}function ns(u){return u in It?It[u]:It[u]="on"+u}function Ja(u,m){if(u.da)u=!0;else{m=new pe(m,this);var w=u.listener,N=u.ha||u.src;u.fa&&ts(u),u=w.call(N,m)}return u}function ii(u){return u=u[at],u instanceof ve?u:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function rs(u){return typeof u=="function"?u:(u[co]||(u[co]=function(m){return u.handleEvent(m)}),u[co])}function et(){ae.call(this),this.i=new ve(this),this.M=this,this.F=null}j(et,ae),et.prototype[Fe]=!0,et.prototype.removeEventListener=function(u,m,w,N){lo(this,u,m,w,N)};function ut(u,m){var w,N=u.F;if(N)for(w=[];N;N=N.F)w.push(N);if(u=u.M,N=m.type||m,typeof m=="string")m=new ne(m,u);else if(m instanceof ne)m.target=m.target||u;else{var G=m;m=new ne(N,u),I(m,G)}if(G=!0,w)for(var Z=w.length-1;0<=Z;Z--){var fe=m.g=w[Z];G=si(fe,N,!0,m)&&G}if(fe=m.g=u,G=si(fe,N,!0,m)&&G,G=si(fe,N,!1,m)&&G,w)for(Z=0;Z<w.length;Z++)fe=m.g=w[Z],G=si(fe,N,!1,m)&&G}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var w=u.g[m],N=0;N<w.length;N++)de(w[N]);delete u.g[m],u.h--}}this.F=null},et.prototype.K=function(u,m,w,N){return this.i.add(String(u),m,!1,w,N)},et.prototype.L=function(u,m,w,N){return this.i.add(String(u),m,!0,w,N)};function si(u,m,w,N){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var G=!0,Z=0;Z<m.length;++Z){var fe=m[Z];if(fe&&!fe.da&&fe.capture==w){var He=fe.listener,lt=fe.ha||fe.src;fe.fa&&je(u.i,fe),G=He.call(lt,N)!==!1&&G}}return G&&!N.defaultPrevented}function fo(u,m,w){if(typeof u=="function")w&&(u=b(u,w));else if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function ho(u){u.g=fo(()=>{u.g=null,u.i&&(u.i=!1,ho(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class po extends ae{constructor(m,w){super(),this.m=m,this.l=w,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ho(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(u){ae.call(this),this.h=u,this.g={}}j(wr,ae);var is=[];function oi(u){_(u.g,function(m,w){this.g.hasOwnProperty(w)&&ts(m)},u),u.g={}}wr.prototype.N=function(){wr.aa.N.call(this),oi(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ss=h.JSON.stringify,ai=h.JSON.parse,ui=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function mo(){}mo.prototype.h=null;function go(u){return u.h||(u.h=u.i())}function _o(){}var li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ci(){ne.call(this,"d")}j(ci,ne);function di(){ne.call(this,"c")}j(di,ne);var hn={},os=null;function pn(){return os=os||new et}hn.La="serverreachability";function Wn(u){ne.call(this,hn.La,u)}j(Wn,ne);function Er(u){const m=pn();ut(m,new Wn(m))}hn.STAT_EVENT="statevent";function vo(u,m){ne.call(this,hn.STAT_EVENT,u),this.stat=m}j(vo,ne);function mt(u){const m=pn();ut(m,new vo(m,u))}hn.Ma="timingevent";function as(u,m){ne.call(this,hn.Ma,u),this.size=m}j(as,ne);function Tr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Gn(){this.g=!0}Gn.prototype.xa=function(){this.g=!1};function Za(u,m,w,N,G,Z){u.info(function(){if(u.g)if(Z)for(var fe="",He=Z.split("&"),lt=0;lt<He.length;lt++){var ze=He[lt].split("=");if(1<ze.length){var gt=ze[0];ze=ze[1];var _t=gt.split("_");fe=2<=_t.length&&_t[1]=="type"?fe+(gt+"="+ze+"&"):fe+(gt+"=redacted&")}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+m+`
`+w+`
`+fe})}function Kn(u,m,w,N,G,Z,fe){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+m+`
`+w+`
`+Z+" "+fe})}function Pn(u,m,w,N){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+$l(u,w)+(N?" "+N:"")})}function yo(u,m){u.info(function(){return"TIMEOUT: "+m})}Gn.prototype.info=function(){};function $l(u,m){if(!u.g)return m;if(!m)return null;try{var w=JSON.parse(m);if(w){for(u=0;u<w.length;u++)if(Array.isArray(w[u])){var N=w[u];if(!(2>N.length)){var G=N[1];if(Array.isArray(G)&&!(1>G.length)){var Z=G[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var fe=1;fe<G.length;fe++)G[fe]=""}}}}return ss(w)}catch{return m}}var Rn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},us={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qn;function ls(){}j(ls,mo),ls.prototype.g=function(){return new XMLHttpRequest},ls.prototype.i=function(){return{}},Qn=new ls;function jt(u,m,w,N){this.j=u,this.i=m,this.l=w,this.R=N||1,this.U=new wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fi}function fi(){this.i=null,this.g="",this.h=!1}var hi={},pi={};function wo(u,m,w){u.L=1,u.v=ps(Mt(m)),u.m=w,u.P=!0,eu(u,null)}function eu(u,m){u.F=Date.now(),mi(u),u.A=Mt(u.v);var w=u.A,N=u.R;Array.isArray(N)||(N=[String(N)]),_s(w.i,"t",N),u.C=0,w=u.j.J,u.h=new fi,u.g=cu(u.j,w?m:null,!u.m),0<u.O&&(u.M=new po(b(u.Y,u,u.g),u.O)),m=u.U,w=u.g,N=u.ca;var G="readystatechange";Array.isArray(G)||(G&&(is[0]=G.toString()),G=is);for(var Z=0;Z<G.length;Z++){var fe=bn(w,G[Z],N||m.handleEvent,!1,m.h||m);if(!fe)break;m.g[fe.key]=fe}m=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Er(),Za(u.i,u.u,u.A,u.l,u.R,u.m)}jt.prototype.ca=function(u){u=u.target;const m=this.M;m&&Gt(u)==3?m.j():this.Y(u)},jt.prototype.Y=function(u){try{if(u==this.g)e:{const _t=Gt(this.g);var m=this.g.Ba();const Dr=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||ys(this.g)))){this.J||_t!=4||m==7||(m==8||0>=Dr?Er(3):Er(2)),To(this);var w=this.g.Z();this.X=w;t:if(tu(this)){var N=ys(this.g);u="";var G=N.length,Z=Gt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Dn(this),Sr(this);var fe="";break t}this.h.i=new h.TextDecoder}for(m=0;m<G;m++)this.h.h=!0,u+=this.h.i.decode(N[m],{stream:!(Z&&m==G-1)});N.length=0,this.h.g+=u,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=w==200,Kn(this.i,this.u,this.A,this.l,this.R,_t,w),this.o){if(this.T&&!this.K){t:{if(this.g){var He,lt=this.g;if((He=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(He)){var ze=He;break t}}ze=null}if(w=ze)Pn(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cs(this,w);else{this.o=!1,this.s=3,mt(12),Dn(this),Sr(this);break e}}if(this.P){w=!0;let Kt;for(;!this.J&&this.C<fe.length;)if(Kt=Xn(this,fe),Kt==pi){_t==4&&(this.s=4,mt(14),w=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==hi){this.s=4,mt(15),Pn(this.i,this.l,fe,"[Invalid Chunk]"),w=!1;break}else Pn(this.i,this.l,Kt,null),cs(this,Kt);if(tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||fe.length!=0||this.h.h||(this.s=1,mt(16),w=!1),this.o=this.o&&w,!w)Pn(this.i,this.l,fe,"[Invalid Chunked Response]"),Dn(this),Sr(this);else if(0<fe.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Ai(gt),gt.M=!0,mt(11))}}else Pn(this.i,this.l,fe,null),cs(this,fe);_t==4&&Dn(this),this.o&&!this.J&&(_t==4?No(this.j,this):(this.o=!1,mi(this)))}else Vn(this.g),w==400&&0<fe.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Dn(this),Sr(this)}}}catch{}finally{}};function tu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Xn(u,m){var w=u.C,N=m.indexOf(`
`,w);return N==-1?pi:(w=Number(m.substring(w,N)),isNaN(w)?hi:(N+=1,N+w>m.length?pi:(m=m.slice(N,N+w),u.C=N+w,m)))}jt.prototype.cancel=function(){this.J=!0,Dn(this)};function mi(u){u.S=Date.now()+u.I,Eo(u,u.I)}function Eo(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Tr(b(u.ba,u),m)}function To(u){u.B&&(h.clearTimeout(u.B),u.B=null)}jt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(yo(this.i,this.A),this.L!=2&&(Er(),mt(17)),Dn(this),this.s=2,Sr(this)):Eo(this,this.S-u)};function Sr(u){u.j.G==0||u.J||No(u.j,u)}function Dn(u){To(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,oi(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function cs(u,m){try{var w=u.j;if(w.G!=0&&(w.g==u||zt(w.h,u))){if(!u.K&&zt(w.h,u)&&w.G==3){try{var N=w.Da.g.parse(m)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<u.F)rr(w),er(w);else break e;Ci(w),mt(18)}}else w.za=G[1],0<w.za-w.T&&37500>G[2]&&w.F&&w.v==0&&!w.C&&(w.C=Tr(b(w.Za,w),6e3));if(1>=ds(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ir(w,11)}else if((u.K||w.g==u)&&rr(w),!U(m))for(G=w.Da.g.parse(m),m=0;m<G.length;m++){let ze=G[m];if(w.T=ze[0],ze=ze[1],w.G==2)if(ze[0]=="c"){w.K=ze[1],w.ia=ze[2];const gt=ze[3];gt!=null&&(w.la=gt,w.j.info("VER="+w.la));const _t=ze[4];_t!=null&&(w.Aa=_t,w.j.info("SVER="+w.Aa));const Dr=ze[5];Dr!=null&&typeof Dr=="number"&&0<Dr&&(N=1.5*Dr,w.L=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const Kt=u.g;if(Kt){const Ss=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ss){var Z=N.h;Z.g||Ss.indexOf("spdy")==-1&&Ss.indexOf("quic")==-1&&Ss.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Zt(Z,Z.h),Z.h=null))}if(N.D){const bi=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;bi&&(N.ya=bi,Ge(N.I,N.D,bi))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-u.F,w.j.info("Handshake RTT: "+w.R+"ms")),N=w;var fe=u;if(N.qa=Es(N,N.J?N.ia:null,N.W),fe.K){mn(N.h,fe);var He=fe,lt=N.L;lt&&(He.I=lt),He.B&&(To(He),mi(He)),N.g=fe}else au(N);0<w.i.length&&ki(w)}else ze[0]!="stop"&&ze[0]!="close"||ir(w,7);else w.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?ir(w,7):ws(w):ze[0]!="noop"&&w.l&&w.l.ta(ze),w.v=0)}}Er(4)}catch{}}var So=class{constructor(u,m){this.g=u,this.map=m}};function Io(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ko(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ds(u){return u.h?1:u.g?u.g.size:0}function zt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Zt(u,m){u.g?u.g.add(m):u.h=m}function mn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Io.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gn(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const w of u.g.values())m=m.concat(w.D);return m}return x(u.i)}function gi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],w=u.length,N=0;N<w;N++)m.push(u[N]);return m}m=[],w=0;for(N in u)m[w++]=u[N];return m}function _i(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var w=0;w<u;w++)m.push(w);return m}m=[],w=0;for(const N in u)m[w++]=N;return m}}}function Ir(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var w=_i(u),N=gi(u),G=N.length,Z=0;Z<G;Z++)m.call(void 0,N[Z],w&&w[Z],u)}var Co=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ao(u,m){if(u){u=u.split("&");for(var w=0;w<u.length;w++){var N=u[w].indexOf("="),G=null;if(0<=N){var Z=u[w].substring(0,N);G=u[w].substring(N+1)}else Z=u[w];m(Z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Nn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Nn){this.h=u.h,fs(this,u.j),this.o=u.o,this.g=u.g,hs(this,u.s),this.l=u.l;var m=u.i,w=new Cr;w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),vi(this,w),this.m=u.m}else u&&(m=String(u).match(Co))?(this.h=!1,fs(this,m[1]||"",!0),this.o=_n(m[2]||""),this.g=_n(m[3]||"",!0),hs(this,m[4]),this.l=_n(m[5]||"",!0),vi(this,m[6]||"",!0),this.m=_n(m[7]||"")):(this.h=!1,this.i=new Cr(null,this.h))}Nn.prototype.toString=function(){var u=[],m=this.j;m&&u.push(kr(m,Yn,!0),":");var w=this.g;return(w||m=="file")&&(u.push("//"),(m=this.o)&&u.push(kr(m,Yn,!0),"@"),u.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&u.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(kr(w,w.charAt(0)=="/"?nu:bo,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",kr(w,ru)),u.join("")};function Mt(u){return new Nn(u)}function fs(u,m,w){u.j=w?_n(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function hs(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function vi(u,m,w){m instanceof Cr?(u.i=m,Do(u.i,u.h)):(w||(m=kr(m,gs)),u.i=new Cr(m,u.h))}function Ge(u,m,w){u.i.set(m,w)}function ps(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function _n(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function kr(u,m,w){return typeof u=="string"?(u=encodeURI(u).replace(m,ms),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ms(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Yn=/[#\/\?@]/g,bo=/[#\?:]/g,nu=/[#\?]/g,gs=/[#\?@]/g,ru=/#/g;function Cr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function vn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ao(u.i,function(m,w){u.add(decodeURIComponent(m.replace(/\+/g," ")),w)}))}i=Cr.prototype,i.add=function(u,m){vn(this),this.i=null,u=Ar(this,u);var w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(m),this.h+=1,this};function Po(u,m){vn(u),m=Ar(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ro(u,m){return vn(u),m=Ar(u,m),u.g.has(m)}i.forEach=function(u,m){vn(this),this.g.forEach(function(w,N){w.forEach(function(G){u.call(m,G,N,this)},this)},this)},i.na=function(){vn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),w=[];for(let N=0;N<m.length;N++){const G=u[N];for(let Z=0;Z<G.length;Z++)w.push(m[N])}return w},i.V=function(u){vn(this);let m=[];if(typeof u=="string")Ro(this,u)&&(m=m.concat(this.g.get(Ar(this,u))));else{u=Array.from(this.g.values());for(let w=0;w<u.length;w++)m=m.concat(u[w])}return m},i.set=function(u,m){return vn(this),this.i=null,u=Ar(this,u),Ro(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},i.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function _s(u,m,w){Po(u,m),0<w.length&&(u.i=null,u.g.set(Ar(u,m),x(w)),u.h+=w.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var w=0;w<m.length;w++){var N=m[w];const Z=encodeURIComponent(String(N)),fe=this.V(N);for(N=0;N<fe.length;N++){var G=Z;fe[N]!==""&&(G+="="+encodeURIComponent(String(fe[N]))),u.push(G)}}return this.i=u.join("&")};function Ar(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Do(u,m){m&&!u.j&&(vn(u),u.i=null,u.g.forEach(function(w,N){var G=N.toLowerCase();N!=G&&(Po(this,N),_s(this,G,w))},u)),u.j=m}function ql(u,m){const w=new Gn;if(h.Image){const N=new Image;N.onload=L(Vt,w,"TestLoadImage: loaded",!0,m,N),N.onerror=L(Vt,w,"TestLoadImage: error",!1,m,N),N.onabort=L(Vt,w,"TestLoadImage: abort",!1,m,N),N.ontimeout=L(Vt,w,"TestLoadImage: timeout",!1,m,N),h.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else m(!1)}function Ke(u,m){const w=new Gn,N=new AbortController,G=setTimeout(()=>{N.abort(),Vt(w,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:N.signal}).then(Z=>{clearTimeout(G),Z.ok?Vt(w,"TestPingServer: ok",!0,m):Vt(w,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(G),Vt(w,"TestPingServer: error",!1,m)})}function Vt(u,m,w,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(w)}catch{}}function Hl(){this.g=new ui}function Wl(u,m,w){const N=w||"";try{Ir(u,function(G,Z){let fe=G;v(G)&&(fe=ss(G)),m.push(N+Z+"="+encodeURIComponent(fe))})}catch(G){throw m.push(N+"type="+encodeURIComponent("_badmap")),G}}function Mn(u){this.l=u.Ub||null,this.j=u.eb||!1}j(Mn,mo),Mn.prototype.g=function(){return new yi(this.l,this.j)},Mn.prototype.i=function(u){return function(){return u}}({});function yi(u,m){et.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(yi,et),i=yi.prototype,i.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Jn(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,en(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function wi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?en(this):Jn(this),this.readyState==3&&wi(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,en(this))},i.Qa=function(u){this.g&&(this.response=u,en(this))},i.ga=function(){this.g&&en(this)};function en(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Jn(u)}i.setRequestHeader=function(u,m){this.u.append(u,m)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var w=m.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=m.next();return u.join(`\r
`)};function Jn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ei(u){let m="";return _(u,function(w,N){m+=N,m+=":",m+=w,m+=`\r
`}),m}function tn(u,m,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=Ei(w),typeof u=="string"?w!=null&&encodeURIComponent(String(w)):Ge(u,m,w))}function Je(u){et.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(Je,et);var Gl=/^https?$/i,Kl=["POST","PUT"];i=Je.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,m,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qn.g(),this.v=this.o?go(this.o):go(Qn),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Z){iu(this,Z);return}if(u=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)w.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())w.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Kl,m,void 0))||N||G||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of w)this.g.setRequestHeader(Z,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ou(this),this.u=!0,this.g.send(u),this.u=!1}catch(Z){iu(this,Z)}};function iu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,su(u),vs(u)}function su(u){u.A||(u.A=!0,ut(u,"complete"),ut(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ut(this,"complete"),ut(this,"abort"),vs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vs(this,!0)),Je.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ti(this):this.bb())},i.bb=function(){Ti(this)};function Ti(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Gt(u)!=4||u.Z()!=2)){if(u.u&&Gt(u)==4)fo(u.Ea,0,u);else if(ut(u,"readystatechange"),Gt(u)==4){u.h=!1;try{const fe=u.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var w;if(!(w=m)){var N;if(N=fe===0){var G=String(u.D).match(Co)[1]||null;!G&&h.self&&h.self.location&&(G=h.self.location.protocol.slice(0,-1)),N=!Gl.test(G?G.toLowerCase():"")}w=N}if(w)ut(u,"complete"),ut(u,"success");else{u.m=6;try{var Z=2<Gt(u)?u.g.statusText:""}catch{Z=""}u.l=Z+" ["+u.Z()+"]",su(u)}}finally{vs(u)}}}}function vs(u,m){if(u.g){ou(u);const w=u.g,N=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||ut(u,"ready");try{w.onreadystatechange=N}catch{}}}function ou(u){u.I&&(h.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function Gt(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ai(m)}};function ys(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Vn(u){const m={};u=(u.g&&2<=Gt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(U(u[N]))continue;var w=R(u[N]);const G=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=m[G]||[];m[G]=Z,Z.push(w)}E(m,function(N){return N.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zn(u,m,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||m}function Si(u){this.Aa=0,this.i=[],this.j=new Gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zn("baseRetryDelayMs",5e3,u),this.cb=Zn("retryDelaySeedMs",1e4,u),this.Wa=Zn("forwardChannelMaxRetries",2,u),this.wa=Zn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Io(u&&u.concurrentRequestLimit),this.Da=new Hl,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Si.prototype,i.la=8,i.G=1,i.connect=function(u,m,w,N){mt(0),this.W=u,this.H=m||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.I=Es(this,null,this.W),ki(this)};function ws(u){if(Ii(u),u.G==3){var m=u.U++,w=Mt(u.I);if(Ge(w,"SID",u.K),Ge(w,"RID",m),Ge(w,"TYPE","terminate"),nr(u,w),m=new jt(u,u.j,m),m.L=2,m.v=ps(Mt(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!w&&h.Image&&(new Image().src=m.v,w=!0),w||(m.g=cu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),mi(m)}lu(u)}function er(u){u.g&&(Ai(u),u.g.cancel(),u.g=null)}function Ii(u){er(u),u.u&&(h.clearTimeout(u.u),u.u=null),rr(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function ki(u){if(!ko(u.h)&&!u.s){u.s=!0;var m=u.Ga;O||he(),W||(O(),W=!0),te.add(m,u),u.B=0}}function Ot(u,m){return ds(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Tr(b(u.Ga,u,m),uu(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const G=new jt(this,this.j,u);let Z=this.o;if(this.S&&(Z?(Z=T(Z),I(Z,this.S)):Z=this.S),this.m!==null||this.O||(G.H=Z,Z=null),this.P)e:{for(var m=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(m+=N,4096<m){m=w;break e}if(m===4096||w===this.i.length-1){m=w+1;break e}}m=1e3}else m=1e3;m=br(this,G,m),w=Mt(this.I),Ge(w,"RID",u),Ge(w,"CVER",22),this.D&&Ge(w,"X-HTTP-Session-Id",this.D),nr(this,w),Z&&(this.O?m="headers="+encodeURIComponent(String(Ei(Z)))+"&"+m:this.m&&tn(w,this.m,Z)),Zt(this.h,G),this.Ua&&Ge(w,"TYPE","init"),this.P?(Ge(w,"$req",m),Ge(w,"SID","null"),G.T=!0,wo(G,w,null)):wo(G,w,m),this.G=2}}else this.G==3&&(u?tr(this,u):this.i.length==0||ko(this.h)||tr(this))};function tr(u,m){var w;m?w=m.l:w=u.U++;const N=Mt(u.I);Ge(N,"SID",u.K),Ge(N,"RID",w),Ge(N,"AID",u.T),nr(u,N),u.m&&u.o&&tn(N,u.m,u.o),w=new jt(u,u.j,w,u.B+1),u.m===null&&(w.H=u.o),m&&(u.i=m.D.concat(u.i)),m=br(u,w,1e3),w.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Zt(u.h,w),wo(w,N,m)}function nr(u,m){u.H&&_(u.H,function(w,N){Ge(m,N,w)}),u.l&&Ir({},function(w,N){Ge(m,N,w)})}function br(u,m,w){w=Math.min(u.i.length,w);var N=u.l?b(u.l.Na,u.l,u):null;e:{var G=u.i;let Z=-1;for(;;){const fe=["count="+w];Z==-1?0<w?(Z=G[0].g,fe.push("ofs="+Z)):Z=0:fe.push("ofs="+Z);let He=!0;for(let lt=0;lt<w;lt++){let ze=G[lt].g;const gt=G[lt].map;if(ze-=Z,0>ze)Z=Math.max(0,G[lt].g-100),He=!1;else try{Wl(gt,fe,"req"+ze+"_")}catch{N&&N(gt)}}if(He){N=fe.join("&");break e}}}return u=u.i.splice(0,w),m.D=u,N}function au(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;O||he(),W||(O(),W=!0),te.add(m,u),u.v=0}}function Ci(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Tr(b(u.Fa,u),uu(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,Pr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Tr(b(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),er(this),Pr(this))};function Ai(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function Pr(u){u.g=new jt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Mt(u.qa);Ge(m,"RID","rpc"),Ge(m,"SID",u.K),Ge(m,"AID",u.T),Ge(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(m,"TO",u.ja),Ge(m,"TYPE","xmlhttp"),nr(u,m),u.m&&u.o&&tn(m,u.m,u.o),u.L&&(u.g.I=u.L);var w=u.g;u=u.ia,w.L=1,w.v=ps(Mt(m)),w.m=null,w.P=!0,eu(w,u)}i.Za=function(){this.C!=null&&(this.C=null,er(this),Ci(this),mt(19))};function rr(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function No(u,m){var w=null;if(u.g==m){rr(u),Ai(u),u.g=null;var N=2}else if(zt(u.h,m))w=m.D,mn(u.h,m),N=1;else return;if(u.G!=0){if(m.o)if(N==1){w=m.m?m.m.length:0,m=Date.now()-m.F;var G=u.B;N=pn(),ut(N,new as(N,w)),ki(u)}else au(u);else if(G=m.s,G==3||G==0&&0<m.X||!(N==1&&Ot(u,m)||N==2&&Ci(u)))switch(w&&0<w.length&&(m=u.h,m.i=m.i.concat(w)),G){case 1:ir(u,5);break;case 4:ir(u,10);break;case 3:ir(u,6);break;default:ir(u,2)}}}function uu(u,m){let w=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(w*=2),w*m}function ir(u,m){if(u.j.info("Error code "+m),m==2){var w=b(u.fb,u),N=u.Xa;const G=!N;N=new Nn(N||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||fs(N,"https"),ps(N),G?ql(N.toString(),w):Ke(N.toString(),w)}else mt(2);u.G=0,u.l&&u.l.sa(m),lu(u),Ii(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function lu(u){if(u.G=0,u.ka=[],u.l){const m=gn(u.h);(m.length!=0||u.i.length!=0)&&($(u.ka,m),$(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function Es(u,m,w){var N=w instanceof Nn?Mt(w):new Nn(w);if(N.g!="")m&&(N.g=m+"."+N.g),hs(N,N.s);else{var G=h.location;N=G.protocol,m=m?m+"."+G.hostname:G.hostname,G=+G.port;var Z=new Nn(null);N&&fs(Z,N),m&&(Z.g=m),G&&hs(Z,G),w&&(Z.l=w),N=Z}return w=u.D,m=u.ya,w&&m&&Ge(N,w,m),Ge(N,"VER",u.la),nr(u,N),N}function cu(u,m,w){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Je(new Mn({eb:w})):new Je(u.pa),m.Ha(u.J),m}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function du(){}i=du.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ts(){}Ts.prototype.g=function(u,m){return new Lt(u,m)};function Lt(u,m){et.call(this),this.g=new Si(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!U(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!U(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Rr(this)}j(Lt,et),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){ws(this.g)},Lt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.u&&(w={},w.__data__=ss(u),u=w);m.i.push(new So(m.Ya++,u)),m.G==3&&ki(m)},Lt.prototype.N=function(){this.g.l=null,delete this.j,ws(this.g),delete this.g,Lt.aa.N.call(this)};function fu(u){ci.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const w in m){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}j(fu,ci);function Mo(){di.call(this),this.status=1}j(Mo,di);function Rr(u){this.g=u}j(Rr,du),Rr.prototype.ua=function(){ut(this.g,"a")},Rr.prototype.ta=function(u){ut(this.g,new fu(u))},Rr.prototype.sa=function(u){ut(this.g,new Mo)},Rr.prototype.ra=function(){ut(this.g,"b")},Ts.prototype.createWebChannel=Ts.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Zg=function(){return new Ts},Jg=function(){return pn()},Yg=hn,Nd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rn.NO_ERROR=0,Rn.TIMEOUT=8,Rn.HTTP_ERROR=6,sl=Rn,us.COMPLETE="complete",Xg=us,_o.EventType=li,li.OPEN="a",li.CLOSE="b",li.ERROR="c",li.MESSAGE="d",et.prototype.listen=et.prototype.K,ba=_o,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Qg=Je}).apply(typeof Zu<"u"?Zu:typeof self<"u"?self:typeof window<"u"?window:{});const Nm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Jd("@firebase/firestore");function qs(){return Ki.logLevel}function ge(i,...e){if(Ki.logLevel<=$e.DEBUG){const t=e.map(ef);Ki.debug(`Firestore (${io}): ${i}`,...t)}}function vr(i,...e){if(Ki.logLevel<=$e.ERROR){const t=e.map(ef);Ki.error(`Firestore (${io}): ${i}`,...t)}}function Xs(i,...e){if(Ki.logLevel<=$e.WARN){const t=e.map(ef);Ki.warn(`Firestore (${io}): ${i}`,...t)}}function ef(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(i="Unexpected state"){const e=`FIRESTORE (${io}) INTERNAL ASSERTION FAILED: `+i;throw vr(e),new Error(e)}function We(i,e){i||ke()}function Ne(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends ri{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dt.UNAUTHENTICATED))}shutdown(){}}class uw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lw{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let l=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Gi,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},h=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>h(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Gi)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string"),new e_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new Dt(e)}}class cw{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class dw{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new cw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hw{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){We(this.o===void 0);const r=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We(typeof t.token=="string"),this.R=t.token,new fw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=pw(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function xe(i,e){return i<e?-1:i>e?1:0}function Ys(i,e,t){return i.length===e.length&&i.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ht(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new ht(0,0))}static max(){return new Pe(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t,r){t===void 0?t=0:t>e.length&&ke(),r===void 0?r=e.length-t:r>e.length-t&&ke(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ja.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ja?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),c=t.get(o);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ze extends ja{construct(e,t,r){return new Ze(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Ze(t)}static emptyPath(){return new Ze([])}}const mw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends ja{construct(e,t,r){return new Tt(e,t,r)}static isValidIdentifier(e){return mw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new Te(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new Te(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Te(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(r+=h,o++):(l(),o++)}if(l(),c)throw new Te(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(t)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Ze.fromString(e))}static fromName(e){return new Se(Ze.fromString(e).popFirst(5))}static empty(){return new Se(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Ze(e.slice()))}}function gw(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(r===1e9?new ht(t+1,0):new ht(t,r));return new Jr(o,Se.empty(),e)}function _w(i){return new Jr(i.readTime,i.key,-1)}class Jr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Jr(Pe.min(),Se.empty(),-1)}static max(){return new Jr(Pe.max(),Se.empty(),-1)}}function vw(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(i.documentKey,e.documentKey),t!==0?t:xe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ww{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(i){if(i.code!==le.FAILED_PRECONDITION||i.message!==yw)throw i;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let o=0,l=0,c=!1;e.forEach(h=>{++o,h.next(()=>{++l,c&&l===o&&t()},g=>r(g))}),c=!0,l===o&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(o=>o?ie.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,o)=>{const l=e.length,c=new Array(l);let h=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next(C=>{c[v]=C,++h,h===l&&r(c)},C=>o(C))}})}static doWhile(e,t){return new ie((r,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):r()};l()})}}function Ew(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Al.oe=-1;function bl(i){return i==null}function pl(i){return i===0&&1/i==-1/0}function Tw(i){return typeof i=="number"&&Number.isInteger(i)&&!pl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Mm(e)),e=Iw(i.get(t),e);return Mm(e)}function Iw(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const l=i.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function Mm(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Yi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function n_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,t){this.comparator=e,this.root=t||Et.EMPTY}insert(e,t){return new tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new el(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new el(this.root,e,this.comparator,!1)}getReverseIterator(){return new el(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new el(this.root,e,this.comparator,!0)}}class el{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??Et.RED,this.left=o??Et.EMPTY,this.right=l??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Et(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Et.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const e=this.left.check();if(e!==this.right.check())throw ke();return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(e,t,r,o,l){return this}insert(e,t,r){return new Et(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Om(this.data.getIterator())}getIteratorFrom(e){return new Om(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pt(this.comparator);return t.data=e,t}}class Om{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new pt(Tt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ys(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new r_("Invalid base64 string: "+l):l}}(e);return new St(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new St(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const kw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(i){if(We(!!i),typeof i=="string"){let e=0;const t=kw.exec(i);if(We(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(i.seconds),nanos:st(i.nanos)}}function st(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ei(i){return typeof i=="string"?St.fromBase64String(i):St.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Pl(i){const e=i.mapValue.fields.__previous_value__;return tf(e)?Pl(e):e}function za(i){const e=Zr(i.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t,r,o,l,c,h,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=v}}class Ba{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ba("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ti(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?tf(i)?4:bw(i)?9007199254740991:Aw(i)?10:11:ke()}function qn(i,e){if(i===e)return!0;const t=ti(i);if(t!==ti(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return za(i).isEqual(za(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Zr(o.timestampValue),h=Zr(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,l){return ei(o.bytesValue).isEqual(ei(l.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,l){return st(o.geoPointValue.latitude)===st(l.geoPointValue.latitude)&&st(o.geoPointValue.longitude)===st(l.geoPointValue.longitude)}(i,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return st(o.integerValue)===st(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=st(o.doubleValue),h=st(l.doubleValue);return c===h?pl(c)===pl(h):isNaN(c)&&isNaN(h)}return!1}(i,e);case 9:return Ys(i.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},h=l.mapValue.fields||{};if(Vm(c)!==Vm(h))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(h[g]===void 0||!qn(c[g],h[g])))return!1;return!0}(i,e);default:return ke()}}function Ua(i,e){return(i.values||[]).find(t=>qn(t,e))!==void 0}function Js(i,e){if(i===e)return 0;const t=ti(i),r=ti(e);if(t!==r)return xe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(i.booleanValue,e.booleanValue);case 2:return function(l,c){const h=st(l.integerValue||l.doubleValue),g=st(c.integerValue||c.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1}(i,e);case 3:return Lm(i.timestampValue,e.timestampValue);case 4:return Lm(za(i),za(e));case 5:return xe(i.stringValue,e.stringValue);case 6:return function(l,c){const h=ei(l),g=ei(c);return h.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(l,c){const h=l.split("/"),g=c.split("/");for(let v=0;v<h.length&&v<g.length;v++){const C=xe(h[v],g[v]);if(C!==0)return C}return xe(h.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,c){const h=xe(st(l.latitude),st(c.latitude));return h!==0?h:xe(st(l.longitude),st(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return xm(i.arrayValue,e.arrayValue);case 10:return function(l,c){var h,g,v,C;const D=l.fields||{},b=c.fields||{},L=(h=D.value)===null||h===void 0?void 0:h.arrayValue,j=(g=b.value)===null||g===void 0?void 0:g.arrayValue,x=xe(((v=L==null?void 0:L.values)===null||v===void 0?void 0:v.length)||0,((C=j==null?void 0:j.values)===null||C===void 0?void 0:C.length)||0);return x!==0?x:xm(L,j)}(i.mapValue,e.mapValue);case 11:return function(l,c){if(l===tl.mapValue&&c===tl.mapValue)return 0;if(l===tl.mapValue)return 1;if(c===tl.mapValue)return-1;const h=l.fields||{},g=Object.keys(h),v=c.fields||{},C=Object.keys(v);g.sort(),C.sort();for(let D=0;D<g.length&&D<C.length;++D){const b=xe(g[D],C[D]);if(b!==0)return b;const L=Js(h[g[D]],v[C[D]]);if(L!==0)return L}return xe(g.length,C.length)}(i.mapValue,e.mapValue);default:throw ke()}}function Lm(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return xe(i,e);const t=Zr(i),r=Zr(e),o=xe(t.seconds,r.seconds);return o!==0?o:xe(t.nanos,r.nanos)}function xm(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=Js(t[o],r[o]);if(l)return l}return xe(t.length,r.length)}function Zs(i){return Md(i)}function Md(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=Zr(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return ei(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return Se.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=Md(l);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of r)l?l=!1:o+=",",o+=`${c}:${Md(t.fields[c])}`;return o+"}"}(i.mapValue):ke()}function ol(i){switch(ti(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pl(i);return e?16+ol(e):16;case 5:return 2*i.stringValue.length;case 6:return ei(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,l)=>o+ol(l),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return Yi(r.fields,(l,c)=>{o+=l.length+ol(c)}),o}(i.mapValue);default:throw ke()}}function Vd(i){return!!i&&"integerValue"in i}function nf(i){return!!i&&"arrayValue"in i}function Fm(i){return!!i&&"nullValue"in i}function jm(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function al(i){return!!i&&"mapValue"in i}function Aw(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Na(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Yi(i.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Na(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Na(i.arrayValue.values[t]);return e}return Object.assign({},i)}function bw(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!al(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Na(t)}setAll(e){let t=Tt.emptyPath(),r={},o=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=h.popLast()}c?r[h.lastSegment()]=Na(c):o.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());al(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];al(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Yi(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new ln(Na(this.value))}}function i_(i){const e=[];return Yi(i.fields,(t,r)=>{const o=new Tt([t]);if(al(r)){const l=i_(r.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t,r,o,l,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Nt(e,0,Pe.min(),Pe.min(),Pe.min(),ln.empty(),0)}static newFoundDocument(e,t,r,o){return new Nt(e,1,t,Pe.min(),r,o,0)}static newNoDocument(e,t){return new Nt(e,2,t,Pe.min(),Pe.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new Nt(e,3,t,Pe.min(),Pe.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,t){this.position=e,this.inclusive=t}}function zm(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const l=e[o],c=i.position[o];if(l.field.isKeyField()?r=Se.comparator(Se.fromName(c.referenceValue),t.key):r=Js(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bm(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!qn(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Pw(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{}class ft extends s_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Dw(e,t,r):t==="array-contains"?new Vw(e,r):t==="in"?new Ow(e,r):t==="not-in"?new Lw(e,r):t==="array-contains-any"?new xw(e,r):new ft(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Nw(e,r):new Mw(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Js(t,this.value)):t!==null&&ti(this.value)===ti(t)&&this.matchesComparison(Js(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hn extends s_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Hn(e,t)}matches(e){return o_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function o_(i){return i.op==="and"}function a_(i){return Rw(i)&&o_(i)}function Rw(i){for(const e of i.filters)if(e instanceof Hn)return!1;return!0}function Od(i){if(i instanceof ft)return i.field.canonicalString()+i.op.toString()+Zs(i.value);if(a_(i))return i.filters.map(e=>Od(e)).join(",");{const e=i.filters.map(t=>Od(t)).join(",");return`${i.op}(${e})`}}function u_(i,e){return i instanceof ft?function(r,o){return o instanceof ft&&r.op===o.op&&r.field.isEqual(o.field)&&qn(r.value,o.value)}(i,e):i instanceof Hn?function(r,o){return o instanceof Hn&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((l,c,h)=>l&&u_(c,o.filters[h]),!0):!1}(i,e):void ke()}function l_(i){return i instanceof ft?function(t){return`${t.field.canonicalString()} ${t.op} ${Zs(t.value)}`}(i):i instanceof Hn?function(t){return t.op.toString()+" {"+t.getFilters().map(l_).join(" ,")+"}"}(i):"Filter"}class Dw extends ft{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nw extends ft{constructor(e,t){super(e,"in",t),this.keys=c_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Mw extends ft{constructor(e,t){super(e,"not-in",t),this.keys=c_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function c_(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Se.fromName(r.referenceValue))}class Vw extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nf(t)&&Ua(t.arrayValue,this.value)}}class Ow extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ua(this.value.arrayValue,t)}}class Lw extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ua(this.value.arrayValue,t)}}class xw extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ua(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t=null,r=[],o=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=h,this.ue=null}}function Um(i,e=null,t=[],r=[],o=null,l=null,c=null){return new Fw(i,e,t,r,o,l,c)}function rf(i){const e=Ne(i);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Od(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),bl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zs(r)).join(",")),e.ue=t}return e.ue}function sf(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Pw(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!u_(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Bm(i.startAt,e.startAt)&&Bm(i.endAt,e.endAt)}function Ld(i){return Se.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t=null,r=[],o=[],l=null,c="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jw(i,e,t,r,o,l,c,h){return new Rl(i,e,t,r,o,l,c,h)}function of(i){return new Rl(i)}function $m(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function zw(i){return i.collectionGroup!==null}function Ma(i){const e=Ne(i);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new pt(Tt.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(h=h.add(v.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new gl(l,r))}),t.has(Tt.keyField().canonicalString())||e.ce.push(new gl(Tt.keyField(),r))}return e.ce}function Bn(i){const e=Ne(i);return e.le||(e.le=Bw(e,Ma(i))),e.le}function Bw(i,e){if(i.limitType==="F")return Um(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new gl(o.field,l)});const t=i.endAt?new ml(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new ml(i.startAt.position,i.startAt.inclusive):null;return Um(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function xd(i,e,t){return new Rl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Dl(i,e){return sf(Bn(i),Bn(e))&&i.limitType===e.limitType}function d_(i){return`${rf(Bn(i))}|lt:${i.limitType}`}function Hs(i){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>l_(o)).join(", ")}]`),bl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Zs(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Zs(o)).join(",")),`Target(${r})`}(Bn(i))}; limitType=${i.limitType})`}function Nl(i,e){return e.isFoundDocument()&&function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Se.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(i,e)&&function(r,o){for(const l of Ma(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(i,e)&&function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0}(i,e)&&function(r,o){return!(r.startAt&&!function(c,h,g){const v=zm(c,h,g);return c.inclusive?v<=0:v<0}(r.startAt,Ma(r),o)||r.endAt&&!function(c,h,g){const v=zm(c,h,g);return c.inclusive?v>=0:v>0}(r.endAt,Ma(r),o))}(i,e)}function Uw(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function f_(i){return(e,t)=>{let r=!1;for(const o of Ma(i)){const l=$w(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function $w(i,e,t){const r=i.field.isKeyField()?Se.comparator(e.key,t.key):function(l,c,h){const g=c.data.field(l),v=h.data.field(l);return g!==null&&v!==null?Js(g,v):ke()}(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Yi(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return n_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new tt(Se.comparator);function yr(){return qw}const h_=new tt(Se.comparator);function Pa(...i){let e=h_;for(const t of i)e=e.insert(t.key,t);return e}function p_(i){let e=h_;return i.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qi(){return Va()}function m_(){return Va()}function Va(){return new Ji(i=>i.toString(),(i,e)=>i.isEqual(e))}const Hw=new tt(Se.comparator),Ww=new pt(Se.comparator);function Le(...i){let e=Ww;for(const t of i)e=e.add(t);return e}const Gw=new pt(xe);function Kw(){return Gw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pl(e)?"-0":e}}function g_(i){return{integerValue:""+i}}function Qw(i,e){return Tw(e)?g_(e):af(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this._=void 0}}function Xw(i,e,t){return i instanceof _l?function(o,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&tf(l)&&(l=Pl(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(t,e):i instanceof $a?v_(i,e):i instanceof qa?y_(i,e):function(o,l){const c=__(o,l),h=qm(c)+qm(o.Pe);return Vd(c)&&Vd(o.Pe)?g_(h):af(o.serializer,h)}(i,e)}function Yw(i,e,t){return i instanceof $a?v_(i,e):i instanceof qa?y_(i,e):t}function __(i,e){return i instanceof vl?function(r){return Vd(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class _l extends Ml{}class $a extends Ml{constructor(e){super(),this.elements=e}}function v_(i,e){const t=w_(e);for(const r of i.elements)t.some(o=>qn(o,r))||t.push(r);return{arrayValue:{values:t}}}class qa extends Ml{constructor(e){super(),this.elements=e}}function y_(i,e){let t=w_(e);for(const r of i.elements)t=t.filter(o=>!qn(o,r));return{arrayValue:{values:t}}}class vl extends Ml{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function qm(i){return st(i.integerValue||i.doubleValue)}function w_(i){return nf(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function Jw(i,e){return i.field.isEqual(e.field)&&function(r,o){return r instanceof $a&&o instanceof $a||r instanceof qa&&o instanceof qa?Ys(r.elements,o.elements,qn):r instanceof vl&&o instanceof vl?qn(r.Pe,o.Pe):r instanceof _l&&o instanceof _l}(i.transform,e.transform)}class Zw{constructor(e,t){this.version=e,this.transformResults=t}}class Un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ul(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Vl{}function E_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new uf(i.key,Un.none()):new Ka(i.key,i.data,Un.none());{const t=i.data,r=ln.empty();let o=new pt(Tt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),o=o.add(l)}return new Zi(i.key,r,new Cn(o.toArray()),Un.none())}}function e3(i,e,t){i instanceof Ka?function(o,l,c){const h=o.value.clone(),g=Wm(o.fieldTransforms,l,c.transformResults);h.setAll(g),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(i,e,t):i instanceof Zi?function(o,l,c){if(!ul(o.precondition,l))return void l.convertToUnknownDocument(c.version);const h=Wm(o.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(T_(o)),g.setAll(h),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(i,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Oa(i,e,t,r){return i instanceof Ka?function(l,c,h,g){if(!ul(l.precondition,c))return h;const v=l.value.clone(),C=Gm(l.fieldTransforms,g,c);return v.setAll(C),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null}(i,e,t,r):i instanceof Zi?function(l,c,h,g){if(!ul(l.precondition,c))return h;const v=Gm(l.fieldTransforms,g,c),C=c.data;return C.setAll(T_(l)),C.setAll(v),c.convertToFoundDocument(c.version,C).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(D=>D.field))}(i,e,t,r):function(l,c,h){return ul(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(i,e,t)}function t3(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),l=__(r.transform,o||null);l!=null&&(t===null&&(t=ln.empty()),t.set(r.field,l))}return t||null}function Hm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Ys(r,o,(l,c)=>Jw(l,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ka extends Vl{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Zi extends Vl{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function T_(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}}),e}function Wm(i,e,t){const r=new Map;We(i.length===t.length);for(let o=0;o<t.length;o++){const l=i[o],c=l.transform,h=e.data.field(l.field);r.set(l.field,Yw(c,h,t[o]))}return r}function Gm(i,e,t){const r=new Map;for(const o of i){const l=o.transform,c=t.data.field(o.field);r.set(o.field,Xw(l,c,e))}return r}class uf extends Vl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n3 extends Vl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&e3(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Oa(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Oa(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=m_();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(o.key)?null:h;const g=E_(c,h);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&Ys(this.mutations,e.mutations,(t,r)=>Hm(t,r))&&Ys(this.baseMutations,e.baseMutations,(t,r)=>Hm(t,r))}}class lf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){We(e.mutations.length===r.length);let o=function(){return Hw}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new lf(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,Ue;function o3(i){switch(i){default:return ke();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function S_(i){if(i===void 0)return vr("GRPC error has no .code"),le.UNKNOWN;switch(i){case ot.OK:return le.OK;case ot.CANCELLED:return le.CANCELLED;case ot.UNKNOWN:return le.UNKNOWN;case ot.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case ot.INTERNAL:return le.INTERNAL;case ot.UNAVAILABLE:return le.UNAVAILABLE;case ot.UNAUTHENTICATED:return le.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case ot.NOT_FOUND:return le.NOT_FOUND;case ot.ALREADY_EXISTS:return le.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return le.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case ot.ABORTED:return le.ABORTED;case ot.OUT_OF_RANGE:return le.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return le.UNIMPLEMENTED;case ot.DATA_LOSS:return le.DATA_LOSS;default:return ke()}}(Ue=ot||(ot={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=new Wi([4294967295,4294967295],0);function Km(i){const e=a3().encode(i),t=new Kg;return t.update(e),new Uint8Array(t.digest())}function Qm(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Wi([t,r],0),new Wi([o,l],0)]}class cf{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ra(`Invalid padding: ${t}`);if(r<0)throw new Ra(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ra(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ra(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Wi.fromNumber(this.Te)}Ee(e,t,r){let o=e.add(t.multiply(Wi.fromNumber(r)));return o.compare(u3)===1&&(o=new Wi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Km(e),[r,o]=Qm(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(r,o,l);if(!this.de(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new cf(l,o,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(this.Te===0)return;const t=Km(e),[r,o]=Qm(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(r,o,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ol(Pe.min(),o,new tt(xe),yr(),Le())}}class Qa{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Qa(r,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t,r,o){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=o}}class I_{constructor(e,t){this.targetId=e,this.me=t}}class k_{constructor(e,t,r=St.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Xm{constructor(){this.fe=0,this.ge=Ym(),this.pe=St.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),t=Le(),r=Le();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ke()}}),new Qa(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Ym()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class l3{constructor(e){this.Le=e,this.Be=new Map,this.ke=yr(),this.qe=nl(),this.Qe=nl(),this.Ke=new tt(xe)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:ke()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,r=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(Ld(l))if(r===0){const c=new Se(l.path);this.We(t,c,Nt.newNoDocument(c,Pe.min()))}else We(r===1);else{const c=this.Ze(t);if(c!==r){const h=this.Xe(e),g=h?this.et(h,e,c):1;if(g!==0){this.He(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,v)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let c,h;try{c=ei(r).toUint8Array()}catch(g){if(g instanceof r_)return Xs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{h=new cf(c,o,l)}catch(g){return Xs(g instanceof Ra?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return h.Te===0?null:h}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let o=0;return r.forEach(l=>{const c=this.Le.nt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((l,c)=>{const h=this.Ye(c);if(h){if(l.current&&Ld(h.target)){const g=new Se(h.target.path);this.st(g).has(c)||this.ot(c,g)||this.We(c,g,Nt.newNoDocument(g,e))}l.be&&(t.set(c,l.ve()),l.Ce())}});let r=Le();this.Qe.forEach((l,c)=>{let h=!0;c.forEachWhile(g=>{const v=this.Ye(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(e));const o=new Ol(e,t,this.Ke,this.ke,r);return this.ke=yr(),this.qe=nl(),this.Qe=nl(),this.Ke=new tt(xe),o}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new Xm,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new pt(xe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new pt(xe),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Xm),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function nl(){return new tt(Se.comparator)}function Ym(){return new tt(Se.comparator)}const c3={asc:"ASCENDING",desc:"DESCENDING"},d3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f3={and:"AND",or:"OR"};class h3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fd(i,e){return i.useProto3Json||bl(e)?e:{value:e}}function yl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function p3(i,e){return yl(i,e.toTimestamp())}function $n(i){return We(!!i),Pe.fromTimestamp(function(t){const r=Zr(t);return new ht(r.seconds,r.nanos)}(i))}function df(i,e){return jd(i,e).canonicalString()}function jd(i,e){const t=function(o){return new Ze(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?t:t.child(e)}function A_(i){const e=Ze.fromString(i);return We(N_(e)),e}function zd(i,e){return df(i.databaseId,e.path)}function wd(i,e){const t=A_(e);if(t.get(1)!==i.databaseId.projectId)throw new Te(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Te(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Se(P_(t))}function b_(i,e){return df(i.databaseId,e)}function m3(i){const e=A_(i);return e.length===4?Ze.emptyPath():P_(e)}function Bd(i){return new Ze(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function P_(i){return We(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Jm(i,e,t){return{name:zd(i,e),fields:t.value.mapValue.fields}}function g3(i,e){let t;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ke()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,C){return v.useProto3Json?(We(C===void 0||typeof C=="string"),St.fromBase64String(C||"")):(We(C===void 0||C instanceof Buffer||C instanceof Uint8Array),St.fromUint8Array(C||new Uint8Array))}(i,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(v){const C=v.code===void 0?le.UNKNOWN:S_(v.code);return new Te(C,v.message||"")}(c);t=new k_(r,o,l,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=wd(i,r.document.name),l=$n(r.document.updateTime),c=r.document.createTime?$n(r.document.createTime):Pe.min(),h=new ln({mapValue:{fields:r.document.fields}}),g=Nt.newFoundDocument(o,l,c,h),v=r.targetIds||[],C=r.removedTargetIds||[];t=new ll(v,C,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=wd(i,r.document),l=r.readTime?$n(r.readTime):Pe.min(),c=Nt.newNoDocument(o,l),h=r.removedTargetIds||[];t=new ll([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=wd(i,r.document),l=r.removedTargetIds||[];t=new ll([],l,o,null)}else{if(!("filter"in e))return ke();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,c=new s3(o,l),h=r.targetId;t=new I_(h,c)}}return t}function _3(i,e){let t;if(e instanceof Ka)t={update:Jm(i,e.key,e.value)};else if(e instanceof uf)t={delete:zd(i,e.key)};else if(e instanceof Zi)t={update:Jm(i,e.key,e.data),updateMask:C3(e.fieldMask)};else{if(!(e instanceof n3))return ke();t={verify:zd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const h=c.transform;if(h instanceof _l)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof $a)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof qa)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof vl)return{fieldPath:c.field.canonicalString(),increment:h.Pe};throw ke()}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:p3(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ke()}(i,e.precondition)),t}function v3(i,e){return i&&i.length>0?(We(e!==void 0),i.map(t=>function(o,l){let c=o.updateTime?$n(o.updateTime):$n(l);return c.isEqual(Pe.min())&&(c=$n(l)),new Zw(c,o.transformResults||[])}(t,e))):[]}function y3(i,e){return{documents:[b_(i,e.path)]}}function w3(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=b_(i,o);const l=function(v){if(v.length!==0)return D_(Hn.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(v){if(v.length!==0)return v.map(C=>function(b){return{field:Ws(b.field),direction:S3(b.dir)}}(C))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Fd(i,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{ct:t,parent:o}}function E3(i){let e=m3(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){We(r===1);const C=t.from[0];C.allDescendants?o=C.collectionId:e=e.child(C.collectionId)}let l=[];t.where&&(l=function(D){const b=R_(D);return b instanceof Hn&&a_(b)?b.getFilters():[b]}(t.where));let c=[];t.orderBy&&(c=function(D){return D.map(b=>function(j){return new gl(Gs(j.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(b))}(t.orderBy));let h=null;t.limit&&(h=function(D){let b;return b=typeof D=="object"?D.value:D,bl(b)?null:b}(t.limit));let g=null;t.startAt&&(g=function(D){const b=!!D.before,L=D.values||[];return new ml(L,b)}(t.startAt));let v=null;return t.endAt&&(v=function(D){const b=!D.before,L=D.values||[];return new ml(L,b)}(t.endAt)),jw(e,o,c,l,h,"F",g,v)}function T3(i,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function R_(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Gs(t.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Gs(t.unaryFilter.field);return ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Gs(t.unaryFilter.field);return ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Gs(t.unaryFilter.field);return ft.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}(i):i.fieldFilter!==void 0?function(t){return ft.create(Gs(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Hn.create(t.compositeFilter.filters.map(r=>R_(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ke()}}(t.compositeFilter.op))}(i):ke()}function S3(i){return c3[i]}function I3(i){return d3[i]}function k3(i){return f3[i]}function Ws(i){return{fieldPath:i.canonicalString()}}function Gs(i){return Tt.fromServerFormat(i.fieldPath)}function D_(i){return i instanceof ft?function(t){if(t.op==="=="){if(jm(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NAN"}};if(Fm(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jm(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NOT_NAN"}};if(Fm(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ws(t.field),op:I3(t.op),value:t.value}}}(i):i instanceof Hn?function(t){const r=t.getFilters().map(o=>D_(o));return r.length===1?r[0]:{compositeFilter:{op:k3(t.op),filters:r}}}(i):ke()}function C3(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function N_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,t,r,o,l=Pe.min(),c=Pe.min(),h=St.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new Wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.ht=e}}function b3(i){const e=E3({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?xd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(){this.ln=new R3}addToCollectionParentIndex(e,t){return this.ln.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Jr.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class R3{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new pt(Ze.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new pt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ht{static withCacheSize(e){return new Ht(e,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(41943040,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new eo(0)}static Qn(){return new eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg([i,e],[t,r]){const o=xe(i,t);return o===0?xe(e,r):o}class D3{constructor(e){this.Gn=e,this.buffer=new pt(eg),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class N3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){oo(t)?ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await so(t)}await this.Yn(3e5)})}}class M3{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Al.oe);const r=new D3(t);return this.Zn.forEachTarget(e,o=>r.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>r.Hn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Zm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zm):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,o,l,c,h,g,v;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),o=this.params.maximumSequenceNumbersToCollect):o=D,c=Date.now(),this.nthSequenceNumber(e,o))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(l=D,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(v=Date.now(),qs()<=$e.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-C}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${l} targets in `+(g-h)+`ms
	Removed ${D} documents in `+(v-g)+`ms
Total Duration: ${v-C}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:D})))}}function V3(i,e){return new M3(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.changes=new Ji(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&Oa(r.mutation,o,Cn.empty(),ht.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Le()){const o=qi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(l=>{let c=Pa();return l.forEach((h,g)=>{c=c.insert(h,g.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=qi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Le()))}populateOverlays(e,t,r){const o=[];return r.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,o){let l=yr();const c=Va(),h=function(){return Va()}();return t.forEach((g,v)=>{const C=r.get(v.key);o.has(v.key)&&(C===void 0||C.mutation instanceof Zi)?l=l.insert(v.key,v):C!==void 0?(c.set(v.key,C.mutation.getFieldMask()),Oa(C.mutation,v,C.mutation.getFieldMask(),ht.now())):c.set(v.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((v,C)=>c.set(v,C)),t.forEach((v,C)=>{var D;return h.set(v,new L3(C,(D=c.get(v))!==null&&D!==void 0?D:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Va();let o=new tt((c,h)=>c-h),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(g=>{const v=t.get(g);if(v===null)return;let C=r.get(g)||Cn.empty();C=h.applyToLocalView(v,C),r.set(g,C);const D=(o.get(h.batchId)||Le()).add(g);o=o.insert(h.batchId,D)})}).next(()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),v=g.key,C=g.value,D=m_();C.forEach(b=>{if(!l.has(b)){const L=E_(t.get(b),r.get(b));L!==null&&D.set(b,L),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,D))}return ie.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(c){return Se.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):ie.resolve(qi());let h=-1,g=l;return c.next(v=>ie.forEach(v,(C,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),l.get(C)?ie.resolve():this.remoteDocumentCache.getEntry(e,C).next(b=>{g=g.insert(C,b)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,g,v,Le())).next(C=>({batchId:h,changes:p_(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(r=>{let o=Pa();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let c=Pa();return this.indexManager.getCollectionParents(e,l).next(h=>ie.forEach(h,g=>{const v=function(D,b){return new Rl(b,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next(C=>{C.forEach((D,b)=>{c=c.insert(D,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o))).next(c=>{l.forEach((g,v)=>{const C=v.getKey();c.get(C)===null&&(c=c.insert(C,Nt.newInvalidDocument(C)))});let h=Pa();return c.forEach((g,v)=>{const C=l.get(g);C!==void 0&&Oa(C.mutation,v,Cn.empty(),ht.now()),Nl(t,v)&&(h=h.insert(g,v))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return ie.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:$n(o.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:b3(o.bundledQuery),readTime:$n(o.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(){this.overlays=new tt(Se.comparator),this.Er=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qi();return ie.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.Tt(e,t,l)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Er.get(r);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Er.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const o=qi(),l=t.length+1,c=new Se(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new tt((v,C)=>v-C);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let C=l.get(v.largestBatchId);C===null&&(C=qi(),l=l.insert(v.largestBatchId,C)),C.set(v.getKey(),v)}}const h=qi(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,C)=>h.set(v,C)),!(h.size()>=o)););return ie.resolve(h)}Tt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Er.get(o.largestBatchId).delete(r.key);this.Er.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new i3(t,r));let l=this.Er.get(t);l===void 0&&(l=Le(),this.Er.set(t,l)),this.Er.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(){this.dr=new pt(vt.Ar),this.Rr=new pt(vt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new vt(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new vt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new Se(new Ze([])),r=new vt(t,e),o=new vt(t,e+1),l=[];return this.Rr.forEachInRange([r,o],c=>{this.gr(c),l.push(c.key)}),l}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Se(new Ze([])),r=new vt(t,e),o=new vt(t,e+1);let l=Le();return this.Rr.forEachInRange([r,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new vt(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class vt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Se.comparator(e.key,t.key)||xe(e.br,t.br)}static Vr(e,t){return xe(e.br,t.br)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new pt(vt.Ar)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new r3(l,t,r,o);this.mutationQueue.push(c);for(const h of o)this.vr=this.vr.add(new vt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Fr(r),l=o<0?0:o;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vt(t,0),o=new vt(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([r,o],c=>{const h=this.Cr(c.br);l.push(h)}),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pt(xe);return t.forEach(o=>{const l=new vt(o,0),c=new vt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,c],h=>{r=r.add(h.br)})}),ie.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;Se.isDocumentKey(l)||(l=l.child(""));const c=new vt(new Se(l),0);let h=new pt(xe);return this.vr.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(h=h.add(g.br)),!0)},c),ie.resolve(this.Mr(h))}Mr(e){const t=[];return e.forEach(r=>{const o=this.Cr(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){We(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return ie.forEach(t.mutations,o=>{const l=new vt(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new vt(t,0),o=this.vr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.Nr=e,this.docs=function(){return new tt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,c=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(t))}getEntries(e,t){let r=yr();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Nt.newInvalidDocument(o))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=yr();const c=t.path,h=new Se(c.child("")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:v,value:{document:C}}=g.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||vw(_w(C),r)<=0||(o.has(C.key)||Nl(t,C))&&(l=l.insert(C.key,C.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,r,o){ke()}Lr(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $3(this)}getSize(e){return ie.resolve(this.size)}}class $3 extends O3{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.persistence=e,this.Br=new Ji(t=>rf(t),sf),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.kr=0,this.qr=new ff,this.targetCount=0,this.Qr=eo.qn()}forEachTarget(e,t){return this.Br.forEach((r,o)=>t(o)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),ie.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new eo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Un(t),ie.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Br.forEach((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Br.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),ie.waitFor(l).next(()=>o)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Al(0),this.Ur=!1,this.Ur=!0,this.Wr=new z3,this.referenceDelegate=e(this),this.Gr=new q3(this),this.indexManager=new P3,this.remoteDocumentCache=function(o){return new U3(o)}(r=>this.referenceDelegate.zr(r)),this.serializer=new A3(t),this.jr=new F3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new j3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new B3(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const o=new H3(this.$r.next());return this.referenceDelegate.Hr(),r(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return ie.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class H3 extends ww{constructor(e){super(),this.currentSequenceNumber=e}}class hf{constructor(e){this.persistence=e,this.Zr=new ff,this.Xr=null}static ei(e){return new hf(e)}get ti(){if(this.Xr)return this.Xr;throw ke()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.ti,r=>{const o=Se.fromPath(r);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Pe.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return ie.or([()=>ie.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class wl{constructor(e,t){this.persistence=e,this.ri=new Ji(r=>Sw(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=V3(this,t)}static ei(e,t){return new wl(e,t)}Hr(){}Jr(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return ie.forEach(this.ri,(r,o)=>this.ir(e,r,o).next(l=>l?ie.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Lr(e,c=>this.ir(e,c,t).next(h=>{h||(r++,l.removeEntry(c,Pe.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),ie.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ol(e.data.value)),t}ir(e,t,r){return ie.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return ie.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=o}static zi(e,t){let r=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new pf(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return H0()?8:Ew(U0())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.Xi(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.es(e,t,o,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new W3;return this.ts(e,t,c).next(h=>{if(l.result=h,this.Hi)return this.ns(e,t,c,h.size)})}).next(()=>l.result)}ns(e,t,r,o){return r.documentReadCount<this.Ji?(qs()<=$e.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Hs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ie.resolve()):(qs()<=$e.DEBUG&&ge("QueryEngine","Query:",Hs(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Yi*o?(qs()<=$e.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Hs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(t))):ie.resolve())}Xi(e,t){if($m(t))return ie.resolve(null);let r=Bn(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=xd(t,null,"F"),r=Bn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=Le(...l);return this.Zi.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.rs(t,h);return this.ss(t,v,c,g.readTime)?this.Xi(e,xd(t,null,"F")):this.os(e,v,t,g)}))})))}es(e,t,r,o){return $m(t)||o.isEqual(Pe.min())?ie.resolve(null):this.Zi.getDocuments(e,r).next(l=>{const c=this.rs(t,l);return this.ss(t,c,r,o)?ie.resolve(null):(qs()<=$e.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Hs(t)),this.os(e,c,t,gw(o,-1)).next(h=>h))})}rs(e,t){let r=new pt(f_(e));return t.forEach((o,l)=>{Nl(e,l)&&(r=r.add(l))}),r}ss(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,r){return qs()<=$e.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Hs(t)),this.Zi.getDocumentsMatchingQuery(e,t,Jr.min(),r)}os(e,t,r,o){return this.Zi.getDocumentsMatchingQuery(e,r,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,t,r,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new tt(xe),this.cs=new Ji(l=>rf(l),sf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x3(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function Q3(i,e,t,r){return new K3(i,e,t,r)}async function V_(i,e){const t=Ne(i);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],h=[];let g=Le();for(const v of o){c.push(v.batchId);for(const C of v.mutations)g=g.add(C.key)}for(const v of l){h.push(v.batchId);for(const C of v.mutations)g=g.add(C.key)}return t.localDocuments.getDocuments(r,g).next(v=>({Ts:v,removedBatchIds:c,addedBatchIds:h}))})})}function X3(i,e){const t=Ne(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(h,g,v,C){const D=v.batch,b=D.keys();let L=ie.resolve();return b.forEach(j=>{L=L.next(()=>C.getEntry(g,j)).next(x=>{const $=v.docVersions.get(j);We($!==null),x.version.compareTo($)<0&&(D.applyToRemoteDocument(x,v),x.isValidDocument()&&(x.setReadTime(v.commitVersion),C.addEntry(x)))})}),L.next(()=>h.mutationQueue.removeMutationBatch(g,D))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let g=Le();for(let v=0;v<h.mutationResults.length;++v)h.mutationResults[v].transformResults.length>0&&(g=g.add(h.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function O_(i){const e=Ne(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function Y3(i,e){const t=Ne(i),r=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const h=[];e.targetChanges.forEach((C,D)=>{const b=o.get(D);if(!b)return;h.push(t.Gr.removeMatchingKeys(l,C.removedDocuments,D).next(()=>t.Gr.addMatchingKeys(l,C.addedDocuments,D)));let L=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(D)!==null?L=L.withResumeToken(St.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):C.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(C.resumeToken,r)),o=o.insert(D,L),function(x,$,Q){return x.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(b,L,C)&&h.push(t.Gr.updateTargetData(l,L))});let g=yr(),v=Le();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,C))}),h.push(J3(l,c,e.documentUpdates).next(C=>{g=C.Is,v=C.Es})),!r.isEqual(Pe.min())){const C=t.Gr.getLastRemoteSnapshotVersion(l).next(D=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,r));h.push(C)}return ie.waitFor(h).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,v)).next(()=>g)}).then(l=>(t.us=o,l))}function J3(i,e,t){let r=Le(),o=Le();return t.forEach(l=>r=r.add(l)),e.getEntries(i,r).next(l=>{let c=yr();return t.forEach((h,g)=>{const v=l.get(h);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(h)),g.isNoDocument()&&g.version.isEqual(Pe.min())?(e.removeEntry(h,g.readTime),c=c.insert(h,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),c=c.insert(h,g)):ge("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",g.version)}),{Is:c,Es:o}})}function Z3(i,e){const t=Ne(i);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eE(i,e){const t=Ne(i);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Gr.getTargetData(r,e).next(l=>l?(o=l,ie.resolve(o)):t.Gr.allocateTargetId(r).next(c=>(o=new Wr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.us.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function Ud(i,e,t){const r=Ne(i),o=r.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!oo(c))throw c;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.us=r.us.remove(e),r.cs.delete(o.target)}function tg(i,e,t){const r=Ne(i);let o=Pe.min(),l=Le();return r.persistence.runTransaction("Execute query","readwrite",c=>function(g,v,C){const D=Ne(g),b=D.cs.get(C);return b!==void 0?ie.resolve(D.us.get(b)):D.Gr.getTargetData(v,C)}(r,c,Bn(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(c,h.targetId).next(g=>{l=g})}).next(()=>r._s.getDocumentsMatchingQuery(c,e,t?o:Pe.min(),t?l:Le())).next(h=>(tE(r,Uw(e),h),{documents:h,ds:l})))}function tE(i,e,t){let r=i.ls.get(e)||Pe.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),i.ls.set(e,r)}class ng{constructor(){this.activeTargetIds=Kw()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nE{constructor(){this._o=new ng,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new ng,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl=null;function Ed(){return rl===null?rl=function(){return 268435456+Math.round(2147483648*Math.random())}():rl++,"0x"+rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class oE extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,r,o,l,c){const h=Ed(),g=this.No(t,r.toUriEncodedString());ge("RestConnection",`Sending RPC '${t}' ${h}:`,g,o);const v={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(v,l,c),this.Bo(t,g,v,o).then(C=>(ge("RestConnection",`Received RPC '${t}' ${h}: `,C),C),C=>{throw Xs("RestConnection",`RPC '${t}' ${h} failed with error: `,C,"url: ",g,"request:",o),C})}ko(t,r,o,l,c,h){return this.Oo(t,r,o,l,c)}Lo(t,r,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+io}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((l,c)=>t[c]=l),o&&o.headers.forEach((l,c)=>t[c]=l)}No(t,r){const o=iE[t];return`${this.Fo}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,o){const l=Ed();return new Promise((c,h)=>{const g=new Qg;g.setWithCredentials(!0),g.listenOnce(Xg.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case sl.NO_ERROR:const C=g.getResponseJson();ge(Rt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(C)),c(C);break;case sl.TIMEOUT:ge(Rt,`RPC '${e}' ${l} timed out`),h(new Te(le.DEADLINE_EXCEEDED,"Request time out"));break;case sl.HTTP_ERROR:const D=g.getStatus();if(ge(Rt,`RPC '${e}' ${l} failed with status:`,D,"response text:",g.getResponseText()),D>0){let b=g.getResponseJson();Array.isArray(b)&&(b=b[0]);const L=b==null?void 0:b.error;if(L&&L.status&&L.message){const j=function($){const Q=$.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(Q)>=0?Q:le.UNKNOWN}(L.status);h(new Te(j,L.message))}else h(new Te(le.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new Te(le.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{ge(Rt,`RPC '${e}' ${l} completed.`)}});const v=JSON.stringify(o);ge(Rt,`RPC '${e}' ${l} sending request:`,o),g.send(t,"POST",v,r,15)})}qo(e,t,r){const o=Ed(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Zg(),h=Jg(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const C=l.join("");ge(Rt,`Creating RPC '${e}' stream ${o}: ${C}`,g);const D=c.createWebChannel(C,g);let b=!1,L=!1;const j=new sE({Eo:$=>{L?ge(Rt,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(b||(ge(Rt,`Opening RPC '${e}' stream ${o} transport.`),D.open(),b=!0),ge(Rt,`RPC '${e}' stream ${o} sending:`,$),D.send($))},Ao:()=>D.close()}),x=($,Q,U)=>{$.listen(Q,Y=>{try{U(Y)}catch(f){setTimeout(()=>{throw f},0)}})};return x(D,ba.EventType.OPEN,()=>{L||(ge(Rt,`RPC '${e}' stream ${o} transport opened.`),j.So())}),x(D,ba.EventType.CLOSE,()=>{L||(L=!0,ge(Rt,`RPC '${e}' stream ${o} transport closed`),j.Do())}),x(D,ba.EventType.ERROR,$=>{L||(L=!0,Xs(Rt,`RPC '${e}' stream ${o} transport errored:`,$),j.Do(new Te(le.UNAVAILABLE,"The operation could not be completed")))}),x(D,ba.EventType.MESSAGE,$=>{var Q;if(!L){const U=$.data[0];We(!!U);const Y=U,f=(Y==null?void 0:Y.error)||((Q=Y[0])===null||Q===void 0?void 0:Q.error);if(f){ge(Rt,`RPC '${e}' stream ${o} received error:`,f);const y=f.status;let _=function(k){const I=ot[k];if(I!==void 0)return S_(I)}(y),E=f.message;_===void 0&&(_=le.INTERNAL,E="Unknown error status: "+y+" with message "+f.message),L=!0,j.Do(new Te(_,E)),D.close()}else ge(Rt,`RPC '${e}' stream ${o} received:`,U),j.vo(U)}}),x(h,Yg.STAT_EVENT,$=>{$.stat===Nd.PROXY?ge(Rt,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===Nd.NOPROXY&&ge(Rt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{j.bo()},0),j}}function Td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(i){return new h3(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,t,r=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-r);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t,r,o,l,c,h,g){this.li=e,this.Yo=r,this.Zo=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new L_(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Xo===t&&this.I_(r,o)},r=>{e(()=>{const o=new Te(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(o)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{r(()=>this.E_(o))}),this.stream.onMessage(o=>{r(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aE extends x_{constructor(e,t,r,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=g3(this.serializer,e),r=function(l){if(!("targetChange"in l))return Pe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Pe.min():c.readTime?$n(c.readTime):Pe.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=Bd(this.serializer),t.addTarget=function(l,c){let h;const g=c.target;if(h=Ld(g)?{documents:y3(l,g)}:{query:w3(l,g).ct},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=C_(l,c.resumeToken);const v=Fd(l,c.expectedCount);v!==null&&(h.expectedCount=v)}else if(c.snapshotVersion.compareTo(Pe.min())>0){h.readTime=yl(l,c.snapshotVersion.toTimestamp());const v=Fd(l,c.expectedCount);v!==null&&(h.expectedCount=v)}return h}(this.serializer,e);const r=T3(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=Bd(this.serializer),t.removeTarget=e,this.c_(t)}}class uE extends x_{constructor(e,t,r,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=v3(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=Bd(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_3(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new Te(le.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Oo(e,jd(t,r),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(le.UNKNOWN,l.toString())})}ko(e,t,r,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.ko(e,jd(t,r),o,c,h,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(le.UNKNOWN,c.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class cE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(vr(t),this.C_=!1):ge("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(c=>{r.enqueueAndForget(async()=>{es(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),await async function(g){const v=Ne(g);v.k_.add(4),await Xa(v),v.K_.set("Unknown"),v.k_.delete(4),await xl(v)}(this))})}),this.K_=new cE(r,o)}}async function xl(i){if(es(i))for(const e of i.q_)await e(!0)}async function Xa(i){for(const e of i.q_)await e(!1)}function F_(i,e){const t=Ne(i);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),vf(t)?_f(t):ao(t).s_()&&gf(t,e))}function mf(i,e){const t=Ne(i),r=ao(t);t.B_.delete(e),r.s_()&&j_(t,e),t.B_.size===0&&(r.s_()?r.a_():es(t)&&t.K_.set("Unknown"))}function gf(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ao(i).V_(e)}function j_(i,e){i.U_.xe(e),ao(i).m_(e)}function _f(i){i.U_=new l3({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.B_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),ao(i).start(),i.K_.F_()}function vf(i){return es(i)&&!ao(i).i_()&&i.B_.size>0}function es(i){return Ne(i).k_.size===0}function z_(i){i.U_=void 0}async function fE(i){i.K_.set("Online")}async function hE(i){i.B_.forEach((e,t)=>{gf(i,e)})}async function pE(i,e){z_(i),vf(i)?(i.K_.O_(e),_f(i)):i.K_.set("Unknown")}async function mE(i,e,t){if(i.K_.set("Online"),e instanceof k_&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const h of l.targetIds)o.B_.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.B_.delete(h),o.U_.removeTarget(h))}(i,e)}catch(r){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await El(i,r)}else if(e instanceof ll?i.U_.$e(e):e instanceof I_?i.U_.Je(e):i.U_.Ge(e),!t.isEqual(Pe.min()))try{const r=await O_(i.localStore);t.compareTo(r)>=0&&await function(l,c){const h=l.U_.it(c);return h.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const C=l.B_.get(v);C&&l.B_.set(v,C.withResumeToken(g.resumeToken,c))}}),h.targetMismatches.forEach((g,v)=>{const C=l.B_.get(g);if(!C)return;l.B_.set(g,C.withResumeToken(St.EMPTY_BYTE_STRING,C.snapshotVersion)),j_(l,g);const D=new Wr(C.target,g,v,C.sequenceNumber);gf(l,D)}),l.remoteSyncer.applyRemoteEvent(h)}(i,t)}catch(r){ge("RemoteStore","Failed to raise snapshot:",r),await El(i,r)}}async function El(i,e,t){if(!oo(e))throw e;i.k_.add(1),await Xa(i),i.K_.set("Offline"),t||(t=()=>O_(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ge("RemoteStore","Retrying IndexedDB access"),await t(),i.k_.delete(1),await xl(i)})}function B_(i,e){return e().catch(t=>El(i,t,e))}async function Fl(i){const e=Ne(i),t=ni(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;gE(e);)try{const o=await Z3(e.localStore,r);if(o===null){e.L_.length===0&&t.a_();break}r=o.batchId,_E(e,o)}catch(o){await El(e,o)}U_(e)&&$_(e)}function gE(i){return es(i)&&i.L_.length<10}function _E(i,e){i.L_.push(e);const t=ni(i);t.s_()&&t.f_&&t.g_(e.mutations)}function U_(i){return es(i)&&!ni(i).i_()&&i.L_.length>0}function $_(i){ni(i).start()}async function vE(i){ni(i).w_()}async function yE(i){const e=ni(i);for(const t of i.L_)e.g_(t.mutations)}async function wE(i,e,t){const r=i.L_.shift(),o=lf.from(r,e,t);await B_(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await Fl(i)}async function EE(i,e){e&&ni(i).f_&&await async function(r,o){if(function(c){return o3(c)&&c!==le.ABORTED}(o.code)){const l=r.L_.shift();ni(r).__(),await B_(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Fl(r)}}(i,e),U_(i)&&$_(i)}async function ig(i,e){const t=Ne(i);t.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const r=es(t);t.k_.add(3),await Xa(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await xl(t)}async function TE(i,e){const t=Ne(i);e?(t.k_.delete(2),await xl(t)):e||(t.k_.add(2),await Xa(t),t.K_.set("Unknown"))}function ao(i){return i.W_||(i.W_=function(t,r,o){const l=Ne(t);return l.b_(),new aE(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(i.datastore,i.asyncQueue,{Ro:fE.bind(null,i),mo:hE.bind(null,i),po:pE.bind(null,i),R_:mE.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),vf(i)?_f(i):i.K_.set("Unknown")):(await i.W_.stop(),z_(i))})),i.W_}function ni(i){return i.G_||(i.G_=function(t,r,o){const l=Ne(t);return l.b_(),new uE(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:vE.bind(null,i),po:EE.bind(null,i),p_:yE.bind(null,i),y_:wE.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await Fl(i)):(await i.G_.stop(),i.L_.length>0&&(ge("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const c=Date.now()+r,h=new yf(e,t,c,o,l);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wf(i,e){if(vr("AsyncQueue",`${e}: ${i}`),oo(i))return new Te(le.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{static emptySet(e){return new Ks(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=Pa(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ks)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ks;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this.z_=new tt(Se.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ke():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class to{constructor(e,t,r,o,l,c,h,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,o,l){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new to(e,t,Ks.emptySet(t),c,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class IE{constructor(){this.queries=og(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const o=Ne(t),l=o.queries;o.queries=og(),l.forEach((c,h)=>{for(const g of h.J_)g.onError(r)})})(this,new Te(le.ABORTED,"Firestore shutting down"))}}function og(){return new Ji(i=>d_(i),Dl)}async function kE(i,e){const t=Ne(i);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(r=2):(l=new SE,r=e.Z_()?0:1);try{switch(r){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=wf(c,`Initialization of query '${Hs(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&Ef(t)}async function CE(i,e){const t=Ne(i),r=e.query;let o=3;const l=t.queries.get(r);if(l){const c=l.J_.indexOf(e);c>=0&&(l.J_.splice(c,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function AE(i,e){const t=Ne(i);let r=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const h of c.J_)h.ta(o)&&(r=!0);c.H_=o}}r&&Ef(t)}function bE(i,e,t){const r=Ne(i),o=r.queries.get(e);if(o)for(const l of o.J_)l.onError(t);r.queries.delete(e)}function Ef(i){i.X_.forEach(e=>{e.next()})}var $d,ag;(ag=$d||($d={})).na="default",ag.Cache="cache";class PE{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new to(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=to.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==$d.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this.key=e}}class H_{constructor(e){this.key=e}}class RE{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Le(),this.mutatedKeys=Le(),this.Va=f_(e),this.ma=new Ks(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new sg,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((C,D)=>{const b=o.get(C),L=Nl(this.query,D)?D:null,j=!!b&&this.mutatedKeys.has(b.key),x=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let $=!1;b&&L?b.data.isEqual(L.data)?j!==x&&(r.track({type:3,doc:L}),$=!0):this.ya(b,L)||(r.track({type:2,doc:L}),$=!0,(g&&this.Va(L,g)>0||v&&this.Va(L,v)<0)&&(h=!0)):!b&&L?(r.track({type:0,doc:L}),$=!0):b&&!L&&(r.track({type:1,doc:b}),$=!0,(g||v)&&(h=!0)),$&&(L?(c=c.add(L),l=x?l.add(C):l.delete(C)):(c=c.delete(C),l=l.delete(C)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const C=this.query.limitType==="F"?c.last():c.first();c=c.delete(C.key),l=l.delete(C.key),r.track({type:1,doc:C})}return{ma:c,pa:r,ss:h,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const c=e.pa.j_();c.sort((C,D)=>function(L,j){const x=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return x(L)-x(j)}(C.type,D.type)||this.Va(C.doc,D.doc)),this.wa(r),o=o!=null&&o;const h=t&&!o?this.Sa():[],g=this.Ra.size===0&&this.current&&!o?1:0,v=g!==this.Aa;return this.Aa=g,c.length!==0||v?{snapshot:new to(this.query,e.ma,l,c,e.mutatedKeys,g===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:h}:{ba:h}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new sg,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Le(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new H_(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new q_(r))}),t}va(e){this.da=e.ds,this.Ra=Le();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return to.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class DE{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class NE{constructor(e){this.key=e,this.Fa=!1}}class ME{constructor(e,t,r,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new Ji(h=>d_(h),Dl),this.Oa=new Map,this.Na=new Set,this.La=new tt(Se.comparator),this.Ba=new Map,this.ka=new ff,this.qa={},this.Qa=new Map,this.Ka=eo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function VE(i,e,t=!0){const r=Y_(i);let o;const l=r.xa.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await W_(r,e,t,!0),o}async function OE(i,e){const t=Y_(i);await W_(t,e,!0,!1)}async function W_(i,e,t,r){const o=await eE(i.localStore,Bn(e)),l=o.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let h;return r&&(h=await LE(i,e,l,c==="current",o.resumeToken)),i.isPrimaryClient&&t&&F_(i.remoteStore,o),h}async function LE(i,e,t,r,o){i.Ua=(D,b,L)=>async function(x,$,Q,U){let Y=$.view.ga(Q);Y.ss&&(Y=await tg(x.localStore,$.query,!1).then(({documents:E})=>$.view.ga(E,Y)));const f=U&&U.targetChanges.get($.targetId),y=U&&U.targetMismatches.get($.targetId)!=null,_=$.view.applyChanges(Y,x.isPrimaryClient,f,y);return lg(x,$.targetId,_.ba),_.snapshot}(i,D,b,L);const l=await tg(i.localStore,e,!0),c=new RE(e,l.ds),h=c.ga(l.documents),g=Qa.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),v=c.applyChanges(h,i.isPrimaryClient,g);lg(i,t,v.ba);const C=new DE(e,t,c);return i.xa.set(e,C),i.Oa.has(t)?i.Oa.get(t).push(e):i.Oa.set(t,[e]),v.snapshot}async function xE(i,e,t){const r=Ne(i),o=r.xa.get(e),l=r.Oa.get(o.targetId);if(l.length>1)return r.Oa.set(o.targetId,l.filter(c=>!Dl(c,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Ud(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&mf(r.remoteStore,o.targetId),qd(r,o.targetId)}).catch(so)):(qd(r,o.targetId),await Ud(r.localStore,o.targetId,!0))}async function FE(i,e){const t=Ne(i),r=t.xa.get(e),o=t.Oa.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),mf(t.remoteStore,r.targetId))}async function jE(i,e,t){const r=WE(i);try{const o=await function(c,h){const g=Ne(c),v=ht.now(),C=h.reduce((L,j)=>L.add(j.key),Le());let D,b;return g.persistence.runTransaction("Locally write mutations","readwrite",L=>{let j=yr(),x=Le();return g.hs.getEntries(L,C).next($=>{j=$,j.forEach((Q,U)=>{U.isValidDocument()||(x=x.add(Q))})}).next(()=>g.localDocuments.getOverlayedDocuments(L,j)).next($=>{D=$;const Q=[];for(const U of h){const Y=t3(U,D.get(U.key).overlayedDocument);Y!=null&&Q.push(new Zi(U.key,Y,i_(Y.value.mapValue),Un.exists(!0)))}return g.mutationQueue.addMutationBatch(L,v,Q,h)}).next($=>{b=$;const Q=$.applyToLocalDocumentSet(D,x);return g.documentOverlayCache.saveOverlays(L,$.batchId,Q)})}).then(()=>({batchId:b.batchId,changes:p_(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,h,g){let v=c.qa[c.currentUser.toKey()];v||(v=new tt(xe)),v=v.insert(h,g),c.qa[c.currentUser.toKey()]=v}(r,o.batchId,t),await Ya(r,o.changes),await Fl(r.remoteStore)}catch(o){const l=wf(o,"Failed to persist write");t.reject(l)}}async function G_(i,e){const t=Ne(i);try{const r=await Y3(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.Ba.get(l);c&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Fa=!0:o.modifiedDocuments.size>0?We(c.Fa):o.removedDocuments.size>0&&(We(c.Fa),c.Fa=!1))}),await Ya(t,r,e)}catch(r){await so(r)}}function ug(i,e,t){const r=Ne(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.xa.forEach((l,c)=>{const h=c.view.ea(e);h.snapshot&&o.push(h.snapshot)}),function(c,h){const g=Ne(c);g.onlineState=h;let v=!1;g.queries.forEach((C,D)=>{for(const b of D.J_)b.ea(h)&&(v=!0)}),v&&Ef(g)}(r.eventManager,e),o.length&&r.Ma.R_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zE(i,e,t){const r=Ne(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Ba.get(e),l=o&&o.key;if(l){let c=new tt(Se.comparator);c=c.insert(l,Nt.newNoDocument(l,Pe.min()));const h=Le().add(l),g=new Ol(Pe.min(),new Map,new tt(xe),c,h);await G_(r,g),r.La=r.La.remove(l),r.Ba.delete(e),Tf(r)}else await Ud(r.localStore,e,!1).then(()=>qd(r,e,t)).catch(so)}async function BE(i,e){const t=Ne(i),r=e.batch.batchId;try{const o=await X3(t.localStore,e);Q_(t,r,null),K_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ya(t,o)}catch(o){await so(o)}}async function UE(i,e,t){const r=Ne(i);try{const o=await function(c,h){const g=Ne(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let C;return g.mutationQueue.lookupMutationBatch(v,h).next(D=>(We(D!==null),C=D.keys(),g.mutationQueue.removeMutationBatch(v,D))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,C,h)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,C)).next(()=>g.localDocuments.getDocuments(v,C))})}(r.localStore,e);Q_(r,e,t),K_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ya(r,o)}catch(o){await so(o)}}function K_(i,e){(i.Qa.get(e)||[]).forEach(t=>{t.resolve()}),i.Qa.delete(e)}function Q_(i,e,t){const r=Ne(i);let o=r.qa[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.qa[r.currentUser.toKey()]=o}}function qd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Oa.get(e))i.xa.delete(r),t&&i.Ma.Wa(r,t);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(r=>{i.ka.containsKey(r)||X_(i,r)})}function X_(i,e){i.Na.delete(e.path.canonicalString());const t=i.La.get(e);t!==null&&(mf(i.remoteStore,t),i.La=i.La.remove(e),i.Ba.delete(t),Tf(i))}function lg(i,e,t){for(const r of t)r instanceof q_?(i.ka.addReference(r.key,e),$E(i,r)):r instanceof H_?(ge("SyncEngine","Document no longer in limbo: "+r.key),i.ka.removeReference(r.key,e),i.ka.containsKey(r.key)||X_(i,r.key)):ke()}function $E(i,e){const t=e.key,r=t.path.canonicalString();i.La.get(t)||i.Na.has(r)||(ge("SyncEngine","New document in limbo: "+t),i.Na.add(r),Tf(i))}function Tf(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const t=new Se(Ze.fromString(e)),r=i.Ka.next();i.Ba.set(r,new NE(t)),i.La=i.La.insert(t,r),F_(i.remoteStore,new Wr(Bn(of(t.path)),r,"TargetPurposeLimboResolution",Al.oe))}}async function Ya(i,e,t){const r=Ne(i),o=[],l=[],c=[];r.xa.isEmpty()||(r.xa.forEach((h,g)=>{c.push(r.Ua(g,e,t).then(v=>{var C;if((v||t)&&r.isPrimaryClient){const D=v?!v.fromCache:(C=t==null?void 0:t.targetChanges.get(g.targetId))===null||C===void 0?void 0:C.current;r.sharedClientState.updateQueryState(g.targetId,D?"current":"not-current")}if(v){o.push(v);const D=pf.zi(g.targetId,v);l.push(D)}}))}),await Promise.all(c),r.Ma.R_(o),await async function(g,v){const C=Ne(g);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ie.forEach(v,b=>ie.forEach(b.Wi,L=>C.persistence.referenceDelegate.addReference(D,b.targetId,L)).next(()=>ie.forEach(b.Gi,L=>C.persistence.referenceDelegate.removeReference(D,b.targetId,L)))))}catch(D){if(!oo(D))throw D;ge("LocalStore","Failed to update sequence numbers: "+D)}for(const D of v){const b=D.targetId;if(!D.fromCache){const L=C.us.get(b),j=L.snapshotVersion,x=L.withLastLimboFreeSnapshotVersion(j);C.us=C.us.insert(b,x)}}}(r.localStore,l))}async function qE(i,e){const t=Ne(i);if(!t.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const r=await V_(t.localStore,e);t.currentUser=e,function(l,c){l.Qa.forEach(h=>{h.forEach(g=>{g.reject(new Te(le.CANCELLED,c))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ya(t,r.Ts)}}function HE(i,e){const t=Ne(i),r=t.Ba.get(e);if(r&&r.Fa)return Le().add(r.key);{let o=Le();const l=t.Oa.get(e);if(!l)return o;for(const c of l){const h=t.xa.get(c);o=o.unionWith(h.view.fa)}return o}}function Y_(i){const e=Ne(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=G_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zE.bind(null,e),e.Ma.R_=AE.bind(null,e.eventManager),e.Ma.Wa=bE.bind(null,e.eventManager),e}function WE(i){const e=Ne(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UE.bind(null,e),e}class Tl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ll(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return Q3(this.persistence,new G3,e.initialUser,this.serializer)}ja(e){return new M_(hf.ei,this.serializer)}za(e){return new nE}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tl.provider={build:()=>new Tl};class GE extends Tl{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){We(this.persistence.referenceDelegate instanceof wl);const r=this.persistence.referenceDelegate.garbageCollector;return new N3(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new M_(r=>wl.ei(r,t),this.serializer)}}class Hd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ug(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qE.bind(null,this.syncEngine),await TE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IE}()}createDatastore(e){const t=Ll(e.databaseInfo.databaseId),r=function(l){return new oE(l)}(e.databaseInfo);return function(l,c,h,g){return new lE(l,c,h,g)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,l,c,h){return new dE(r,o,l,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>ug(this.syncEngine,t,0),function(){return rg.p()?new rg:new rE}())}createSyncEngine(e,t){return function(o,l,c,h,g,v,C){const D=new ME(o,l,c,h,g,v);return C&&(D.$a=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ne(o);ge("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await Xa(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Hd.provider={build:()=>new Hd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Dt.UNAUTHENTICATED,this.clientId=t_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{ge("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ge("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=wf(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sd(i,e){i.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await V_(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function cg(i,e){i.asyncQueue.verifyOperationInProgress();const t=await XE(i);ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(r=>ig(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>ig(e.remoteStore,o)),i._onlineComponents=e}async function XE(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sd(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===le.FAILED_PRECONDITION||o.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Xs("Error using user provided cache. Falling back to memory cache: "+t),await Sd(i,new Tl)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),await Sd(i,new GE(void 0));return i._offlineComponents}async function J_(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),await cg(i,i._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),await cg(i,new Hd))),i._onlineComponents}function YE(i){return J_(i).then(e=>e.syncEngine)}async function dg(i){const e=await J_(i),t=e.eventManager;return t.onListen=VE.bind(null,e.syncEngine),t.onUnlisten=xE.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OE.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FE.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(i,e,t){if(!t)throw new Te(le.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function JE(i,e,t,r){if(e===!0&&r===!0)throw new Te(le.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function hg(i){if(!Se.isDocumentKey(i))throw new Te(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function pg(i){if(Se.isDocumentKey(i))throw new Te(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Sf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ke()}function Qs(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Te(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sf(i);throw new Te(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Te(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jl{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aw;switch(r.type){case"firstParty":return new dw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=fg.get(t);r&&(ge("ComponentProvider","Removing Datastore"),fg.delete(t),r.terminate())}(this),Promise.resolve()}}function ZE(i,e,t,r={}){var o;const l=(i=Qs(i,jl))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&Xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),r.mockUserToken){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=Dt.MOCK_USER;else{h=B0(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Te(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Dt(v)}i._authCredentials=new uw(new e_(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zl(this.firestore,e,this._query)}}class cn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class Qr extends zl{constructor(e,t,r){super(e,t,of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new Se(e))}withConverter(e){return new Qr(this.firestore,e,this._path)}}function eT(i,e,...t){if(i=Xr(i),ev("collection","path",e),i instanceof jl){const r=Ze.fromString(e,...t);return pg(r),new Qr(i,null,r)}{if(!(i instanceof cn||i instanceof Qr))throw new Te(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ze.fromString(e,...t));return pg(r),new Qr(i.firestore,null,r)}}function tv(i,e,...t){if(i=Xr(i),arguments.length===1&&(e=t_.newId()),ev("doc","path",e),i instanceof jl){const r=Ze.fromString(e,...t);return hg(r),new cn(i,null,new Se(r))}{if(!(i instanceof cn||i instanceof Qr))throw new Te(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ze.fromString(e,...t));return hg(r),new cn(i.firestore,i instanceof Qr?i.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new L_(this,"async_queue_retry"),this.fu=()=>{const r=Td();r&&ge("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Td();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Td();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Gi;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!oo(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const o=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(r);throw vr("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=yf.createAndSchedule(this,e,t,r,l=>this.Su(l));return this.du.push(o),o}pu(){this.Au&&ke()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function _g(i){return function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of r)if(l in o&&typeof o[l]=="function")return!0;return!1}(i,["next","error","complete"])}class Ha extends jl{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new gg,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gg(e),this._firestoreClient=void 0,await e}}}function tT(i,e){const t=typeof i=="object"?i:Hg(),r=typeof i=="string"?i:"(default)",o=Ga(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=j0("firestore");l&&ZE(o,...l)}return o}function nv(i){if(i._terminated)throw new Te(le.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||nT(i),i._firestoreClient}function nT(i){var e,t,r;const o=i._freezeSettings(),l=function(h,g,v,C){return new Cw(h,g,v,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,Z_(C.experimentalLongPollingOptions),C.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new QE(i._authCredentials,i._appCheckCredentials,i._queue,l,i._componentsProvider&&function(h){const g=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this._byteString=e}static fromBase64String(e){try{return new no(St.fromBase64String(e))}catch(t){throw new Te(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new no(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=/^__.*__$/;class iT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ka(e,this.data,t,this.fieldTransforms)}}function iv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class Af{constructor(e,t,r,o,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Af(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:r,Nu:!1});return o.Lu(e),o}Bu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:r,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Sl(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(iv(this.Mu)&&rT.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class sT{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ll(e)}$u(e,t,r,o=!1){return new Af({Mu:e,methodName:t,Ku:r,path:Tt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oT(i){const e=i._freezeSettings(),t=Ll(i._databaseId);return new sT(i._databaseId,!!e.ignoreUndefinedProperties,t)}function aT(i,e,t,r,o,l={}){const c=i.$u(l.merge||l.mergeFields?2:0,e,t,o);uv("Data must be an object, but it was:",c,r);const h=ov(r,c);let g,v;if(l.merge)g=new Cn(c.fieldMask),v=c.fieldTransforms;else if(l.mergeFields){const C=[];for(const D of l.mergeFields){const b=uT(e,D,t);if(!c.contains(b))throw new Te(le.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);cT(C,b)||C.push(b)}g=new Cn(C),v=c.fieldTransforms.filter(D=>g.covers(D.field))}else g=null,v=c.fieldTransforms;return new iT(new ln(h),g,v)}function sv(i,e){if(av(i=Xr(i)))return uv("Unsupported field value:",e,i),ov(i,e);if(i instanceof rv)return function(r,o){if(!iv(o.Mu))throw o.qu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,o){const l=[];let c=0;for(const h of r){let g=sv(h,o.ku(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(i,e)}return function(r,o){if((r=Xr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Qw(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ht.fromDate(r);return{timestampValue:yl(o.serializer,l)}}if(r instanceof ht){const l=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yl(o.serializer,l)}}if(r instanceof kf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof no)return{bytesValue:C_(o.serializer,r._byteString)};if(r instanceof cn){const l=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw o.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:df(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Cf)return function(c,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.qu("VectorValues must only contain numeric values.");return af(h.serializer,g)})}}}}}}(r,o);throw o.qu(`Unsupported field value: ${Sf(r)}`)}(i,e)}function ov(i,e){const t={};return n_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yi(i,(r,o)=>{const l=sv(o,e.Ou(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function av(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ht||i instanceof kf||i instanceof no||i instanceof cn||i instanceof rv||i instanceof Cf)}function uv(i,e,t){if(!av(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=Sf(t);throw r==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+r)}}function uT(i,e,t){if((e=Xr(e))instanceof If)return e._internalPath;if(typeof e=="string")return lv(i,e);throw Sl("Field path arguments must be of type string or ",i,!1,void 0,t)}const lT=new RegExp("[~\\*/\\[\\]]");function lv(i,e,t){if(e.search(lT)>=0)throw Sl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new If(...e.split("."))._internalPath}catch{throw Sl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Sl(i,e,t,r,o){const l=r&&!r.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new Te(le.INVALID_ARGUMENT,h+i+g)}function cT(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dT extends cv{data(){return super.data()}}function dv(i,e){return typeof e=="string"?lv(i,e):e instanceof If?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Te(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hT{convertValue(e,t="none"){switch(ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Yi(e,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,o;const l=(o=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(c=>st(c.doubleValue));return new Cf(l)}convertGeoPoint(e){return new kf(st(e.latitude),st(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Pl(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(za(e));default:return null}}convertTimestamp(e){const t=Zr(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ze.fromString(e);We(N_(r));const o=new Ba(r.get(1),r.get(3)),l=new Se(r.popFirst(5));return o.isEqual(t)||vr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(i,e,t){let r;return r=i?i.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fv extends cv{constructor(e,t,r,o,l,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class cl extends fv{data(e={}){return super.data(e)}}class mT{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Da(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cl(this._firestore,this._userDataWriter,r.key,r,new Da(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(h=>{const g=new cl(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Da(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const g=new cl(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Da(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,C=-1;return h.type!==0&&(v=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),C=c.indexOf(h.doc.key)),{type:gT(h.type),doc:g,oldIndex:v,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function gT(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}class hv extends hT{constructor(e){super(),this.firestore=e}convertBytes(e){return new no(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,t)}}function _T(i){return pv(Qs(i.firestore,Ha),[new uf(i._key,Un.none())])}function vT(i,e){const t=Qs(i.firestore,Ha),r=tv(i),o=pT(i.converter,e);return pv(t,[aT(oT(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}function yT(i,...e){var t,r,o;i=Xr(i);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||_g(e[c])||(l=e[c],c++);const h={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(_g(e[c])){const D=e[c];e[c]=(t=D.next)===null||t===void 0?void 0:t.bind(D),e[c+1]=(r=D.error)===null||r===void 0?void 0:r.bind(D),e[c+2]=(o=D.complete)===null||o===void 0?void 0:o.bind(D)}let g,v,C;if(i instanceof cn)v=Qs(i.firestore,Ha),C=of(i._key.path),g={next:D=>{e[c]&&e[c](wT(v,i,D))},error:e[c+1],complete:e[c+2]};else{const D=Qs(i,zl);v=Qs(D.firestore,Ha),C=D._query;const b=new hv(v);g={next:L=>{e[c]&&e[c](new mT(v,b,D,L))},error:e[c+1],complete:e[c+2]},fT(i._query)}return function(b,L,j,x){const $=new KE(x),Q=new PE(L,$,j);return b.asyncQueue.enqueueAndForget(async()=>kE(await dg(b),Q)),()=>{$.eu(),b.asyncQueue.enqueueAndForget(async()=>CE(await dg(b),Q))}}(nv(v),C,h,g)}function pv(i,e){return function(r,o){const l=new Gi;return r.asyncQueue.enqueueAndForget(async()=>jE(await YE(r),o,l)),l.promise}(nv(i),e)}function wT(i,e,t){const r=t.docs.get(e._key),o=new hv(i);return new fv(i,o,e._key,r,new Da(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){io=o})(Y1),Yr(new gr("firestore",(r,{instanceIdentifier:o,options:l})=>{const c=r.getProvider("app").getImmediate(),h=new Ha(new lw(r.getProvider("auth-internal")),new hw(r.getProvider("app-check-internal")),function(v,C){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new Te(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ba(v.options.projectId,C)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),zn(Nm,"4.7.5",e),zn(Nm,"4.7.5","esm2017")})();var ET="firebase",TT="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(ET,TT,"app");const mv="@firebase/installations",bf="0.6.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=1e4,_v=`w:${bf}`,vv="FIS_v2",ST="https://firebaseinstallations.googleapis.com/v1",IT=60*60*1e3,kT="installations",CT="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Qi=new Cl(kT,CT,AT);function yv(i){return i instanceof ri&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv({projectId:i}){return`${ST}/projects/${i}/installations`}function Ev(i){return{token:i.token,requestStatus:2,expiresIn:PT(i.expiresIn),creationTime:Date.now()}}async function Tv(i,e){const r=(await e.json()).error;return Qi.create("request-failed",{requestName:i,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Sv({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function bT(i,{refreshToken:e}){const t=Sv(i);return t.append("Authorization",RT(e)),t}async function Iv(i){const e=await i();return e.status>=500&&e.status<600?i():e}function PT(i){return Number(i.replace("s","000"))}function RT(i){return`${vv} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT({appConfig:i,heartbeatServiceProvider:e},{fid:t}){const r=wv(i),o=Sv(i),l=e.getImmediate({optional:!0});if(l){const v=await l.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const c={fid:t,authVersion:vv,appId:i.appId,sdkVersion:_v},h={method:"POST",headers:o,body:JSON.stringify(c)},g=await Iv(()=>fetch(r,h));if(g.ok){const v=await g.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:Ev(v.authToken)}}else throw await Tv("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=/^[cdef][\w-]{21}$/,Wd="";function VT(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const t=OT(i);return MT.test(t)?t:Wd}catch{return Wd}}function OT(i){return NT(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map;function Av(i,e){const t=Bl(i);bv(t,e),LT(t,e)}function bv(i,e){const t=Cv.get(i);if(t)for(const r of t)r(e)}function LT(i,e){const t=xT();t&&t.postMessage({key:i,fid:e}),FT()}let Hi=null;function xT(){return!Hi&&"BroadcastChannel"in self&&(Hi=new BroadcastChannel("[Firebase] FID Change"),Hi.onmessage=i=>{bv(i.data.key,i.data.fid)}),Hi}function FT(){Cv.size===0&&Hi&&(Hi.close(),Hi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="firebase-installations-database",zT=1,Xi="firebase-installations-store";let Id=null;function Pf(){return Id||(Id=$g(jT,zT,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Xi)}}})),Id}async function Il(i,e){const t=Bl(i),o=(await Pf()).transaction(Xi,"readwrite"),l=o.objectStore(Xi),c=await l.get(t);return await l.put(e,t),await o.done,(!c||c.fid!==e.fid)&&Av(i,e.fid),e}async function Pv(i){const e=Bl(i),r=(await Pf()).transaction(Xi,"readwrite");await r.objectStore(Xi).delete(e),await r.done}async function Ul(i,e){const t=Bl(i),o=(await Pf()).transaction(Xi,"readwrite"),l=o.objectStore(Xi),c=await l.get(t),h=e(c);return h===void 0?await l.delete(t):await l.put(h,t),await o.done,h&&(!c||c.fid!==h.fid)&&Av(i,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rf(i){let e;const t=await Ul(i.appConfig,r=>{const o=BT(r),l=UT(i,o);return e=l.registrationPromise,l.installationEntry});return t.fid===Wd?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function BT(i){const e=i||{fid:VT(),registrationStatus:0};return Rv(e)}function UT(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Qi.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=$T(i,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:qT(i)}:{installationEntry:e}}async function $T(i,e){try{const t=await DT(i,e);return Il(i.appConfig,t)}catch(t){throw yv(t)&&t.customData.serverCode===409?await Pv(i.appConfig):await Il(i.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function qT(i){let e=await vg(i.appConfig);for(;e.registrationStatus===1;)await kv(100),e=await vg(i.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Rf(i);return r||t}return e}function vg(i){return Ul(i,e=>{if(!e)throw Qi.create("installation-not-found");return Rv(e)})}function Rv(i){return HT(i)?{fid:i.fid,registrationStatus:0}:i}function HT(i){return i.registrationStatus===1&&i.registrationTime+gv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WT({appConfig:i,heartbeatServiceProvider:e},t){const r=GT(i,t),o=bT(i,t),l=e.getImmediate({optional:!0});if(l){const v=await l.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const c={installation:{sdkVersion:_v,appId:i.appId}},h={method:"POST",headers:o,body:JSON.stringify(c)},g=await Iv(()=>fetch(r,h));if(g.ok){const v=await g.json();return Ev(v)}else throw await Tv("Generate Auth Token",g)}function GT(i,{fid:e}){return`${wv(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Df(i,e=!1){let t;const r=await Ul(i.appConfig,l=>{if(!Dv(l))throw Qi.create("not-registered");const c=l.authToken;if(!e&&XT(c))return l;if(c.requestStatus===1)return t=KT(i,e),l;{if(!navigator.onLine)throw Qi.create("app-offline");const h=JT(l);return t=QT(i,h),h}});return t?await t:r.authToken}async function KT(i,e){let t=await yg(i.appConfig);for(;t.authToken.requestStatus===1;)await kv(100),t=await yg(i.appConfig);const r=t.authToken;return r.requestStatus===0?Df(i,e):r}function yg(i){return Ul(i,e=>{if(!Dv(e))throw Qi.create("not-registered");const t=e.authToken;return ZT(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function QT(i,e){try{const t=await WT(i,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Il(i.appConfig,r),t}catch(t){if(yv(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Pv(i.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Il(i.appConfig,r)}throw t}}function Dv(i){return i!==void 0&&i.registrationStatus===2}function XT(i){return i.requestStatus===2&&!YT(i)}function YT(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+IT}function JT(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function ZT(i){return i.requestStatus===1&&i.requestTime+gv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e8(i){const e=i,{installationEntry:t,registrationPromise:r}=await Rf(e);return r?r.catch(console.error):Df(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(i,e=!1){const t=i;return await n8(t),(await Df(t,e)).token}async function n8(i){const{registrationPromise:e}=await Rf(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(i){if(!i||!i.options)throw kd("App Configuration");if(!i.name)throw kd("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!i.options[t])throw kd(t);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function kd(i){return Qi.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="installations",i8="installations-internal",s8=i=>{const e=i.getProvider("app").getImmediate(),t=r8(e),r=Ga(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},o8=i=>{const e=i.getProvider("app").getImmediate(),t=Ga(e,Nv).getImmediate();return{getId:()=>e8(t),getToken:o=>t8(t,o)}};function a8(){Yr(new gr(Nv,s8,"PUBLIC")),Yr(new gr(i8,o8,"PRIVATE"))}a8();zn(mv,bf);zn(mv,bf,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl="analytics",u8="firebase_id",l8="origin",c8=60*1e3,d8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nf="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt=new Jd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Jt=new Cl("analytics","Analytics",f8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h8(i){if(!i.startsWith(Nf)){const e=Jt.create("invalid-gtag-resource",{gtagURL:i});return Wt.warn(e.message),""}return i}function Mv(i){return Promise.all(i.map(e=>e.catch(t=>t)))}function p8(i,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(i,e)),t}function m8(i,e){const t=p8("firebase-js-sdk-policy",{createScriptURL:h8}),r=document.createElement("script"),o=`${Nf}?l=${i}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function g8(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function _8(i,e,t,r,o,l){const c=r[o];try{if(c)await e[c];else{const g=(await Mv(t)).find(v=>v.measurementId===o);g&&await e[g.appId]}}catch(h){Wt.error(h)}i("config",o,l)}async function v8(i,e,t,r,o){try{let l=[];if(o&&o.send_to){let c=o.send_to;Array.isArray(c)||(c=[c]);const h=await Mv(t);for(const g of c){const v=h.find(D=>D.measurementId===g),C=v&&e[v.appId];if(C)l.push(C);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),i("event",r,o||{})}catch(l){Wt.error(l)}}function y8(i,e,t,r){async function o(l,...c){try{if(l==="event"){const[h,g]=c;await v8(i,e,t,h,g)}else if(l==="config"){const[h,g]=c;await _8(i,e,t,r,h,g)}else if(l==="consent"){const[h,g]=c;i("consent",h,g)}else if(l==="get"){const[h,g,v]=c;i("get",h,g,v)}else if(l==="set"){const[h]=c;i("set",h)}else i(l,...c)}catch(h){Wt.error(h)}}return o}function w8(i,e,t,r,o){let l=function(...c){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=y8(l,i,e,t),{gtagCore:l,wrappedGtag:window[o]}}function E8(i){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Nf)&&t.src.includes(i))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=30,S8=1e3;class I8{constructor(e={},t=S8){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Vv=new I8;function k8(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function C8(i){var e;const{appId:t,apiKey:r}=i,o={method:"GET",headers:k8(r)},l=d8.replace("{app-id}",t),c=await fetch(l,o);if(c.status!==200&&c.status!==304){let h="";try{const g=await c.json();!((e=g.error)===null||e===void 0)&&e.message&&(h=g.error.message)}catch{}throw Jt.create("config-fetch-failed",{httpStatus:c.status,responseMessage:h})}return c.json()}async function A8(i,e=Vv,t){const{appId:r,apiKey:o,measurementId:l}=i.options;if(!r)throw Jt.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:r};throw Jt.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new R8;return setTimeout(async()=>{h.abort()},c8),Ov({appId:r,apiKey:o,measurementId:l},c,h,e)}async function Ov(i,{throttleEndTimeMillis:e,backoffCount:t},r,o=Vv){var l;const{appId:c,measurementId:h}=i;try{await b8(r,e)}catch(g){if(h)return Wt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:c,measurementId:h};throw g}try{const g=await C8(i);return o.deleteThrottleMetadata(c),g}catch(g){const v=g;if(!P8(v)){if(o.deleteThrottleMetadata(c),h)return Wt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${v==null?void 0:v.message}]`),{appId:c,measurementId:h};throw g}const C=Number((l=v==null?void 0:v.customData)===null||l===void 0?void 0:l.httpStatus)===503?Tm(t,o.intervalMillis,T8):Tm(t,o.intervalMillis),D={throttleEndTimeMillis:Date.now()+C,backoffCount:t+1};return o.setThrottleMetadata(c,D),Wt.debug(`Calling attemptFetch again in ${C} millis`),Ov(i,D,r,o)}}function b8(i,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),l=setTimeout(t,o);i.addEventListener(()=>{clearTimeout(l),r(Jt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function P8(i){if(!(i instanceof ri)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class R8{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function D8(i,e,t,r,o){if(o&&o.global){i("event",t,r);return}else{const l=await e,c=Object.assign(Object.assign({},r),{send_to:l});i("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N8(){if(jg())try{await zg()}catch(i){return Wt.warn(Jt.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return Wt.warn(Jt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function M8(i,e,t,r,o,l,c){var h;const g=A8(i);g.then(L=>{t[L.measurementId]=L.appId,i.options.measurementId&&L.measurementId!==i.options.measurementId&&Wt.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${L.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(L=>Wt.error(L)),e.push(g);const v=N8().then(L=>{if(L)return r.getId()}),[C,D]=await Promise.all([g,v]);E8(l)||m8(l,C.measurementId),o("js",new Date);const b=(h=c==null?void 0:c.config)!==null&&h!==void 0?h:{};return b[l8]="firebase",b.update=!0,D!=null&&(b[u8]=D),o("config",C.measurementId,b),C.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e){this.app=e}_delete(){return delete La[this.app.options.appId],Promise.resolve()}}let La={},wg=[];const Eg={};let Cd="dataLayer",O8="gtag",Tg,Lv,Sg=!1;function L8(){const i=[];if(q0()&&i.push("This is a browser extension environment."),W0()||i.push("Cookies are not available."),i.length>0){const e=i.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=Jt.create("invalid-analytics-context",{errorInfo:e});Wt.warn(t.message)}}function x8(i,e,t){L8();const r=i.options.appId;if(!r)throw Jt.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Wt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Jt.create("no-api-key");if(La[r]!=null)throw Jt.create("already-exists",{id:r});if(!Sg){g8(Cd);const{wrappedGtag:l,gtagCore:c}=w8(La,wg,Eg,Cd,O8);Lv=l,Tg=c,Sg=!0}return La[r]=M8(i,wg,Eg,e,Tg,Cd,t),new V8(i)}function F8(i=Hg()){i=Xr(i);const e=Ga(i,kl);return e.isInitialized()?e.getImmediate():j8(i)}function j8(i,e={}){const t=Ga(i,kl);if(t.isInitialized()){const o=t.getImmediate();if(fl(e,t.getOptions()))return o;throw Jt.create("already-initialized")}return t.initialize({options:e})}function z8(i,e,t,r){i=Xr(i),D8(Lv,La[i.app.options.appId],e,t,r).catch(o=>Wt.error(o))}const Ig="@firebase/analytics",kg="0.10.10";function B8(){Yr(new gr(kl,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return x8(r,o,t)},"PUBLIC")),Yr(new gr("analytics-internal",i,"PRIVATE")),zn(Ig,kg),zn(Ig,kg,"esm2017");function i(e){try{const t=e.getProvider(kl).getImmediate();return{logEvent:(r,o,l)=>z8(t,r,o,l)}}catch(t){throw Jt.create("interop-component-reg-failed",{reason:t})}}}B8();const U8={apiKey:"AIzaSyB7Lc1EZGnSm4VxDMRnfULJGrtidSXWxjI",authDomain:"notes-c9e9f.firebaseapp.com",projectId:"notes-c9e9f",storageBucket:"notes-c9e9f.firebasestorage.app",messagingSenderId:"560682983708",appId:"1:560682983708:web:521adccef89f8c086bdad9",measurementId:"G-K2S8MLKDGN"},xv=qg(U8);F8(xv);const Fv=tT(xv),Cg=eT(Fv,"notes");function $8(){var g;const[i,e]=$i.useState(()=>JSON.parse(localStorage.getItem("notes"))||[]),[t,r]=$i.useState(((g=i[0])==null?void 0:g.id)||"");console.log(t);const o=i.find(v=>v.id===t)||i[0];$i.useEffect(()=>yT(Cg,C=>{const D=C.docs.map(b=>({...b.data(),id:b.id}));e(D)}),[]);async function l(){const C=await vT(Cg,{body:"# Type your markdown note's title here"});r(C.id)}$i.useEffect(()=>{var v;t||r((v=i[0])==null?void 0:v.id)},[i]);function c(v){e(C=>{const D=[];for(let b=0;b<C.length;b++){const L=C[b];L.id===t?D.unshift({...L,body:v}):D.push(L)}return D})}async function h(v){const C=tv(Fv,"notes",v);await _T(C)}return dt.jsx("main",{children:i.length>0?dt.jsxs(Xd,{sizes:[30,70],direction:"horizontal",className:"split",children:[dt.jsx(Gy,{notes:i,currentNote:o,setCurrentNoteId:r,newNote:l,deleteNote:h}),t&&i.length>0&&dt.jsx(E0,{currentNote:o,updateNote:c})]}):dt.jsxs("div",{className:"no-notes",children:[dt.jsx("h1",{children:"You have no notes"}),dt.jsx("button",{className:"first-note",onClick:l,children:"Create one now"})]})})}Wy.render(dt.jsx($8,{}),document.getElementById("root"));
